<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ET: Legacy: src/db/db_sqlite3.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ET: Legacy
   </div>
   <div id="projectbrief">Open-source team based FPS game compatible with Wolfenstein: Enemy Territoryâ„¢</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_18fd539062cd3a2de3dfd78991cf728d.html">db</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">db_sqlite3.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>ET: Legacy SQL interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="db__sql_8h_source.html">db_sql.h</a>&quot;</code><br />
</div>
<p><a href="db__sqlite3_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aaccfdefe6284181b01197b0c361aa390"><td class="memItemLeft" align="right" valign="top"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#aaccfdefe6284181b01197b0c361aa390">DB_Init</a> (void)</td></tr>
<tr class="memdesc:aaccfdefe6284181b01197b0c361aa390"><td class="mdescLeft">&#160;</td><td class="mdescRight">DB_Init.  <a href="#aaccfdefe6284181b01197b0c361aa390">More...</a><br /></td></tr>
<tr class="separator:aaccfdefe6284181b01197b0c361aa390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bf5da93c585400a7ee2d34a6dfeea8c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#a4bf5da93c585400a7ee2d34a6dfeea8c">DB_CreateOrUpdateSchema</a> (int startSchemaVersion)</td></tr>
<tr class="memdesc:a4bf5da93c585400a7ee2d34a6dfeea8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">creates tables and populates our scheme.  <a href="#a4bf5da93c585400a7ee2d34a6dfeea8c">More...</a><br /></td></tr>
<tr class="separator:a4bf5da93c585400a7ee2d34a6dfeea8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb93eda3171f978edb8d5a49a366855c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#aeb93eda3171f978edb8d5a49a366855c">DB_CallbackVersion</a> (void *NotUsed, int argc, char **argv, char **azColName)</td></tr>
<tr class="memdesc:aeb93eda3171f978edb8d5a49a366855c"><td class="mdescLeft">&#160;</td><td class="mdescRight">DB_CallbackVersion.  <a href="#aeb93eda3171f978edb8d5a49a366855c">More...</a><br /></td></tr>
<tr class="separator:aeb93eda3171f978edb8d5a49a366855c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0bbdcc565c0d2a1b5bcd466783e5d8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#ae0bbdcc565c0d2a1b5bcd466783e5d8b">DB_CheckUpdates</a> (void)</td></tr>
<tr class="memdesc:ae0bbdcc565c0d2a1b5bcd466783e5d8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">DB_CheckUpdates.  <a href="#ae0bbdcc565c0d2a1b5bcd466783e5d8b">More...</a><br /></td></tr>
<tr class="separator:ae0bbdcc565c0d2a1b5bcd466783e5d8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e4652da423e60689f4f9107e60c4fba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#a7e4652da423e60689f4f9107e60c4fba">DB_Create</a> (void)</td></tr>
<tr class="memdesc:a7e4652da423e60689f4f9107e60c4fba"><td class="mdescLeft">&#160;</td><td class="mdescRight">DB_Create.  <a href="#a7e4652da423e60689f4f9107e60c4fba">More...</a><br /></td></tr>
<tr class="separator:a7e4652da423e60689f4f9107e60c4fba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab29030527ee38bceb738b5ddc3a7e5e9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#ab29030527ee38bceb738b5ddc3a7e5e9">DB_SaveMemDB</a> (void)</td></tr>
<tr class="memdesc:ab29030527ee38bceb738b5ddc3a7e5e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">saves memory db to disk  <a href="#ab29030527ee38bceb738b5ddc3a7e5e9">More...</a><br /></td></tr>
<tr class="separator:ab29030527ee38bceb738b5ddc3a7e5e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fd1bcc53fa87fe7a413a22874bcc861"><td class="memItemLeft" align="right" valign="top"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#a9fd1bcc53fa87fe7a413a22874bcc861">DB_Close</a> (void)</td></tr>
<tr class="memdesc:a9fd1bcc53fa87fe7a413a22874bcc861"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the database properly.  <a href="#a9fd1bcc53fa87fe7a413a22874bcc861">More...</a><br /></td></tr>
<tr class="separator:a9fd1bcc53fa87fe7a413a22874bcc861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a427536f79be9644d9ee5d2948877b710"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#a427536f79be9644d9ee5d2948877b710">DB_BackupDB</a> (const char *zFilename, void(*xProgress)(int, int))</td></tr>
<tr class="memdesc:a427536f79be9644d9ee5d2948877b710"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform an online backup of our database db to the database file named by zFilename. Used to store our memory table in between map changes to disk.  <a href="#a427536f79be9644d9ee5d2948877b710">More...</a><br /></td></tr>
<tr class="separator:a427536f79be9644d9ee5d2948877b710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a517ac1f3de51653ee330dbdaf2ae7baf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#a517ac1f3de51653ee330dbdaf2ae7baf">DB_LoadOrSaveDb</a> (sqlite3 *pInMemory, const char *zFilename, int isSave)</td></tr>
<tr class="memdesc:a517ac1f3de51653ee330dbdaf2ae7baf"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to load the contents of a database file on disk into the "main" database of open database connection pInMemory, or to save the current contents of the database opened by pInMemory into a database file on disk. pInMemory is probably an in-memory database, but this function will also work fine if it is not.  <a href="#a517ac1f3de51653ee330dbdaf2ae7baf">More...</a><br /></td></tr>
<tr class="separator:a517ac1f3de51653ee330dbdaf2ae7baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a374e90ef7a5551277825b62f9c4f56dd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#a374e90ef7a5551277825b62f9c4f56dd">DB_Callback</a> (void *NotUsed, int argc, char **argv, char **azColName)</td></tr>
<tr class="memdesc:a374e90ef7a5551277825b62f9c4f56dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple callback function which can be used to show results printed on console.  <a href="#a374e90ef7a5551277825b62f9c4f56dd">More...</a><br /></td></tr>
<tr class="separator:a374e90ef7a5551277825b62f9c4f56dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb4264a01e5902effbe2648f4e2117b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#aeb4264a01e5902effbe2648f4e2117b2">DB_BeginTransaction</a> (void)</td></tr>
<tr class="memdesc:aeb4264a01e5902effbe2648f4e2117b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables autocommit.  <a href="#aeb4264a01e5902effbe2648f4e2117b2">More...</a><br /></td></tr>
<tr class="separator:aeb4264a01e5902effbe2648f4e2117b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cbe0d47a35122290a6e391bf80fc5b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#a4cbe0d47a35122290a6e391bf80fc5b9">DB_EndTransaction</a> (void)</td></tr>
<tr class="memdesc:a4cbe0d47a35122290a6e391bf80fc5b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables autocommit.  <a href="#a4cbe0d47a35122290a6e391bf80fc5b9">More...</a><br /></td></tr>
<tr class="separator:a4cbe0d47a35122290a6e391bf80fc5b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a76718d69732882c7b8044a9120c5233a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="q__shared_8h.html#adfddcea67e62b6585883d4ddccf68e88">cvar_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#a76718d69732882c7b8044a9120c5233a">db_mode</a></td></tr>
<tr class="separator:a76718d69732882c7b8044a9120c5233a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90fd0f7fd180c6a251cfd0cb42c1daf1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="q__shared_8h.html#adfddcea67e62b6585883d4ddccf68e88">cvar_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#a90fd0f7fd180c6a251cfd0cb42c1daf1">db_uri</a></td></tr>
<tr class="separator:a90fd0f7fd180c6a251cfd0cb42c1daf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6e663497d2c934364b3bcf07496b30b"><td class="memItemLeft" align="right" valign="top">sqlite3 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#ad6e663497d2c934364b3bcf07496b30b">db</a></td></tr>
<tr class="separator:ad6e663497d2c934364b3bcf07496b30b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c7f1ff77f2a4fb931823d374b295afc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#a0c7f1ff77f2a4fb931823d374b295afc">isDBActive</a></td></tr>
<tr class="separator:a0c7f1ff77f2a4fb931823d374b295afc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4722e87f2775aa571cdafec21645182"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__sqlite3_8c.html#ae4722e87f2775aa571cdafec21645182">sql_Version_Statements</a> [<a class="el" href="db__sql_8h.html#a46e91409be799a090c0c6531d11b318c">SQL_DBMS_SCHEMA_VERSION</a>]</td></tr>
<tr class="separator:ae4722e87f2775aa571cdafec21645182"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ET: Legacy SQL interface. </p>
<p>Tutorial: <a href="http://zetcode.com/db/sqlitec/">http://zetcode.com/db/sqlitec/</a> </p>

<p>Definition in file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a427536f79be9644d9ee5d2948877b710"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DB_BackupDB </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>zFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(int, int)&#160;</td>
          <td class="paramname"><em>xProgress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform an online backup of our database db to the database file named by zFilename. Used to store our memory table in between map changes to disk. </p>
<p>This function copies 5 database pages from pDb to zFilename, then unlocks pDb and sleeps for 250 ms, then repeats the process until the entire database is backed up.</p>
<p>The third argument passed to this function must be a pointer to a progress function. After each set of 5 pages is backed up, the progress function is invoked with two integer parameters: the number of pages left to copy, and the total number of pages in the source file. This information may be used, for example, to update a GUI progress bar.</p>
<p>While this function is running, another thread may use the database pDb, or another process may access the underlying database file via a separate connection.</p>
<p>If the backup process is successfully completed, SQLITE_OK is returned. Otherwise, if an error occurs, an SQLite error code is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">zFilename</td><td></td></tr>
    <tr><td class="paramdir"></td><td class="paramname">xProgress</td><td>Progress function to invoke</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>sqlite result code </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000172">Todo:</a></b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00613">613</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

</div>
</div>
<a class="anchor" id="aeb4264a01e5902effbe2648f4e2117b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> DB_BeginTransaction </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables autocommit. </p>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00761">761</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="files_8c_source.html#l05237">FS_Unzip()</a>.</p>

</div>
</div>
<a class="anchor" id="a374e90ef7a5551277825b62f9c4f56dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DB_Callback </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>NotUsed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>azColName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Simple callback function which can be used to show results printed on console. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">NotUsed</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td></td></tr>
    <tr><td class="paramdir"></td><td class="paramname">azColName</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 </dd></dl>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00737">737</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="db__sql__cmds_8c_source.html#l00041">DB_ExecSQLCommand_f()</a>.</p>

</div>
</div>
<a class="anchor" id="aeb93eda3171f978edb8d5a49a366855c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DB_CallbackVersion </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>NotUsed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>azColName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DB_CallbackVersion. </p>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00311">311</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae0bbdcc565c0d2a1b5bcd466783e5d8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> DB_CheckUpdates </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DB_CheckUpdates. </p>
<dl class="section return"><dt>Returns</dt><dd>qtrue on success </dd></dl>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00329">329</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="db__sqlite3_8c_source.html#l00115">DB_Init()</a>.</p>

</div>
</div>
<a class="anchor" id="a9fd1bcc53fa87fe7a413a22874bcc861"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> DB_Close </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the database properly. </p>
<dl class="section return"><dt>Returns</dt><dd>qtrue on success </dd></dl>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00553">553</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="common_8c_source.html#l03525">Com_Shutdown()</a>.</p>

</div>
</div>
<a class="anchor" id="a7e4652da423e60689f4f9107e60c4fba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> DB_Create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DB_Create. </p>
<dl class="section return"><dt>Returns</dt><dd>qtrue on sucess </dd></dl>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00415">415</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="db__sqlite3_8c_source.html#l00115">DB_Init()</a>.</p>

</div>
</div>
<a class="anchor" id="a4bf5da93c585400a7ee2d34a6dfeea8c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> DB_CreateOrUpdateSchema </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>startSchemaVersion</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>creates tables and populates our scheme. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00267">267</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="db__sqlite3_8c_source.html#l00329">DB_CheckUpdates()</a>, and <a class="el" href="db__sqlite3_8c_source.html#l00415">DB_Create()</a>.</p>

</div>
</div>
<a class="anchor" id="a4cbe0d47a35122290a6e391bf80fc5b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> DB_EndTransaction </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables autocommit. </p>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00790">790</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="files_8c_source.html#l05237">FS_Unzip()</a>.</p>

</div>
</div>
<a class="anchor" id="aaccfdefe6284181b01197b0c361aa390"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> DB_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DB_Init. </p>
<dl class="section return"><dt>Returns</dt><dd>qtrue on success </dd></dl>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00115">115</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="common_8c_source.html#l02775">Com_Init()</a>.</p>

</div>
</div>
<a class="anchor" id="a517ac1f3de51653ee330dbdaf2ae7baf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DB_LoadOrSaveDb </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *&#160;</td>
          <td class="paramname"><em>pInMemory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>zFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>isSave</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is used to load the contents of a database file on disk into the "main" database of open database connection pInMemory, or to save the current contents of the database opened by pInMemory into a database file on disk. pInMemory is probably an in-memory database, but this function will also work fine if it is not. </p>
<p>Parameter zFilename points to a nul-terminated string containing the name of the database file on disk to load from or save to. If parameter isSave is non-zero, then the contents of the file zFilename are overwritten with the contents of the database opened by pInMemory. If parameter isSave is zero, then the contents of the database opened by pInMemory are replaced by data loaded from the file zFilename.</p>
<p>If the operation is successful, SQLITE_OK is returned. Otherwise, if an error occurs, an SQLite error code is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pInMemory</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">zFilename</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isSave</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result code </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000173">Todo:</a></b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00679">679</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="db__sqlite3_8c_source.html#l00329">DB_CheckUpdates()</a>, <a class="el" href="db__sqlite3_8c_source.html#l00115">DB_Init()</a>, and <a class="el" href="db__sqlite3_8c_source.html#l00500">DB_SaveMemDB()</a>.</p>

</div>
</div>
<a class="anchor" id="ab29030527ee38bceb738b5ddc3a7e5e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> DB_SaveMemDB </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>saves memory db to disk </p>
<dl class="section return"><dt>Returns</dt><dd>qtrue on success </dd></dl>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00500">500</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="db__sqlite3_8c_source.html#l00553">DB_Close()</a>, <a class="el" href="db__sqlite3_8c_source.html#l00115">DB_Init()</a>, and <a class="el" href="db__sql__cmds_8c_source.html#l00084">DB_SaveMemDB_f()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ad6e663497d2c934364b3bcf07496b30b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sqlite3* db</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00045">45</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="db__sqlite3_8c_source.html#l00613">DB_BackupDB()</a>, <a class="el" href="db__sqlite3_8c_source.html#l00761">DB_BeginTransaction()</a>, <a class="el" href="db__sqlite3_8c_source.html#l00329">DB_CheckUpdates()</a>, <a class="el" href="db__sqlite3_8c_source.html#l00553">DB_Close()</a>, <a class="el" href="db__sqlite3_8c_source.html#l00415">DB_Create()</a>, <a class="el" href="db__sqlite3_8c_source.html#l00267">DB_CreateOrUpdateSchema()</a>, <a class="el" href="db__sqlite3_8c_source.html#l00790">DB_EndTransaction()</a>, <a class="el" href="db__sql__cmds_8c_source.html#l00041">DB_ExecSQLCommand_f()</a>, <a class="el" href="db__sqlite3_8c_source.html#l00115">DB_Init()</a>, <a class="el" href="db__sqlite3_8c_source.html#l00500">DB_SaveMemDB()</a>, and <a class="el" href="db__sql__cmds_8c_source.html#l00084">DB_SaveMemDB_f()</a>.</p>

</div>
</div>
<a class="anchor" id="a76718d69732882c7b8044a9120c5233a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="q__shared_8h.html#adfddcea67e62b6585883d4ddccf68e88">cvar_t</a>* db_mode</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000171">Todo:</a></b></dt><dd>: - move cvars to qcommon? </dd></dl>

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00042">42</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="db__sql__cmds_8c_source.html#l00041">DB_ExecSQLCommand_f()</a>, <a class="el" href="db__sql__cmds_8c_source.html#l00084">DB_SaveMemDB_f()</a>, <a class="el" href="cl__ui_8c_source.html#l00197">LAN_AddServer()</a>, <a class="el" href="cl__ui_8c_source.html#l00064">LAN_LoadCachedServers()</a>, and <a class="el" href="cl__ui_8c_source.html#l00279">LAN_RemoveServer()</a>.</p>

</div>
</div>
<a class="anchor" id="a90fd0f7fd180c6a251cfd0cb42c1daf1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="q__shared_8h.html#adfddcea67e62b6585883d4ddccf68e88">cvar_t</a>* db_uri</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00043">43</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0c7f1ff77f2a4fb931823d374b295afc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> isDBActive</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00046">46</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="db__sqlite3_8c_source.html#l00761">DB_BeginTransaction()</a>, <a class="el" href="db__sqlite3_8c_source.html#l00553">DB_Close()</a>, <a class="el" href="db__sqlite3_8c_source.html#l00790">DB_EndTransaction()</a>, <a class="el" href="db__sql__cmds_8c_source.html#l00041">DB_ExecSQLCommand_f()</a>, and <a class="el" href="db__sqlite3_8c_source.html#l00115">DB_Init()</a>.</p>

</div>
</div>
<a class="anchor" id="ae4722e87f2775aa571cdafec21645182"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* sql_Version_Statements[<a class="el" href="db__sql_8h.html#a46e91409be799a090c0c6531d11b318c">SQL_DBMS_SCHEMA_VERSION</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">{</div><div class="line">        </div><div class="line">        <span class="stringliteral">&quot;CREATE TABLE IF NOT EXISTS etl_version (Id INT PRIMARY KEY NOT NULL, name TEXT, sql TEXT, created TEXT);&quot;</span>  </div><div class="line">        <span class="stringliteral">&quot;CREATE TABLE IF NOT EXISTS rating_users (guid TEXT PRIMARY KEY NOT NULL, mu REAL, sigma REAL, created TEXT, updated TEXT, UNIQUE (guid));&quot;</span>     </div><div class="line">        <span class="stringliteral">&quot;CREATE TABLE IF NOT EXISTS rating_match (guid TEXT PRIMARY KEY NOT NULL, mu REAL, sigma REAL, time_axis INT, time_allies INT, UNIQUE (guid));&quot;</span> </div><div class="line">        <span class="stringliteral">&quot;CREATE TABLE IF NOT EXISTS rating_maps (mapname TEXT PRIMARY KEY NOT NULL, win_axis INT, win_allies INT, UNIQUE (mapname));&quot;</span>,                  </div><div class="line">        </div><div class="line">        <span class="stringliteral">&quot;CREATE TABLE IF NOT EXISTS client_servers (profile TEXT NOT NULL, source INT NOT NULL, address TEXT NOT NULL, name TEXT NOT NULL, mod TEXT NOT NULL, updated DATETIME, created DATETIME);&quot;</span></div><div class="line">        <span class="stringliteral">&quot;CREATE INDEX IF NOT EXISTS client_servers_profile_idx ON client_servers(profile);&quot;</span></div><div class="line">        <span class="stringliteral">&quot;CREATE INDEX IF NOT EXISTS client_servers_address_idx ON client_servers(address);&quot;</span> </div><div class="line"></div><div class="line">        <span class="stringliteral">&quot;CREATE TABLE IF NOT EXISTS etl_whitelist (key TEXT PRIMARY KEY NOT NULL, filename TEXT NOT NULL, updated DATETIME , created DATETIME NOT NULL);&quot;</span></div><div class="line">        <span class="stringliteral">&quot;CREATE INDEX IF NOT EXISTS etl_whitelist_idx ON etl_whitelist(filename);&quot;</span> </div><div class="line"></div><div class="line">        </div><div class="line">        </div><div class="line">}</div></div><!-- fragment -->
<p>Definition at line <a class="el" href="db__sqlite3_8c_source.html#l00080">80</a> of file <a class="el" href="db__sqlite3_8c_source.html">db_sqlite3.c</a>.</p>

<p>Referenced by <a class="el" href="db__sqlite3_8c_source.html#l00267">DB_CreateOrUpdateSchema()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 16 2019 14:19:57 for ET: Legacy by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>

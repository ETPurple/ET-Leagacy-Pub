<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ET: Legacy: src/renderer/tr_shader.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ET: Legacy
   </div>
   <div id="projectbrief">Open-source team based FPS game compatible with Wolfenstein: Enemy Territoryâ„¢</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_7bc5e25958a2fb25a8561f3aa0def6c5.html">renderer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">tr_shader.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="tr__shader_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Wolfenstein: Enemy Territory GPL Source Code</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (C) 1999-2010 id Software LLC, a ZeniMax Media company.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * ET: Legacy</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Copyright (C) 2012-2018 ET:Legacy team &lt;mail@etlegacy.com&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * This file is part of ET: Legacy - http://www.etlegacy.com</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * ET: Legacy is free software: you can redistribute it and/or modify</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * the Free Software Foundation, either version 3 of the License, or</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * (at your option) any later version.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * ET: Legacy is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * GNU General Public License for more details.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * along with ET: Legacy. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * In addition, Wolfenstein: Enemy Territory GPL Source Code is also</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * subject to certain additional terms. You should have received a copy</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * of these additional terms immediately following the terms and conditions</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * of the GNU General Public License which accompanied the source code.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * If not, please request a copy in writing from id Software at the address below.</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * id Software LLC, c/o ZeniMax Media Inc., Suite 120, Rockville, Maryland 20850 USA.</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="tr__local_8h.html">tr_local.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//#define SH_LOADTIMING</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a0b7b5ade5914f295223f64cb09505ac0">   39</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="tr__shader_8c.html#a0b7b5ade5914f295223f64cb09505ac0">s_shaderText</a>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// the shader is parsed into these global variables, then copied into</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// dynamically allocated memory if it is valid.</span></div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#ae08d30252aeb1a85895b818bd8c4c7d3">   43</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structshaderStage__t.html">shaderStage_t</a> stages[<a class="code" href="tr__local_8h.html#a8f9f17869dd24d22985f328decc076a8">MAX_SHADER_STAGES</a>];</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#add8b99b73cfef6fc7963980f9db455de">   44</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structshader__s.html">shader_t</a>      <a class="code" href="tr__shader_8c.html#add8b99b73cfef6fc7963980f9db455de">shader</a>;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#ae05bf70d04e9fe9cc427414415f8f01f">   45</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structtexModInfo__t.html">texModInfo_t</a>  texMods[<a class="code" href="tr__local_8h.html#a8f9f17869dd24d22985f328decc076a8">MAX_SHADER_STAGES</a>][<a class="code" href="tr__local_8h.html#a6f772f06fc8d1df2900a3f6dddfa8716">TR_MAX_TEXMODS</a>];</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// these are here because they are only referenced while parsing a shader</span></div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">   48</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span>       <a class="code" href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">implicitMap</a>[<a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#aab9ed2981b91833632d1ef7e7e902217">   49</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span>   <a class="code" href="tr__shader_8c.html#aab9ed2981b91833632d1ef7e7e902217">implicitStateBits</a>;</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a52b8d89d4ebdb10b979fbbf4cfc5b9e4">   50</a></span>&#160;<span class="keyword">static</span> <a class="code" href="tr__local_8h.html#a1480f4cb61af8bab511fad028c084b20">cullType_t</a> <a class="code" href="tr__shader_8c.html#a52b8d89d4ebdb10b979fbbf4cfc5b9e4">implicitCullType</a>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a5c075d6db4d7bf46cc72a74e7a356347">   52</a></span>&#160;<span class="preprocessor">#define FILE_HASH_SIZE      4096</span></div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a01026e43e1ee8cf5973f09c88c1b6b99">   53</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structshader__s.html">shader_t</a> *hashTable[<a class="code" href="tr__shader_8c.html#a5c075d6db4d7bf46cc72a74e7a356347">FILE_HASH_SIZE</a>];</div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#accbfbb017e2efca51df4e2d767280b09">   54</a></span>&#160;<span class="preprocessor">#define generateHashValue(fname) Q_GenerateHashValue(fname, FILE_HASH_SIZE, qfalse, qtrue)</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="structshaderStringPointer__s.html">   63</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structshaderStringPointer__s.html">shaderStringPointer_s</a></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="structshaderStringPointer__s.html#a637304a0854fb097033d25d4d26768ec">   65</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structshaderStringPointer__s.html#a637304a0854fb097033d25d4d26768ec">pStr</a>;</div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="structshaderStringPointer__s.html#a3fa910376850a0d63ae2a830fa49591c">   66</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structshaderStringPointer__s.html">shaderStringPointer_s</a> *<a class="code" href="structshaderStringPointer__s.html#a3fa910376850a0d63ae2a830fa49591c">next</a>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;} <a class="code" href="tr__shader_8c.html#ac8c463d8f3f7e1fb433fb5ee30516b14">shaderStringPointer_t</a>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a122b14577b9ec57cc319c2c520f06fae">   69</a></span>&#160;<a class="code" href="structshaderStringPointer__s.html">shaderStringPointer_t</a> shaderChecksumLookup[<a class="code" href="tr__shader_8c.html#a5c075d6db4d7bf46cc72a74e7a356347">FILE_HASH_SIZE</a>];</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#a4dc51618f8f4789b941646df67a79eba">   77</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a4dc51618f8f4789b941646df67a79eba">R_RemapShader</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *shaderName, <span class="keyword">const</span> <span class="keywordtype">char</span> *newShaderName, <span class="keyword">const</span> <span class="keywordtype">char</span> *timeOffset)</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">char</span>      strippedName[<a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">int</span>       <a class="code" href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="structshader__s.html">shader_t</a>  *<a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>, *<a class="code" href="tr__animation__mdm_8c.html#afb4bd2f90ee3d992b058bb3e00872c3c">sh2</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="q__shared_8h.html#aa46eefcd4cf4d61e2fa13b5ff45f6847">qhandle_t</a> h;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    sh = <a class="code" href="tr__shader_8c.html#ae312db0f08696bf6ac77c7b0ed5ccc4b">R_FindShaderByName</a>(shaderName);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">if</span> (sh == <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || sh == <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aac35656af63d3b2b5057189ed4c45a3e">defaultShader</a>)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        h  = <a class="code" href="tr__shader_8c.html#a8a9eed080ae1cf52c7128a52e4e07a50">RE_RegisterShaderLightMap</a>(shaderName, 0);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        sh = <a class="code" href="tr__shader_8c.html#a379ee38303eb2bfeb9a0273de9228f19">R_GetShaderByHandle</a>(h);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (sh == <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || sh == <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aac35656af63d3b2b5057189ed4c45a3e">defaultShader</a>)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: R_RemapShader: shader %s not found\n&quot;</span>, shaderName);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    sh2 = <a class="code" href="tr__shader_8c.html#ae312db0f08696bf6ac77c7b0ed5ccc4b">R_FindShaderByName</a>(newShaderName);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (sh2 == <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || sh2 == <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aac35656af63d3b2b5057189ed4c45a3e">defaultShader</a>)</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        h   = <a class="code" href="tr__shader_8c.html#a8a9eed080ae1cf52c7128a52e4e07a50">RE_RegisterShaderLightMap</a>(newShaderName, 0);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        sh2 = <a class="code" href="tr__shader_8c.html#a379ee38303eb2bfeb9a0273de9228f19">R_GetShaderByHandle</a>(h);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (sh2 == <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || sh2 == <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aac35656af63d3b2b5057189ed4c45a3e">defaultShader</a>)</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: R_RemapShader: new shader %s not found\n&quot;</span>, newShaderName);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// remap all the shaders with the given name</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// even tho they might have different lightmaps</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="q__shared_8c.html#ac5559db84415463975aeaa060f618f7d">COM_StripExtension</a>(shaderName, strippedName, <span class="keyword">sizeof</span>(strippedName));</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    hash = <a class="code" href="tr__shader_8c.html#accbfbb017e2efca51df4e2d767280b09">generateHashValue</a>(strippedName);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">for</span> (sh = hashTable[hash]; <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>; sh = sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>)</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(sh-&gt;<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>, strippedName) == 0)</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">if</span> (sh != sh2)</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                sh-&gt;<a class="code" href="structshader__s.html#a8fc0bf1568f390169f53e8540ea467ef">remappedShader</a> = <a class="code" href="tr__animation__mdm_8c.html#afb4bd2f90ee3d992b058bb3e00872c3c">sh2</a>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                sh-&gt;<a class="code" href="structshader__s.html#a8fc0bf1568f390169f53e8540ea467ef">remappedShader</a> = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (timeOffset)</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        sh2-&gt;<a class="code" href="structshader__s.html#a07935f69cd87b50a9f0575dc0a8e5d19">timeOffset</a> = atof(timeOffset);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#adc7392b4ee0ab13892fd3f48e5b438a2">  140</a></span>&#160;<span class="keyword">static</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> <a class="code" href="tr__shader_8c.html#adc7392b4ee0ab13892fd3f48e5b438a2">ParseVector</a>(<span class="keywordtype">char</span> **<a class="code" href="g__character_8c.html#af121d1294678e63f1fe71694880ef3ed">text</a>, <span class="keywordtype">int</span> count, <span class="keywordtype">float</span> *<a class="code" href="tr__animation__mdm_8c.html#a7e13b3568b7b041b8cab1201461c2ab5">v</a>)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordtype">char</span> *token;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordtype">int</span>  i;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// FIXME: spaces are currently required after parens, should change parseext...</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (strcmp(token, <span class="stringliteral">&quot;(&quot;</span>))</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parenthesis in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">for</span> (i = 0 ; i &lt; count ; i++)</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing vector element in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        v[i] = (float)atof(token);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (strcmp(token, <span class="stringliteral">&quot;)&quot;</span>))</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parenthesis in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a9ae49b2a10e671a274c82329c37a79b3">  178</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="tr__shader_8c.html#a9ae49b2a10e671a274c82329c37a79b3">NameToAFunc</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *funcname)</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;{</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(funcname, <span class="stringliteral">&quot;GT0&quot;</span>))</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a88c1b7af90ea87be72b8f97e22474c8c">GLS_ATEST_GT_0</a>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(funcname, <span class="stringliteral">&quot;LT128&quot;</span>))</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a3065866fe53895d608f1449d03345c6a">GLS_ATEST_LT_80</a>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(funcname, <span class="stringliteral">&quot;GE128&quot;</span>))</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#ade4a593805de6ee6d59c4a0db0cc362f">GLS_ATEST_GE_80</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: invalid alphaFunc name &#39;%s&#39; in shader &#39;%s&#39;\n&quot;</span>, funcname, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a7512bdf9534576c088a761f8481576de">  202</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="tr__shader_8c.html#a7512bdf9534576c088a761f8481576de">NameToSrcBlendMode</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;{</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_ONE&quot;</span>))</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac">GLS_SRCBLEND_ONE</a>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_ZERO&quot;</span>))</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609af509a0566baa77afd7d612455ee365a0">GLS_SRCBLEND_ZERO</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_DST_COLOR&quot;</span>))</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_ONE_MINUS_DST_COLOR&quot;</span>))</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a7e12bb7fac952faa546d93e73f6e0271">GLS_SRCBLEND_ONE_MINUS_DST_COLOR</a>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_SRC_ALPHA&quot;</span>))</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a4629e9392a6fa30b3b8dfca9b7d7fb2d">GLS_SRCBLEND_SRC_ALPHA</a>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_ONE_MINUS_SRC_ALPHA&quot;</span>))</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a28d5f971b62d006b171d84187ab28fae">GLS_SRCBLEND_ONE_MINUS_SRC_ALPHA</a>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_DST_ALPHA&quot;</span>))</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a2a8d6ce77b8f1e4f5f752c7876bf7fcb">GLS_SRCBLEND_DST_ALPHA</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_ONE_MINUS_DST_ALPHA&quot;</span>))</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5981ef71d347d48eddaeb44696c11765">GLS_SRCBLEND_ONE_MINUS_DST_ALPHA</a>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_SRC_ALPHA_SATURATE&quot;</span>))</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609ac6feee0cc3f76294c7c78341142de0ed">GLS_SRCBLEND_ALPHA_SATURATE</a>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: unknown src blend mode &#39;%s&#39; in shader &#39;%s&#39;, substituting GL_ONE\n&quot;</span>, name, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac">GLS_SRCBLEND_ONE</a>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#abf5cd8dab72ecbe56610f71712fa4b35">  251</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="tr__shader_8c.html#abf5cd8dab72ecbe56610f71712fa4b35">NameToDstBlendMode</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;{</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_ONE&quot;</span>))</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a3bb089e7ee899da0b4e9b4b17d716377">GLS_DSTBLEND_ONE</a>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    }</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_ZERO&quot;</span>))</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_SRC_ALPHA&quot;</span>))</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afc816fc27c8a956f6c07510f93e2b523">GLS_DSTBLEND_SRC_ALPHA</a>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_ONE_MINUS_SRC_ALPHA&quot;</span>))</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a50de0d49082484f366759a62c2f8e7a7">GLS_DSTBLEND_ONE_MINUS_SRC_ALPHA</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_DST_ALPHA&quot;</span>))</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609adfec1d5f3a1d0fdfbca5f63d24d88d03">GLS_DSTBLEND_DST_ALPHA</a>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_ONE_MINUS_DST_ALPHA&quot;</span>))</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a60182585f02936ed4323c9885a51ea79">GLS_DSTBLEND_ONE_MINUS_DST_ALPHA</a>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_SRC_COLOR&quot;</span>))</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a7379cb52014d710eb6ca42a544ff7a3c">GLS_DSTBLEND_SRC_COLOR</a>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(name, <span class="stringliteral">&quot;GL_ONE_MINUS_SRC_COLOR&quot;</span>))</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609ad07517a56f680aff8c9b8a53037beec0">GLS_DSTBLEND_ONE_MINUS_SRC_COLOR</a>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: unknown dst blend mode &#39;%s&#39; in shader &#39;%s&#39;, substituting GL_ONE\n&quot;</span>, name, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a3bb089e7ee899da0b4e9b4b17d716377">GLS_DSTBLEND_ONE</a>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a76d23691966390e7f5777cd233398023">  295</a></span>&#160;<span class="keyword">static</span> <a class="code" href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092">genFunc_t</a> <a class="code" href="tr__shader_8c.html#a76d23691966390e7f5777cd233398023">NameToGenFunc</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *funcname)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(funcname, <span class="stringliteral">&quot;sin&quot;</span>))</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a76b4f522ded9e89e54ba343ffa6e4369">GF_SIN</a>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(funcname, <span class="stringliteral">&quot;square&quot;</span>))</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a5b6a4fc6de5dfca5140f2663e4341f6a">GF_SQUARE</a>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(funcname, <span class="stringliteral">&quot;triangle&quot;</span>))</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092ad857bfa16bae3a2d7e70c6de731b0559">GF_TRIANGLE</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(funcname, <span class="stringliteral">&quot;sawtooth&quot;</span>))</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a72d01f6e8b73dea27285bdbec6dd4a9b">GF_SAWTOOTH</a>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(funcname, <span class="stringliteral">&quot;inversesawtooth&quot;</span>))</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a7bb00dbb6e2977ac4eb1705e4a084146">GF_INVERSE_SAWTOOTH</a>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(funcname, <span class="stringliteral">&quot;noise&quot;</span>))</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092aa5796b696f463943c26e1e8c594c881c">GF_NOISE</a>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: invalid genfunc name &#39;%s&#39; in shader &#39;%s&#39;\n&quot;</span>, funcname, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a76b4f522ded9e89e54ba343ffa6e4369">GF_SIN</a>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a84ada04fc0a9f70bb02a7b23fc14c18d">  331</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a84ada04fc0a9f70bb02a7b23fc14c18d">ParseWaveForm</a>(<span class="keywordtype">char</span> **<a class="code" href="g__character_8c.html#af121d1294678e63f1fe71694880ef3ed">text</a>, <a class="code" href="structwaveForm__t.html">waveForm_t</a> *wave)</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;{</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordtype">char</span> *token;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing waveform parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    wave-&gt;<a class="code" href="structwaveForm__t.html#a2285d473e6ed4f901f640c947c392d6b">func</a> = <a class="code" href="tr__shader_8c.html#a76d23691966390e7f5777cd233398023">NameToGenFunc</a>(token);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">// BASE, AMP, PHASE, FREQ</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing waveform parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    wave-&gt;<a class="code" href="structwaveForm__t.html#aca8ff8710a07c3d1d1e858c3467b92fc">base</a> = atof(token);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing waveform parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    wave-&gt;<a class="code" href="structwaveForm__t.html#aeca9a857ddf03960fbc695b9fd9d11ba">amplitude</a> = atof(token);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing waveform parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    wave-&gt;<a class="code" href="structwaveForm__t.html#a03d724d6a656e363e74209a26e6a011f">phase</a> = atof(token);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing waveform parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    wave-&gt;<a class="code" href="structwaveForm__t.html#a017b3794be20870e17ac630b0a5b82fa">frequency</a> = atof(token);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a8c3262a58c2c24948bf7a69b4d5692eb">  382</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a8c3262a58c2c24948bf7a69b4d5692eb">ParseTexMod</a>(<span class="keywordtype">char</span> *_text, <a class="code" href="structshaderStage__t.html">shaderStage_t</a> *stage)</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;{</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>   *token;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordtype">char</span>         **<a class="code" href="g__character_8c.html#af121d1294678e63f1fe71694880ef3ed">text</a> = &amp;_text;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="structtexModInfo__t.html">texModInfo_t</a> *tmi;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a3618aefcd18757c48c6fba6d56ab967f">numTexMods</a> == <a class="code" href="tr__local_8h.html#a6f772f06fc8d1df2900a3f6dddfa8716">TR_MAX_TEXMODS</a>)</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <a class="code" href="tr__common_8h.html#a25773beb6dfe4ff97d145689df62c375">Ren_Drop</a>(<span class="stringliteral">&quot;ParseTexMod ERROR: too many tcMod stages in shader &#39;%s&#39;&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    tmi = &amp;stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ac460ff874c73b07d93144cf5c760cb81">texMods</a>[stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a3618aefcd18757c48c6fba6d56ab967f">numTexMods</a>];</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a3618aefcd18757c48c6fba6d56ab967f">numTexMods</a>++;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// swap</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;swap&quot;</span>))       <span class="comment">// swap S/T coords (rotate 90d)</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a7b41a1be851611687b52bfafa342c0e0">type</a> = <a class="code" href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62a024e3ab34703bd8344f837d4496504af">TMOD_SWAP</a>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// turb</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// added &#39;else&#39; so it wouldn&#39;t claim &#39;swap&#39; was unknown.</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;turb&quot;</span>))</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing tcMod turb parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af8357925ef831bf705fa59cfc4180d93">wave</a>.<a class="code" href="structwaveForm__t.html#aca8ff8710a07c3d1d1e858c3467b92fc">base</a> = atof(token);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        token          = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing tcMod turb in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af8357925ef831bf705fa59cfc4180d93">wave</a>.<a class="code" href="structwaveForm__t.html#aeca9a857ddf03960fbc695b9fd9d11ba">amplitude</a> = atof(token);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        token               = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing tcMod turb in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af8357925ef831bf705fa59cfc4180d93">wave</a>.<a class="code" href="structwaveForm__t.html#a03d724d6a656e363e74209a26e6a011f">phase</a> = atof(token);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        token           = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing tcMod turb in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af8357925ef831bf705fa59cfc4180d93">wave</a>.<a class="code" href="structwaveForm__t.html#a017b3794be20870e17ac630b0a5b82fa">frequency</a> = atof(token);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a7b41a1be851611687b52bfafa342c0e0">type</a> = <a class="code" href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62a476985f4e4b1bc1d0ef7c8bcfa7cfcab">TMOD_TURBULENT</a>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">// scale</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;scale&quot;</span>))</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing scale parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a2a4a40c5aa03d159c91deb6aa14823a2">scale</a>[0] = atof(token);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing scale parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a2a4a40c5aa03d159c91deb6aa14823a2">scale</a>[1] = atof(token);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a7b41a1be851611687b52bfafa342c0e0">type</a>     = <a class="code" href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62af2857dd60002b592d319d9cbf40a576c">TMOD_SCALE</a>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">// scroll</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;scroll&quot;</span>))</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing 1st scale scroll parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#ab4cc9b4613c883d589654365ca0fc71d">scroll</a>[0] = atof(token);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        token          = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing 2nd scale scroll parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        }</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#ab4cc9b4613c883d589654365ca0fc71d">scroll</a>[1] = atof(token);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a7b41a1be851611687b52bfafa342c0e0">type</a>      = <a class="code" href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62a566933cb4a22257d79162ebab61d1e85">TMOD_SCROLL</a>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">// stretch</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;stretch&quot;</span>))</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing stretch parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af8357925ef831bf705fa59cfc4180d93">wave</a>.<a class="code" href="structwaveForm__t.html#a2285d473e6ed4f901f640c947c392d6b">func</a> = <a class="code" href="tr__shader_8c.html#a76d23691966390e7f5777cd233398023">NameToGenFunc</a>(token);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing stretch parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af8357925ef831bf705fa59cfc4180d93">wave</a>.<a class="code" href="structwaveForm__t.html#aca8ff8710a07c3d1d1e858c3467b92fc">base</a> = atof(token);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing stretch parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af8357925ef831bf705fa59cfc4180d93">wave</a>.<a class="code" href="structwaveForm__t.html#aeca9a857ddf03960fbc695b9fd9d11ba">amplitude</a> = atof(token);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing stretch parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af8357925ef831bf705fa59cfc4180d93">wave</a>.<a class="code" href="structwaveForm__t.html#a03d724d6a656e363e74209a26e6a011f">phase</a> = atof(token);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing stretch parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af8357925ef831bf705fa59cfc4180d93">wave</a>.<a class="code" href="structwaveForm__t.html#a017b3794be20870e17ac630b0a5b82fa">frequency</a> = atof(token);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a7b41a1be851611687b52bfafa342c0e0">type</a> = <a class="code" href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62a0621f7b70224e9429d065005da5593dd">TMOD_STRETCH</a>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="comment">// transform</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;transform&quot;</span>))</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing transform parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af82dab42ab04e3d497982cffdf2e9e98">matrix</a>[0][0] = atof(token);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing transform parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af82dab42ab04e3d497982cffdf2e9e98">matrix</a>[0][1] = atof(token);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing transform parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af82dab42ab04e3d497982cffdf2e9e98">matrix</a>[1][0] = atof(token);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing transform parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#af82dab42ab04e3d497982cffdf2e9e98">matrix</a>[1][1] = atof(token);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing transform parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a6732c9ba70873148e0b6fc655152edae">translate</a>[0] = atof(token);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing transform parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a6732c9ba70873148e0b6fc655152edae">translate</a>[1] = atof(token);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a7b41a1be851611687b52bfafa342c0e0">type</a> = <a class="code" href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62a6f299127ed5ef2ee1220458aadd10910">TMOD_TRANSFORM</a>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// rotate</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;rotate&quot;</span>))</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing tcMod rotate parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a7c1d9657f0e66e56c8331ef5821c3e97">rotateSpeed</a> = atof(token);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a7b41a1be851611687b52bfafa342c0e0">type</a>        = <a class="code" href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62aa3fd11b0fcbd56141b27f20c8f6b67b2">TMOD_ROTATE</a>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="comment">// entityTranslate</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;entityTranslate&quot;</span>))</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        tmi-&gt;<a class="code" href="structtexModInfo__t.html#a7b41a1be851611687b52bfafa342c0e0">type</a> = <a class="code" href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62aaf6e9e83c83d9c9098a4da5c2b26dfcd">TMOD_ENTITY_TRANSLATE</a>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: unknown tcMod &#39;%s&#39; in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#ae89be5e21e9930869d33166c3b68f6c4">  604</a></span>&#160;<span class="keyword">static</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> <a class="code" href="tr__shader_8c.html#ae89be5e21e9930869d33166c3b68f6c4">ParseStage</a>(<a class="code" href="structshaderStage__t.html">shaderStage_t</a> *stage, <span class="keywordtype">char</span> **<a class="code" href="g__character_8c.html#af121d1294678e63f1fe71694880ef3ed">text</a>)</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;{</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordtype">char</span>     *token;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordtype">int</span>      depthMaskBits     = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a26c7b5847174a854a49f9b7db6dee3e2">GLS_DEPTHMASK_TRUE</a>, blendSrcBits = 0, blendDstBits = 0, atestBits = 0, depthFuncBits = 0;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> depthMaskExplicit = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    stage-&gt;<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: no matching &#39;}&#39; found\n&quot;</span>);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">if</span> (token[0] == <span class="charliteral">&#39;}&#39;</span>)</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        }</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="comment">// check special case for map16/map32/mapcomp/mapnocomp (compression enabled)</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;map16&quot;</span>))          <span class="comment">// only use this texture if 16 bit color depth</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="tr__init_8c.html#ae5a86f4b2e7724fd33b09be699cacc97">glConfig</a>.<a class="code" href="structglconfig__t.html#ac3ce65bed93df99036d35faab2e41011">colorBits</a> &lt;= 16)</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                token = <span class="stringliteral">&quot;map&quot;</span>;   <span class="comment">// use this map</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                (void) <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);     <span class="comment">// ignore the map</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            }</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        }</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;map32&quot;</span>))            <span class="comment">// only use this texture if 16 bit color depth</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="tr__init_8c.html#ae5a86f4b2e7724fd33b09be699cacc97">glConfig</a>.<a class="code" href="structglconfig__t.html#ac3ce65bed93df99036d35faab2e41011">colorBits</a> &gt; 16)</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                token = <span class="stringliteral">&quot;map&quot;</span>;   <span class="comment">// use this map</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                (void) <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);     <span class="comment">// ignore the map</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;mapcomp&quot;</span>))            <span class="comment">// only use this texture if compression is enabled</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="tr__init_8c.html#ae5a86f4b2e7724fd33b09be699cacc97">glConfig</a>.<a class="code" href="structglconfig__t.html#aeda7b80874fcbcd4653022011ff50bd8">textureCompression</a> &amp;&amp; <a class="code" href="tr__init_8c.html#a783d57e9d724bb0e296b4f0e9f7cab0d">r_extCompressedTextures</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                token = <span class="stringliteral">&quot;map&quot;</span>;   <span class="comment">// use this map</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                (void) <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);     <span class="comment">// ignore the map</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;mapnocomp&quot;</span>))            <span class="comment">// only use this texture if compression is not available or disabled</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="tr__init_8c.html#ae5a86f4b2e7724fd33b09be699cacc97">glConfig</a>.<a class="code" href="structglconfig__t.html#aeda7b80874fcbcd4653022011ff50bd8">textureCompression</a>)</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                token = <span class="stringliteral">&quot;map&quot;</span>;   <span class="comment">// use this map</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                (void) <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);     <span class="comment">// ignore the map</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;animmapcomp&quot;</span>))            <span class="comment">// only use this texture if compression is enabled</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="tr__init_8c.html#ae5a86f4b2e7724fd33b09be699cacc97">glConfig</a>.<a class="code" href="structglconfig__t.html#aeda7b80874fcbcd4653022011ff50bd8">textureCompression</a> &amp;&amp; <a class="code" href="tr__init_8c.html#a783d57e9d724bb0e296b4f0e9f7cab0d">r_extCompressedTextures</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                token = <span class="stringliteral">&quot;animmap&quot;</span>;   <span class="comment">// use this map</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                <span class="keywordflow">while</span> (token[0])</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                    (void) <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);     <span class="comment">// ignore the map</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;animmapnocomp&quot;</span>))            <span class="comment">// only use this texture if compression is not available or disabled</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        {</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="tr__init_8c.html#ae5a86f4b2e7724fd33b09be699cacc97">glConfig</a>.<a class="code" href="structglconfig__t.html#aeda7b80874fcbcd4653022011ff50bd8">textureCompression</a>)</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                token = <span class="stringliteral">&quot;animmap&quot;</span>;   <span class="comment">// use this map</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                <span class="keywordflow">while</span> (token[0])</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                    (void) <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);     <span class="comment">// ignore the map</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            }</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="comment">// map &lt;name&gt;</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;map&quot;</span>))</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parameter for &#39;map&#39; keyword in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            <span class="comment">// fixes startup error and allows polygon shadows to work again</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;$whiteimage&quot;</span>) || !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;*white&quot;</span>))</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a26544a65eb3a77514c16db1f7a7ef36a">whiteImage</a>;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;$dlight&quot;</span>))</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a8617df5b397d359970931b7a4b8d472e">dlightImage</a>;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            }</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;$lightmap&quot;</span>))</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#aff49fd5f8043dfa9f1f3d7ac3fc44330">isLightmap</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> &lt; 0)</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a26544a65eb3a77514c16db1f7a7ef36a">whiteImage</a>;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                {</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a3641a2f9201c25daea2e70dd88e71681">lightmaps</a>[shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a>];</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                }</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            }</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = <a class="code" href="tr__image_8c.html#a8aa4c79f547ccb517411a9cd3e76d990">R_FindImageFile</a>(token, !shader.<a class="code" href="structshader__s.html#aaedbf92720608037ecec267bc6ae8a30">noMipMaps</a>, !shader.<a class="code" href="structshader__s.html#a8d3a2544c772c37f23d29cc2b07de54d">noPicMip</a>, GL_REPEAT, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                <span class="keywordflow">if</span> (!stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0])</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                    <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: R_FindImageFile could not find &#39;map&#39; image &#39;%s&#39; in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                }</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <span class="comment">// clampmap &lt;name&gt;</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;clampmap&quot;</span>))</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        {</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parameter for &#39;clampmap&#39; keyword in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            }</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = <a class="code" href="tr__image_8c.html#a8aa4c79f547ccb517411a9cd3e76d990">R_FindImageFile</a>(token, !shader.<a class="code" href="structshader__s.html#aaedbf92720608037ecec267bc6ae8a30">noMipMaps</a>, !shader.<a class="code" href="structshader__s.html#a8d3a2544c772c37f23d29cc2b07de54d">noPicMip</a>, GL_CLAMP_TO_EDGE, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <span class="keywordflow">if</span> (!stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0])</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: R_FindImageFile could not find &#39;clampmap&#39; image &#39;%s&#39; in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            }</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        }</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="comment">// lightmap &lt;name&gt;</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;lightmap&quot;</span>))</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            {</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parameter for &#39;lightmap&#39; keyword in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            }</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="comment">// fixes startup error and allows polygon shadows to work again</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;$whiteimage&quot;</span>) || !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;*white&quot;</span>))</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            {</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a26544a65eb3a77514c16db1f7a7ef36a">whiteImage</a>;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;$dlight&quot;</span>))</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a8617df5b397d359970931b7a4b8d472e">dlightImage</a>;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            }</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;$lightmap&quot;</span>))</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#aff49fd5f8043dfa9f1f3d7ac3fc44330">isLightmap</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> &lt; 0)</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                {</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a26544a65eb3a77514c16db1f7a7ef36a">whiteImage</a>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                {</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a3641a2f9201c25daea2e70dd88e71681">lightmaps</a>[shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a>];</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            }</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = <a class="code" href="tr__image_8c.html#a8aa4c79f547ccb517411a9cd3e76d990">R_FindImageFile</a>(token, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, GL_CLAMP_TO_EDGE, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                <span class="keywordflow">if</span> (!stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0])</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                    <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: R_FindImageFile could not find &#39;lighmap&#39; image &#39;%s&#39; in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                }</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#aff49fd5f8043dfa9f1f3d7ac3fc44330">isLightmap</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            }</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        }</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <span class="comment">// animMap &lt;frequency&gt; &lt;image1&gt; .... &lt;imageN&gt;</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;animMap&quot;</span>))</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        {</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            <span class="keywordtype">int</span> totalImages = 0;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parameter for &#39;animMmap&#39; keyword in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ae5cbf2179a790764ae65715da4c30d56">imageAnimationSpeed</a> = atof(token);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            <span class="comment">// parse up to MAX_IMAGE_ANIMATIONS animations</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            {</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                <span class="keywordtype">int</span> num;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                num = stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a6b2821d92e8d4ca19260520fb0f683ed">numImageAnimations</a>;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                <span class="keywordflow">if</span> (num &lt; <a class="code" href="tr__local_8h.html#a9c3accc458de4122b714536a2a87ba9a">MAX_IMAGE_ANIMATIONS</a>)</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[num] = <a class="code" href="tr__image_8c.html#a8aa4c79f547ccb517411a9cd3e76d990">R_FindImageFile</a>(token, !shader.<a class="code" href="structshader__s.html#aaedbf92720608037ecec267bc6ae8a30">noMipMaps</a>, !shader.<a class="code" href="structshader__s.html#a8d3a2544c772c37f23d29cc2b07de54d">noPicMip</a>, GL_REPEAT, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                    <span class="keywordflow">if</span> (!stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[num])</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                    {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: R_FindImageFile could not find &#39;animMap&#39; image &#39;%s&#39; in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                    }</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a6b2821d92e8d4ca19260520fb0f683ed">numImageAnimations</a>++;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                totalImages++;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            }</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            <span class="keywordflow">if</span> (totalImages &gt; <a class="code" href="tr__local_8h.html#a9c3accc458de4122b714536a2a87ba9a">MAX_IMAGE_ANIMATIONS</a>)</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            {</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.Printf(<a class="code" href="q__shared_8h.html#a795cf7b86a6e2a8b8ca0e3f60be45ae6abee3929de920502d92788a8576c641e2">PRINT_WARNING</a>, <span class="stringliteral">&quot;WARNING: ignoring excess images for &#39;animMap&#39; (found %d, max is %d) in shader &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                          totalImages, <a class="code" href="tr__local_8h.html#a9c3accc458de4122b714536a2a87ba9a">MAX_IMAGE_ANIMATIONS</a>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        }</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;videoMap&quot;</span>))</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            {</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parameter for &#39;videoMmap&#39; keyword in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            }</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#aa017d18b6fdc7b40f38f7ecca558736b">videoMapHandle</a> = <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#af57614ea712dc2f7a3fa1ac3e326b10e">CIN_PlayCinematic</a>(token, 0, 0, 256, 256, (<a class="code" href="q__shared_8h.html#ad645839104fcd74bd1a9d9b25d64edb2ab4029111584d6b3707261c118d21a8fd">CIN_loop</a> | <a class="code" href="q__shared_8h.html#ad645839104fcd74bd1a9d9b25d64edb2ae512ede5de98395d2dbfde4b570c7936">CIN_silent</a> | <a class="code" href="q__shared_8h.html#ad645839104fcd74bd1a9d9b25d64edb2a3f66ddb63b087c35f59c1783ffe12701">CIN_shader</a>));</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="keywordflow">if</span> (stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#aa017d18b6fdc7b40f38f7ecca558736b">videoMapHandle</a> != -1)</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a5629bcc222eaddb10bf843d5feb7b232">isVideoMap</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0]   = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ac615ea67e6d15f29ba171965b33f2a1d">scratchImage</a>[stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#aa017d18b6fdc7b40f38f7ecca558736b">videoMapHandle</a>];</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.Printf(<a class="code" href="q__shared_8h.html#a795cf7b86a6e2a8b8ca0e3f60be45ae6abee3929de920502d92788a8576c641e2">PRINT_WARNING</a>, <span class="stringliteral">&quot;WARNING: could not load &#39;%s&#39; for &#39;videoMap&#39; keyword in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            }</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="comment">// alphafunc &lt;func&gt;</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;alphaFunc&quot;</span>))</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parameter for &#39;alphaFunc&#39; keyword in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            }</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            atestBits = <a class="code" href="tr__shader_8c.html#a9ae49b2a10e671a274c82329c37a79b3">NameToAFunc</a>(token);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="comment">// depthFunc &lt;func&gt;</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;depthfunc&quot;</span>))</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parameter for &#39;depthfunc&#39; keyword in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;lequal&quot;</span>))</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            {</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                depthFuncBits = 0;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            }</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;equal&quot;</span>))</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            {</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                depthFuncBits = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609aae250dd615a1365a9675e90fda3ab72d">GLS_DEPTHFUNC_EQUAL</a>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            }</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: unknown depthfunc &#39;%s&#39; in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            }</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="comment">// detail</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;detail&quot;</span>))</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        {</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            stage-&gt;<a class="code" href="structshaderStage__t.html#a9795b546d2a820b7719be15e865e3de6">isDetail</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="comment">// fog</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;fog&quot;</span>))</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        {</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parm for fog in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;on&quot;</span>))</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            {</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a6f0524ad408f34a024a3faefce6c1461">isFogged</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;            }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a6f0524ad408f34a024a3faefce6c1461">isFogged</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            }</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        }</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="comment">// blendfunc &lt;srcFactor&gt; &lt;dstFactor&gt;</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="comment">// or blendfunc &lt;add|filter|blend&gt;</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;blendfunc&quot;</span>))</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parm for blendFunc in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            }</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <span class="comment">// check for &quot;simple&quot; blends first</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;add&quot;</span>))</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                blendSrcBits = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac">GLS_SRCBLEND_ONE</a>;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                blendDstBits = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a3bb089e7ee899da0b4e9b4b17d716377">GLS_DSTBLEND_ONE</a>;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;filter&quot;</span>))</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            {</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                blendSrcBits = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a>;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                blendDstBits = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            }</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;blend&quot;</span>))</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            {</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                blendSrcBits = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a4629e9392a6fa30b3b8dfca9b7d7fb2d">GLS_SRCBLEND_SRC_ALPHA</a>;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                blendDstBits = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a50de0d49082484f366759a62c2f8e7a7">GLS_DSTBLEND_ONE_MINUS_SRC_ALPHA</a>;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            {</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                <span class="comment">// complex double blends</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                blendSrcBits = <a class="code" href="tr__shader_8c.html#a7512bdf9534576c088a761f8481576de">NameToSrcBlendMode</a>(token);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                    <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parm for blendFunc in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                }</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                blendDstBits = <a class="code" href="tr__shader_8c.html#abf5cd8dab72ecbe56610f71712fa4b35">NameToDstBlendMode</a>(token);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            <span class="comment">// clear depth mask for blended surfaces</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            <span class="keywordflow">if</span> (!depthMaskExplicit)</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            {</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                depthMaskBits = 0;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            }</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        }</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <span class="comment">// rgbGen</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;rgbGen&quot;</span>))</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        {</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parameters for rgbGen in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            }</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;wave&quot;</span>))</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            {</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                <a class="code" href="tr__shader_8c.html#a84ada04fc0a9f70bb02a7b23fc14c18d">ParseWaveForm</a>(text, &amp;stage-&gt;<a class="code" href="structshaderStage__t.html#a87be6cca01f47bbc8d1f228150fd058a">rgbWave</a>);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfab22bdc334d6355c003a10be8ed27b99b">CGEN_WAVEFORM</a>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;const&quot;</span>))</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            {</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                <a class="code" href="q__math_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> color = { 0, 0, 0 };</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                <a class="code" href="tr__shader_8c.html#adc7392b4ee0ab13892fd3f48e5b438a2">ParseVector</a>(text, 3, color);</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#ab1ae2b28116f634b45ab312b659149ae">constantColor</a>[0] = (<a class="code" href="q__shared_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>)(255 * color[0]);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#ab1ae2b28116f634b45ab312b659149ae">constantColor</a>[1] = (<a class="code" href="q__shared_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>)(255 * color[1]);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#ab1ae2b28116f634b45ab312b659149ae">constantColor</a>[2] = (<a class="code" href="q__shared_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>)(255 * color[2]);</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa1fbea70c7c55f64be26dc0a4629c366c">CGEN_CONST</a>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;identity&quot;</span>))</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            {</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa3fd04125fe0240035c5da6bc2e31d310">CGEN_IDENTITY</a>;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;identityLighting&quot;</span>))</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa95148bf4c94b7a559f8f6b9ba4e386bb">CGEN_IDENTITY_LIGHTING</a>;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;entity&quot;</span>))</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa8329b119cb9e51a0ed076b7f8913930c">CGEN_ENTITY</a>;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;oneMinusEntity&quot;</span>))</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            {</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa958f68d1ba9f16898759973f89f30c2a">CGEN_ONE_MINUS_ENTITY</a>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            }</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;vertex&quot;</span>))</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            {</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfaad756db890aeaf2d33fa4d5bd0be5adc">CGEN_VERTEX</a>;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                <span class="keywordflow">if</span> (stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> == 0)</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                {</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a8dee63d4ca8b923575e7d1080e0ab778">AGEN_VERTEX</a>;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                }</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            }</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;exactVertex&quot;</span>))</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            {</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa17132f4772be73d5a222521c450ba8ed">CGEN_EXACT_VERTEX</a>;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;lightingDiffuse&quot;</span>))</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            {</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa4981c8d38c68fc7cc7c570f175864b06">CGEN_LIGHTING_DIFFUSE</a>;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            }</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;oneMinusVertex&quot;</span>))</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa6923a32c80a34025ef0acd86f4db4295">CGEN_ONE_MINUS_VERTEX</a>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            }</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            {</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: unknown rgbGen parameter &#39;%s&#39; in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            }</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        }</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        <span class="comment">// alphaGen</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;alphaGen&quot;</span>))</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            {</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing parameters for alphaGen in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;wave&quot;</span>))</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                <a class="code" href="tr__shader_8c.html#a84ada04fc0a9f70bb02a7b23fc14c18d">ParseWaveForm</a>(text, &amp;stage-&gt;<a class="code" href="structshaderStage__t.html#abfcc6c20804eac7f12aac7f115e264a9">alphaWave</a>);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a21420715f26ce730a43a9b391789bb24">AGEN_WAVEFORM</a>;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;const&quot;</span>))</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            {</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                token                   = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#ab1ae2b28116f634b45ab312b659149ae">constantColor</a>[3] = (<a class="code" href="q__shared_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>)(255 * atof(token));</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a>         = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427ae319229e08f6cb95dc5fe30bd9587d77">AGEN_CONST</a>;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            }</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;identity&quot;</span>))</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;            {</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427acf0d6ef5c91891a62f9b17b00121c741">AGEN_IDENTITY</a>;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            }</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;entity&quot;</span>))</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427aff007a7d40564427b61afabb9ed95ade">AGEN_ENTITY</a>;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;            }</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;oneMinusEntity&quot;</span>))</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            {</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a402dde0c30f1e748c0ff12a8e6bde2b0">AGEN_ONE_MINUS_ENTITY</a>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;            }</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;normalzfade&quot;</span>))</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            {</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a960b6c5a48c659259ae6a6142075ee69">AGEN_NORMALZFADE</a>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                token           = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                <span class="keywordflow">if</span> (token[0])</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#ab1ae2b28116f634b45ab312b659149ae">constantColor</a>[3] = (<a class="code" href="q__shared_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>)(255 * atof(token));</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                }</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                {</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#ab1ae2b28116f634b45ab312b659149ae">constantColor</a>[3] = 255;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                }</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                <span class="keywordflow">if</span> (token[0])</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                {</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#ae483271e14d28544d1c13028c596b00b">zFadeBounds</a>[0] = atof(token);      <span class="comment">// lower range</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                    token                 = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#ae483271e14d28544d1c13028c596b00b">zFadeBounds</a>[1] = atof(token);      <span class="comment">// upper range</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                {</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#ae483271e14d28544d1c13028c596b00b">zFadeBounds</a>[0] = -1.0;   <span class="comment">// lower range</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                    stage-&gt;<a class="code" href="structshaderStage__t.html#ae483271e14d28544d1c13028c596b00b">zFadeBounds</a>[1] = 1.0;    <span class="comment">// upper range</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                }</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            }</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;vertex&quot;</span>))</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            {</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a8dee63d4ca8b923575e7d1080e0ab778">AGEN_VERTEX</a>;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;lightingSpecular&quot;</span>))</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427abbb21d7bff8c2c1523ac62b264edada1">AGEN_LIGHTING_SPECULAR</a>;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;oneMinusVertex&quot;</span>))</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            {</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427ab2bc8b592ec33612612e2796fe67a053">AGEN_ONE_MINUS_VERTEX</a>;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;portal&quot;</span>))</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a5292f544c911778539f19cedbdacc361">AGEN_PORTAL</a>;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                token           = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                    shader.<a class="code" href="structshader__s.html#a4f5964ea41b9639f7208b75f1ada2c61">portalRange</a> = 256;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                    <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing range parameter for alphaGen portal in shader &#39;%s&#39;, defaulting to 256\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                    shader.<a class="code" href="structshader__s.html#a4f5964ea41b9639f7208b75f1ada2c61">portalRange</a> = atof(token);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            }</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: unknown alphaGen parameter &#39;%s&#39; in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        }</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="comment">// tcGen &lt;function&gt;</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;texgen&quot;</span>) || !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;tcGen&quot;</span>))</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        {</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;            {</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing texgen parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            }</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;environment&quot;</span>))</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            {</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ae9e7dc0e6443b51059d0d07cccd00fcf">tcGen</a> = <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fcaee241cf8d16a2b0e317d4c2a68fe7951">TCGEN_ENVIRONMENT_MAPPED</a>;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            }</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;firerisenv&quot;</span>))</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            {</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ae9e7dc0e6443b51059d0d07cccd00fcf">tcGen</a> = <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fcac49a8cdd365c005d69d96ed52b327305">TCGEN_FIRERISEENV_MAPPED</a>;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            }</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;lightmap&quot;</span>))</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            {</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ae9e7dc0e6443b51059d0d07cccd00fcf">tcGen</a> = <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca08a84aec97b7f5a7410e587ab07bd1a7">TCGEN_LIGHTMAP</a>;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            }</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;texture&quot;</span>) || !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;base&quot;</span>))</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            {</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ae9e7dc0e6443b51059d0d07cccd00fcf">tcGen</a> = <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca37acf280d9b867c360c0ca203e6bdfa2">TCGEN_TEXTURE</a>;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            }</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;vector&quot;</span>))</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            {</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                <a class="code" href="tr__shader_8c.html#adc7392b4ee0ab13892fd3f48e5b438a2">ParseVector</a>(text, 3, stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a2a22ef68d4b1c59202705c84f515424c">tcGenVectors</a>[0]);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                <a class="code" href="tr__shader_8c.html#adc7392b4ee0ab13892fd3f48e5b438a2">ParseVector</a>(text, 3, stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a2a22ef68d4b1c59202705c84f515424c">tcGenVectors</a>[1]);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ae9e7dc0e6443b51059d0d07cccd00fcf">tcGen</a> = <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fcafc6273a90c2ed62b97ff1d58b41393b3">TCGEN_VECTOR</a>;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            }</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;            {</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: unknown texgen parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            }</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        }</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="comment">// tcMod &lt;type&gt; &lt;...&gt;</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;tcMod&quot;</span>))</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        {</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            <span class="keywordtype">char</span> <a class="code" href="cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>[1024] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                {</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                }</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                <a class="code" href="q__shared_8c.html#a73c0af4cb34fd54c9dc8fefdb187f9b8">Q_strcat</a>(buffer, <span class="keyword">sizeof</span>(buffer), token);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                <a class="code" href="q__shared_8c.html#a73c0af4cb34fd54c9dc8fefdb187f9b8">Q_strcat</a>(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;            <a class="code" href="tr__shader_8c.html#a8c3262a58c2c24948bf7a69b4d5692eb">ParseTexMod</a>(buffer, stage);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        }</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="comment">// depthmask</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;depthwrite&quot;</span>))</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        {</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            depthMaskBits     = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a26c7b5847174a854a49f9b7db6dee3e2">GLS_DEPTHMASK_TRUE</a>;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            depthMaskExplicit = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        {</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: unknown parameter &#39;%s&#39; in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        }</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    }</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="comment">// if cgen isn&#39;t explicitly specified, use either identity or identitylighting</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">if</span> (stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> == <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa33880df170ed4cf5f7edf4d7b99279ce">CGEN_BAD</a>)</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="keywordflow">if</span> (blendSrcBits == 0 ||</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            blendSrcBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac">GLS_SRCBLEND_ONE</a> ||</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            blendSrcBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a4629e9392a6fa30b3b8dfca9b7d7fb2d">GLS_SRCBLEND_SRC_ALPHA</a>)</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        {</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa95148bf4c94b7a559f8f6b9ba4e386bb">CGEN_IDENTITY_LIGHTING</a>;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        }</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa3fd04125fe0240035c5da6bc2e31d310">CGEN_IDENTITY</a>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        }</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    }</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="comment">// if shader stage references a lightmap, but no lightmap is present</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="comment">// (vertex-approximated surfaces), then set cgen to vertex</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">if</span> (stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#aff49fd5f8043dfa9f1f3d7ac3fc44330">isLightmap</a> &amp;&amp; shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> &lt; 0 &amp;&amp;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        stage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] == <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a26544a65eb3a77514c16db1f7a7ef36a">whiteImage</a>)</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    {</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa17132f4772be73d5a222521c450ba8ed">CGEN_EXACT_VERTEX</a>;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    }</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="comment">// implicitly assume that a GL_ONE GL_ZERO blend mask disables blending</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="keywordflow">if</span> ((blendSrcBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac">GLS_SRCBLEND_ONE</a>) &amp;&amp;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        (blendDstBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a>))</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        blendDstBits  = blendSrcBits = 0;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        depthMaskBits = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a26c7b5847174a854a49f9b7db6dee3e2">GLS_DEPTHMASK_TRUE</a>;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="comment">// decide which agens we can skip</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span> (stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> == <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427acf0d6ef5c91891a62f9b17b00121c741">AGEN_IDENTITY</a>)</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <span class="keywordflow">if</span> (stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> == <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa3fd04125fe0240035c5da6bc2e31d310">CGEN_IDENTITY</a></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            || stage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> == <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa4981c8d38c68fc7cc7c570f175864b06">CGEN_LIGHTING_DIFFUSE</a>)</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;            stage-&gt;<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a3960eb96d46757dd6bec1c9b1c061e2b">AGEN_SKIP</a>;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    }</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="comment">// compute state bits</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    stage-&gt;<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a> = depthMaskBits |</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                       blendSrcBits | blendDstBits |</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                       atestBits |</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                       depthFuncBits;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;}</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01274"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a43c60bae100a5c008106719eddfa0550"> 1274</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a43c60bae100a5c008106719eddfa0550">ParseDeform</a>(<span class="keywordtype">char</span> **<a class="code" href="g__character_8c.html#af121d1294678e63f1fe71694880ef3ed">text</a>)</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;{</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="keywordtype">char</span>          *token;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <a class="code" href="structdeformStage__t.html">deformStage_t</a> *ds;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    {</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing deform parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    }</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#ad7e072249689528b97c784b3ab0ae887">numDeforms</a> == <a class="code" href="tr__local_8h.html#a3c96cb9c539af8c32fe85615c97e6c71">MAX_SHADER_DEFORMS</a>)</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: MAX_SHADER_DEFORMS in &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    ds = &amp;shader.<a class="code" href="structshader__s.html#aa725e7da5f6f09ebd32d43a8475e7342">deforms</a>[shader.<a class="code" href="structshader__s.html#ad7e072249689528b97c784b3ab0ae887">numDeforms</a>];</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    shader.<a class="code" href="structshader__s.html#ad7e072249689528b97c784b3ab0ae887">numDeforms</a>++;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;projectionShadow&quot;</span>))</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#a12fffe1a6e9d135d36bd65a733bc0103">deformation</a> = <a class="code" href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fadf8853f6dd7033924173eaba647717e3">DEFORM_PROJECTION_SHADOW</a>;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;autosprite&quot;</span>))</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    {</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#a12fffe1a6e9d135d36bd65a733bc0103">deformation</a> = <a class="code" href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fabfcb83abade6412bb89ff6dcd88d6bdb">DEFORM_AUTOSPRITE</a>;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    }</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;autosprite2&quot;</span>))</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    {</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#a12fffe1a6e9d135d36bd65a733bc0103">deformation</a> = <a class="code" href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777faf1b4ef7618d53a4bdec67ed1b6b81751">DEFORM_AUTOSPRITE2</a>;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    }</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="q__shared_8c.html#ae1c8da83fdf8cbec90cd9333694f7ac7">Q_stricmpn</a>(token, <span class="stringliteral">&quot;text&quot;</span>, 4))</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    {</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="keywordtype">int</span> n;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        n = token[4] - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <span class="keywordflow">if</span> (n &lt; 0 || n &gt; 7)</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        {</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            n = 0;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        }</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#a12fffe1a6e9d135d36bd65a733bc0103">deformation</a> = <a class="code" href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fa4ad8c04439b23c4373ab322d0d7e8752">DEFORM_TEXT0</a> + n;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    }</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;bulge&quot;</span>))</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    {</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        {</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing deformVertexes bulge parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        }</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#a4e2206faabd988de0a7c4c367d523898">bulgeWidth</a> = atof(token);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        {</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing deformVertexes bulge parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        }</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#a54416a9c7464a7b9b1bf74670103cec3">bulgeHeight</a> = atof(token);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        {</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing deformVertexes bulge parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#a0ce924036e2cdc850b0b2147704f0cef">bulgeSpeed</a> = atof(token);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#a12fffe1a6e9d135d36bd65a733bc0103">deformation</a> = <a class="code" href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fabd2aeabc8bca6aec29152ac069925f4b">DEFORM_BULGE</a>;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    }</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;wave&quot;</span>))</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    {</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing deformVertexes parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        }</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <span class="keywordflow">if</span> (atof(token) != 0.)</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            ds-&gt;<a class="code" href="structdeformStage__t.html#a09f1a203f21edc204ac595709913bc1a">deformationSpread</a> = 1.0 / atof(token);</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        }</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        {</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            ds-&gt;<a class="code" href="structdeformStage__t.html#a09f1a203f21edc204ac595709913bc1a">deformationSpread</a> = 100.0;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: illegal div value of 0 in deformVertexes command for shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        }</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        <a class="code" href="tr__shader_8c.html#a84ada04fc0a9f70bb02a7b23fc14c18d">ParseWaveForm</a>(text, &amp;ds-&gt;<a class="code" href="structdeformStage__t.html#af895f34ca8dd977b48199c90714229b5">deformationWave</a>);</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#a12fffe1a6e9d135d36bd65a733bc0103">deformation</a> = <a class="code" href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fac90c56e0c78ee02c2bde31ab0ba69f8d">DEFORM_WAVE</a>;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    }</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;normal&quot;</span>))</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    {</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing deformVertexes parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        }</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#af895f34ca8dd977b48199c90714229b5">deformationWave</a>.<a class="code" href="structwaveForm__t.html#aeca9a857ddf03960fbc695b9fd9d11ba">amplitude</a> = atof(token);</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        {</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing deformVertexes parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        }</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#af895f34ca8dd977b48199c90714229b5">deformationWave</a>.<a class="code" href="structwaveForm__t.html#a017b3794be20870e17ac630b0a5b82fa">frequency</a> = atof(token);</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#a12fffe1a6e9d135d36bd65a733bc0103">deformation</a> = <a class="code" href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fa6642036ed904402f492f6d4561263a2e">DEFORM_NORMALS</a>;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    }</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;move&quot;</span>))</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    {</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        <span class="keywordflow">for</span> (i = 0 ; i &lt; 3 ; i++)</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        {</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;            <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;            {</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing deformVertexes parm in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;            }</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;            ds-&gt;<a class="code" href="structdeformStage__t.html#ae086aeb311fe5724f77c5c12571fca4a">moveVector</a>[i] = atof(token);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        }</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <a class="code" href="tr__shader_8c.html#a84ada04fc0a9f70bb02a7b23fc14c18d">ParseWaveForm</a>(text, &amp;ds-&gt;<a class="code" href="structdeformStage__t.html#af895f34ca8dd977b48199c90714229b5">deformationWave</a>);</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        ds-&gt;<a class="code" href="structdeformStage__t.html#a12fffe1a6e9d135d36bd65a733bc0103">deformation</a> = <a class="code" href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fac57b6898fb8b90c4c652648f60b391b7">DEFORM_MOVE</a>;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    }</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: unknown deformVertexes subtype &#39;%s&#39; found in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;}</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01431"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#aedadca85b6178230c07eb8256de8ab06"> 1431</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#aedadca85b6178230c07eb8256de8ab06">ParseSkyParms</a>(<span class="keywordtype">char</span> **<a class="code" href="g__character_8c.html#af121d1294678e63f1fe71694880ef3ed">text</a>)</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;{</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordtype">char</span>        *token;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> *suf[6] = { <span class="stringliteral">&quot;rt&quot;</span>, <span class="stringliteral">&quot;bk&quot;</span>, <span class="stringliteral">&quot;lf&quot;</span>, <span class="stringliteral">&quot;ft&quot;</span>, <span class="stringliteral">&quot;up&quot;</span>, <span class="stringliteral">&quot;dn&quot;</span> };</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordtype">char</span>        pathname[<a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordtype">int</span>         i;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="comment">// outerbox</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: &#39;skyParms&#39; missing parameter in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    }</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="keywordflow">if</span> (strcmp(token, <span class="stringliteral">&quot;-&quot;</span>))</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    {</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <span class="keywordflow">for</span> (i = 0 ; i &lt; 6 ; i++)</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        {</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            <a class="code" href="q__shared_8c.html#aad4e641649a5bcf8bb21fbe7a815ee98">Com_sprintf</a>(pathname, <span class="keyword">sizeof</span>(pathname), <span class="stringliteral">&quot;%s_%s.tga&quot;</span>, token, suf[i]);</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;            shader.<a class="code" href="structshader__s.html#a6adee68014b0cbf42cf0a12844b28a4c">sky</a>.<a class="code" href="structskyParms__t.html#a1dca088c7ffbaceccd713b07a88120e3">outerbox</a>[i] = <a class="code" href="tr__image_8c.html#a8aa4c79f547ccb517411a9cd3e76d990">R_FindImageFile</a>(( <span class="keywordtype">char</span> * ) pathname, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, GL_CLAMP_TO_EDGE, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <span class="keywordflow">if</span> (!shader.<a class="code" href="structshader__s.html#a6adee68014b0cbf42cf0a12844b28a4c">sky</a>.<a class="code" href="structskyParms__t.html#a1dca088c7ffbaceccd713b07a88120e3">outerbox</a>[i])</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            {</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: could not find image &#39;%s&#39; for outer skybox in shader &#39;%s&#39;\n&quot;</span>, pathname, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                shader.<a class="code" href="structshader__s.html#a6adee68014b0cbf42cf0a12844b28a4c">sky</a>.<a class="code" href="structskyParms__t.html#a1dca088c7ffbaceccd713b07a88120e3">outerbox</a>[i] = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aea5a21d8f3283636bc595f3f6ee9f7e4">defaultImage</a>;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;            }</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        }</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    }</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="comment">// cloudheight</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    {</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: &#39;skyParms&#39; missing parameter in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    }</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    shader.<a class="code" href="structshader__s.html#a6adee68014b0cbf42cf0a12844b28a4c">sky</a>.<a class="code" href="structskyParms__t.html#af209a0822d8d93edaf3f9621ee8873cb">cloudHeight</a> = atof(token);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a6adee68014b0cbf42cf0a12844b28a4c">sky</a>.<a class="code" href="structskyParms__t.html#af209a0822d8d93edaf3f9621ee8873cb">cloudHeight</a> == 0.f)</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    {</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        shader.<a class="code" href="structshader__s.html#a6adee68014b0cbf42cf0a12844b28a4c">sky</a>.<a class="code" href="structskyParms__t.html#af209a0822d8d93edaf3f9621ee8873cb">cloudHeight</a> = 512;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    }</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <a class="code" href="tr__local_8h.html#aad4572f85081198179141dcda8cfb3d3">R_InitSkyTexCoords</a>(shader.<a class="code" href="structshader__s.html#a6adee68014b0cbf42cf0a12844b28a4c">sky</a>.<a class="code" href="structskyParms__t.html#af209a0822d8d93edaf3f9621ee8873cb">cloudHeight</a>);</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="comment">// innerbox</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    {</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: &#39;skyParms&#39; missing parameter in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    }</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="keywordflow">if</span> (strcmp(token, <span class="stringliteral">&quot;-&quot;</span>))</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    {</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <span class="keywordflow">for</span> (i = 0 ; i &lt; 6 ; i++)</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        {</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;            <a class="code" href="q__shared_8c.html#aad4e641649a5bcf8bb21fbe7a815ee98">Com_sprintf</a>(pathname, <span class="keyword">sizeof</span>(pathname), <span class="stringliteral">&quot;%s_%s.tga&quot;</span>, token, suf[i]);</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;            shader.<a class="code" href="structshader__s.html#a6adee68014b0cbf42cf0a12844b28a4c">sky</a>.<a class="code" href="structskyParms__t.html#aa9db95ef52d85e460612059aae532063">innerbox</a>[i] = <a class="code" href="tr__image_8c.html#a8aa4c79f547ccb517411a9cd3e76d990">R_FindImageFile</a>(( <span class="keywordtype">char</span> * ) pathname, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, GL_REPEAT, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;            <span class="keywordflow">if</span> (!shader.<a class="code" href="structshader__s.html#a6adee68014b0cbf42cf0a12844b28a4c">sky</a>.<a class="code" href="structskyParms__t.html#aa9db95ef52d85e460612059aae532063">innerbox</a>[i])</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;            {</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: could not find image &#39;%s&#39; for inner skybox in shader &#39;%s&#39;\n&quot;</span>, pathname, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                shader.<a class="code" href="structshader__s.html#a6adee68014b0cbf42cf0a12844b28a4c">sky</a>.<a class="code" href="structskyParms__t.html#aa9db95ef52d85e460612059aae532063">innerbox</a>[i] = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aea5a21d8f3283636bc595f3f6ee9f7e4">defaultImage</a>;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;            }</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        }</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    }</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    shader.<a class="code" href="structshader__s.html#a89f20ab7415b09dd1a5b2086a8a66214">isSky</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;}</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div><div class="line"><a name="l01503"></a><span class="lineno"><a class="line" href="tr__shader_8h.html#abe39f2e2dbcb1700a9dc07aecd3e267a"> 1503</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#abe39f2e2dbcb1700a9dc07aecd3e267a">ParseSort</a>(<span class="keywordtype">char</span> **<a class="code" href="g__character_8c.html#af121d1294678e63f1fe71694880ef3ed">text</a>)</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;{</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordtype">char</span> *token;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    {</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing sort parameter in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    }</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;portal&quot;</span>))</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    {</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705afb09f05e459b02e210cfdb8b743338d8">SS_PORTAL</a>;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    }</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;sky&quot;</span>))</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    {</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a9e7ce240847a86e342b266101947163f">SS_ENVIRONMENT</a>;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    }</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;opaque&quot;</span>))</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    {</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a6b2c619db929f7bd5a69e8ef573e60cf">SS_OPAQUE</a>;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    }</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;decal&quot;</span>))</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    {</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a46067896dd2e825dcf507129dd677742">SS_DECAL</a>;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    }</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;seeThrough&quot;</span>))</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    {</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a7beaf01cbe0de9e837686d0038c631a0">SS_SEE_THROUGH</a>;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    }</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;banner&quot;</span>))</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    {</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a0ee7450d35380d9fb472c3f38858a60c">SS_BANNER</a>;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    }</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;additive&quot;</span>))</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    {</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705ac84eb0dbc98c786a7f51f65115bbdc2a">SS_BLEND1</a>;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;nearest&quot;</span>))</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    {</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a7e9bb72c706a524b0b0b6693ebd6dc51">SS_NEAREST</a>;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    }</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;underwater&quot;</span>))</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    {</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a68b7deda2a5b9480c25379edb917a80e">SS_UNDERWATER</a>;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    }</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = atof(token);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    }</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;}</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01564"></a><span class="lineno"><a class="line" href="structinfoParm__t.html"> 1564</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;{</div><div class="line"><a name="l01566"></a><span class="lineno"><a class="line" href="structinfoParm__t.html#af539facd845f45ec6d4490f2bbbf8cc1"> 1566</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structinfoParm__t.html#af539facd845f45ec6d4490f2bbbf8cc1">name</a>;</div><div class="line"><a name="l01567"></a><span class="lineno"><a class="line" href="structinfoParm__t.html#a0eb388d903ecc74809d55c93485c429d"> 1567</a></span>&#160;    <span class="keywordtype">int</span> clearSolid, <a class="code" href="structinfoParm__t.html#a0eb388d903ecc74809d55c93485c429d">surfaceFlags</a>, contents; <span class="comment">// clearSolid is never used</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;} <a class="code" href="structinfoParm__t.html">infoParm_t</a>;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;</div><div class="line"><a name="l01570"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#af2222ec64f2ea595ec29750821b3699c"> 1570</a></span>&#160;<a class="code" href="structinfoParm__t.html">infoParm_t</a> infoParms[] =</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;{</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <span class="comment">// server relevant contents</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    { <span class="stringliteral">&quot;clipmissile&quot;</span>,       1, 0,                 <a class="code" href="surfaceflags_8h.html#ac33a4760c06c622f4fb301efb69b0e82">CONTENTS_MISSILECLIP</a>      }, <span class="comment">// impact only specific weapons (rl, gl)</span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    { <span class="stringliteral">&quot;water&quot;</span>,             1, 0,                 <a class="code" href="surfaceflags_8h.html#ade922e5f0b8f2b02147858c2b6d579cc">CONTENTS_WATER</a>            },</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    { <span class="stringliteral">&quot;slag&quot;</span>,              1, 0,                 <a class="code" href="surfaceflags_8h.html#ac74aa6092339c35717e12dc058040a01">CONTENTS_SLIME</a>            }, <span class="comment">// uses the CONTENTS_SLIME flag, but the shader reference is changed to &#39;slag&#39;</span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="comment">// to idendify that this doesn&#39;t work the same as &#39;slime&#39; did.</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="comment">// (slime hurts instantly, slag doesn&#39;t)</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="comment">//  {&quot;slime&quot;,       1,  0,  CONTENTS_SLIME },       // mildly damaging</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    { <span class="stringliteral">&quot;lava&quot;</span>,              1, 0,                 <a class="code" href="surfaceflags_8h.html#a4822e1693851ba9c47eabd1aea1ffbdd">CONTENTS_LAVA</a>             }, <span class="comment">// very damaging</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    { <span class="stringliteral">&quot;playerclip&quot;</span>,        1, 0,                 <a class="code" href="surfaceflags_8h.html#a4572444230e79b74c27e93ad6bf25214">CONTENTS_PLAYERCLIP</a>       },</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    { <span class="stringliteral">&quot;monsterclip&quot;</span>,       1, 0,                 <a class="code" href="surfaceflags_8h.html#ab5dbbb0f6a60af03e34dc0267ca03d7a">CONTENTS_MONSTERCLIP</a>      },</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    { <span class="stringliteral">&quot;nodrop&quot;</span>,            1, 0,                 <a class="code" href="surfaceflags_8h.html#a45ba7d41e52a4abb372861ae8881776f">CONTENTS_NODROP</a>           }, <span class="comment">// don&#39;t drop items or leave bodies (death fog, lava, etc)</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    { <span class="stringliteral">&quot;nonsolid&quot;</span>,          1, <a class="code" href="surfaceflags_8h.html#a52e60380d3485f9f2b890cacf80de2d1">SURF_NONSOLID</a>,     0                         }, <span class="comment">// clears the solid flag</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="comment">// utility relevant attributes</span></div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    { <span class="stringliteral">&quot;origin&quot;</span>,            1, 0,                 <a class="code" href="surfaceflags_8h.html#a0c4ef3ab7754609984eae7b30c2d1578">CONTENTS_ORIGIN</a>           }, <span class="comment">// center of rotating brushes</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    { <span class="stringliteral">&quot;trans&quot;</span>,             0, 0,                 <a class="code" href="surfaceflags_8h.html#a114cdcf7846c04ea2b4edee9757b1957">CONTENTS_TRANSLUCENT</a>      }, <span class="comment">// don&#39;t eat contained surfaces</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    { <span class="stringliteral">&quot;detail&quot;</span>,            0, 0,                 <a class="code" href="surfaceflags_8h.html#a3a19010267aff07d5716badd2873a6bd">CONTENTS_DETAIL</a>           }, <span class="comment">// don&#39;t include in structural bsp</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    { <span class="stringliteral">&quot;structural&quot;</span>,        0, 0,                 <a class="code" href="surfaceflags_8h.html#a32873db28834ba69f1fd4fb93483f5eb">CONTENTS_STRUCTURAL</a>       }, <span class="comment">// force into structural bsp even if trnas</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    { <span class="stringliteral">&quot;areaportal&quot;</span>,        1, 0,                 <a class="code" href="surfaceflags_8h.html#a6b878d7610fed38320b4f93b293a85f0">CONTENTS_AREAPORTAL</a>       }, <span class="comment">// divides areas</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    { <span class="stringliteral">&quot;clusterportal&quot;</span>,     1, 0,                 <a class="code" href="surfaceflags_8h.html#a937c6bfae7609c6d522fd5f57995e9a5">CONTENTS_CLUSTERPORTAL</a>    }, <span class="comment">// for bots</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    { <span class="stringliteral">&quot;donotenter&quot;</span>,        1, 0,                 <a class="code" href="surfaceflags_8h.html#a66e256e4677883a900739976424d1fab">CONTENTS_DONOTENTER</a>       }, <span class="comment">// for bots</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="comment">// Rafael - nopass</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    { <span class="stringliteral">&quot;donotenterlarge&quot;</span>,   1, 0,                 <a class="code" href="surfaceflags_8h.html#a5cd518a3d5766935187ce8bcaca4c4c7">CONTENTS_DONOTENTER_LARGE</a> }, <span class="comment">// for larger bots</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    { <span class="stringliteral">&quot;fog&quot;</span>,               1, 0,                 <a class="code" href="surfaceflags_8h.html#a05c596817b2aba376b069f8ebbef075d">CONTENTS_FOG</a>              }, <span class="comment">// carves surfaces entering</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    { <span class="stringliteral">&quot;sky&quot;</span>,               0, <a class="code" href="surfaceflags_8h.html#ae4cc02d091eaf4c2d8d84ae8f09c0d37">SURF_SKY</a>,          0                         }, <span class="comment">// emit light from an environment map</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    { <span class="stringliteral">&quot;lightfilter&quot;</span>,       0, <a class="code" href="surfaceflags_8h.html#a79ea1ddeee25186025192b19c0da3784">SURF_LIGHTFILTER</a>,  0                         }, <span class="comment">// filter light going through it</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    { <span class="stringliteral">&quot;alphashadow&quot;</span>,       0, <a class="code" href="surfaceflags_8h.html#a56da113b4303e6a048b5079e0d54b2c1">SURF_ALPHASHADOW</a>,  0                         }, <span class="comment">// test light on a per-pixel basis</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    { <span class="stringliteral">&quot;hint&quot;</span>,              0, <a class="code" href="surfaceflags_8h.html#abb78544f8f85bde2bc66161df474b515">SURF_HINT</a>,         0                         }, <span class="comment">// use as a primary splitter</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="comment">// server attributes</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    { <span class="stringliteral">&quot;slick&quot;</span>,             0, <a class="code" href="surfaceflags_8h.html#ac1437c4ffc959deb4c6d0ce6a0a2d290">SURF_SLICK</a>,        0                         },</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    { <span class="stringliteral">&quot;noimpact&quot;</span>,          0, <a class="code" href="surfaceflags_8h.html#af966799e3c68d3961682f6065aef3c23">SURF_NOIMPACT</a>,     0                         }, <span class="comment">// don&#39;t make impact explosions or marks</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    { <span class="stringliteral">&quot;nomarks&quot;</span>,           0, <a class="code" href="surfaceflags_8h.html#a7c79427673ae15d4559f782d9043c151">SURF_NOMARKS</a>,      0                         }, <span class="comment">// don&#39;t make impact marks, but still explode</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    { <span class="stringliteral">&quot;ladder&quot;</span>,            0, <a class="code" href="surfaceflags_8h.html#a918208b8c57fc209a89a018a3569670c">SURF_LADDER</a>,       0                         },</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    { <span class="stringliteral">&quot;nodamage&quot;</span>,          0, <a class="code" href="surfaceflags_8h.html#af48c7f470ac558b368fce32c69cda326">SURF_NODAMAGE</a>,     0                         },</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    { <span class="stringliteral">&quot;monsterslick&quot;</span>,      0, <a class="code" href="surfaceflags_8h.html#a3ffa1e379d75c5017c2e1cc9103410ee">SURF_MONSTERSLICK</a>, 0                         }, <span class="comment">// surf only slick for monsters</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    { <span class="stringliteral">&quot;glass&quot;</span>,             0, <a class="code" href="surfaceflags_8h.html#a7abcbf948773c4f96aa32028bb5f2c2e">SURF_GLASS</a>,        0                         },</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    { <span class="stringliteral">&quot;splash&quot;</span>,            0, <a class="code" href="surfaceflags_8h.html#a4ced9b9d7b24178d7586a2954c4165da">SURF_SPLASH</a>,       0                         },</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="comment">// steps</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    { <span class="stringliteral">&quot;metal&quot;</span>,             0, <a class="code" href="surfaceflags_8h.html#a0799b3175236839d31b39d35b3dbea7f">SURF_METAL</a>,        0                         },</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    { <span class="stringliteral">&quot;metalsteps&quot;</span>,        0, <a class="code" href="surfaceflags_8h.html#a0799b3175236839d31b39d35b3dbea7f">SURF_METAL</a>,        0                         }, <span class="comment">// retain bw compatibility with Q3A metal shaders...</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    { <span class="stringliteral">&quot;nosteps&quot;</span>,           0, <a class="code" href="surfaceflags_8h.html#aa68b022a8ec7db46c690740bfadfe144">SURF_NOSTEPS</a>,      0                         },</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    { <span class="stringliteral">&quot;woodsteps&quot;</span>,         0, <a class="code" href="surfaceflags_8h.html#a9803b1fa0f3483fe19f9b19187651897">SURF_WOOD</a>,         0                         },</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    { <span class="stringliteral">&quot;grasssteps&quot;</span>,        0, <a class="code" href="surfaceflags_8h.html#ababde956009eb0c4579a65efbcce7aa9">SURF_GRASS</a>,        0                         },</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    { <span class="stringliteral">&quot;gravelsteps&quot;</span>,       0, <a class="code" href="surfaceflags_8h.html#a86117fc10577714d3517bbbcfb298d91">SURF_GRAVEL</a>,       0                         },</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    { <span class="stringliteral">&quot;carpetsteps&quot;</span>,       0, <a class="code" href="surfaceflags_8h.html#a443d5ef97ca0824f70122f89816a3504">SURF_CARPET</a>,       0                         },</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    { <span class="stringliteral">&quot;snowsteps&quot;</span>,         0, <a class="code" href="surfaceflags_8h.html#a1e8b198246ea6db430fd0badd5a493d8">SURF_SNOW</a>,         0                         },</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    { <span class="stringliteral">&quot;roofsteps&quot;</span>,         0, <a class="code" href="surfaceflags_8h.html#a8066da7a1ca1c50883b120891dbaf46c">SURF_ROOF</a>,         0                         }, <span class="comment">// tile roof</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    { <span class="stringliteral">&quot;rubble&quot;</span>,            0, <a class="code" href="surfaceflags_8h.html#aa4a91f2f95ce09afeedfd06a5d26a26f">SURF_RUBBLE</a>,       0                         },</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="comment">// drawsurf attributes</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    { <span class="stringliteral">&quot;nodraw&quot;</span>,            0, <a class="code" href="surfaceflags_8h.html#a86398796518636f583163963ab0f8665">SURF_NODRAW</a>,       0                         }, <span class="comment">// don&#39;t generate a drawsurface (or a lightmap)</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    { <span class="stringliteral">&quot;pointlight&quot;</span>,        0, <a class="code" href="surfaceflags_8h.html#a9fd1e231d87f2ae4acb7a9b054298c84">SURF_POINTLIGHT</a>,   0                         }, <span class="comment">// sample lighting at vertexes</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    { <span class="stringliteral">&quot;nolightmap&quot;</span>,        0, <a class="code" href="surfaceflags_8h.html#a323f5d594601326f248610fd696b1809">SURF_NOLIGHTMAP</a>,   0                         }, <span class="comment">// don&#39;t generate a lightmap</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    { <span class="stringliteral">&quot;nodlight&quot;</span>,          0, <a class="code" href="surfaceflags_8h.html#aa82fc76e26f4b92b2d357a9cdd43340f">SURF_NODLIGHT</a>,     0                         }, <span class="comment">// don&#39;t ever add dynamic lights</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="comment">// these surface parms are unused in ETL but kept for mods</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    { <span class="stringliteral">&quot;monsterslicknorth&quot;</span>, 0, <a class="code" href="surfaceflags_8h.html#a77a982859fb79acc83fa94c15f95effc">SURF_MONSLICK_N</a>,   0                         },</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    { <span class="stringliteral">&quot;monsterslickeast&quot;</span>,  0, <a class="code" href="surfaceflags_8h.html#a3cf937c1f3c66b599f4d1fe7b057fd4a">SURF_MONSLICK_E</a>,   0                         },</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    { <span class="stringliteral">&quot;monsterslicksouth&quot;</span>, 0, <a class="code" href="surfaceflags_8h.html#a8361bc3c8fbe6931f71ebabd5db00f1f">SURF_MONSLICK_S</a>,   0                         },</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    { <span class="stringliteral">&quot;monsterslickwest&quot;</span>,  0, <a class="code" href="surfaceflags_8h.html#ace710854b6af1d508eb1abbad122fc07">SURF_MONSLICK_W</a>,   0                         }</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;};</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;</div><div class="line"><a name="l01649"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#aecd2c8bd1cd9af69a1d4af74904b0d72"> 1649</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#aecd2c8bd1cd9af69a1d4af74904b0d72">ParseSurfaceParm</a>(<span class="keywordtype">char</span> **<a class="code" href="g__character_8c.html#af121d1294678e63f1fe71694880ef3ed">text</a>)</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;{</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="keywordtype">char</span>     *token;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="keywordtype">int</span>      numInfoParms = <a class="code" href="q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a>(infoParms); <span class="comment">// sizeof(infoParms) / sizeof(infoParms[0]);</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="keywordtype">int</span>      i;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> unknownParm = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keywordflow">for</span> (i = 0 ; i &lt; numInfoParms ; i++)</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    {</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, infoParms[i].name))</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        {</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;            <a class="code" href="tr__common_8h.html#a4ace57eb682bd3e6ac5fc82ae2e9bd3e">Ren_Developer</a>(<span class="stringliteral">&quot;ParseSurfaceParm - adding &#39;%s&#39; surface parm properties to shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            shader.<a class="code" href="structshader__s.html#a7ccf1d2c045bcdd673e6a161f89b212d">surfaceFlags</a> |= infoParms[i].<a class="code" href="structinfoParm__t.html#a0eb388d903ecc74809d55c93485c429d">surfaceFlags</a>;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;            shader.<a class="code" href="structshader__s.html#a55acc662139df10b7d341d32000c9555">contentFlags</a> |= infoParms[i].<a class="code" href="structinfoParm__t.html#ab3da2c6e49f2be898c00d90f50c77a4a">contents</a>;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;            <span class="keywordflow">if</span> (infoParms[i].clearSolid)</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            {</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;                <a class="code" href="snd__main_8c.html#a2f1b425181a9b7c25153a9ffb98ee2bc">si</a>-&gt;contents &amp;= ~<a class="code" href="surfaceflags_8h.html#a9b61ab90973e8137f342425ab3191cbe">CONTENTS_SOLID</a>;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;            }</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            unknownParm = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        }</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    }</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">if</span> (unknownParm == <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>)</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    {</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;landmine&quot;</span>))  <span class="comment">// ET exception - don&#39;t print warning for landmine</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;        {</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;            <a class="code" href="tr__common_8h.html#a4ace57eb682bd3e6ac5fc82ae2e9bd3e">Ren_Developer</a>(<span class="stringliteral">&quot;WARNING: ParseSurfaceParm - unknown or custom surface parm &#39;%s&#39; in shader &#39;%s&#39; - inspect your shader definitions if this parm is unknown\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        }</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    }</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;}</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;</div><div class="line"><a name="l01692"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a6567fbeacf4d3bc769163e59b44e9681"> 1692</a></span>&#160;<span class="keyword">static</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> <a class="code" href="tr__shader_8c.html#a6567fbeacf4d3bc769163e59b44e9681">ParseShader</a>(<span class="keywordtype">char</span> **<a class="code" href="g__character_8c.html#af121d1294678e63f1fe71694880ef3ed">text</a>)</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;{</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keywordtype">char</span> *token;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <span class="keywordtype">int</span>  s = 0;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a11d547fcf077a6bf5085585d14853d85">allowCompress</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;   <span class="comment">// allow compression by default</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordflow">if</span> (token[0] != <span class="charliteral">&#39;{&#39;</span>)</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    {</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: expecting &#39;{&#39;, found &#39;%s&#39; instead in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    }</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    {</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        {</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: no concluding &#39;}&#39; in shader %s\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        }</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        <span class="comment">// end of shader definition</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        <span class="keywordflow">if</span> (token[0] == <span class="charliteral">&#39;}&#39;</span>)</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        {</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a11d547fcf077a6bf5085585d14853d85">allowCompress</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;   <span class="comment">// allow compression by default</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        }</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <span class="comment">// stage definition</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token[0] == <span class="charliteral">&#39;{&#39;</span>)</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        {</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;            <span class="keywordflow">if</span> (s &gt;= <a class="code" href="tr__local_8h.html#a8f9f17869dd24d22985f328decc076a8">MAX_SHADER_STAGES</a>)</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;            {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: too many stages in shader %s (max is %i)\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>, <a class="code" href="tr__local_8h.html#a8f9f17869dd24d22985f328decc076a8">MAX_SHADER_STAGES</a>);</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            }</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="tr__shader_8c.html#ae89be5e21e9930869d33166c3b68f6c4">ParseStage</a>(&amp;stages[s], text))</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;            {</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;            }</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;            stages[s].<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;            s++;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        }</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        <span class="comment">// skip stuff that only the QuakeEdRadient needs</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="q__shared_8c.html#ae1c8da83fdf8cbec90cd9333694f7ac7">Q_stricmpn</a>(token, <span class="stringliteral">&quot;qer&quot;</span>, 3))</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        {</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;            <a class="code" href="q__shared_8c.html#a5de5d3e70183fa4bbb77e5dee2d3d67f">SkipRestOfLine</a>(text);</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;        }</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        <span class="comment">// sun parms</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;q3map_sun&quot;</span>) || !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;q3map_sunExt&quot;</span>))</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        {</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;            <span class="keywordtype">float</span> <a class="code" href="snd__wavelet_8c.html#a09ebd310e71d5c5075c8631ceee3033d">a</a>, b;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;            token          = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a8cd3bc7116153fa4ee671680b109f0a9">sunLight</a>[0] = atof(token);</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            token          = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a8cd3bc7116153fa4ee671680b109f0a9">sunLight</a>[1] = atof(token);</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            token          = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a8cd3bc7116153fa4ee671680b109f0a9">sunLight</a>[2] = atof(token);</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            <a class="code" href="q__math_8h.html#ae6198604d913a625f13d811900b9da50">VectorNormalize</a>(<a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a8cd3bc7116153fa4ee671680b109f0a9">sunLight</a>);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            a     = atof(token);</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            <a class="code" href="q__math_8h.html#ab1b83ce270d198f890a2190c1ffe76d8">VectorScale</a>(<a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a8cd3bc7116153fa4ee671680b109f0a9">sunLight</a>, a, <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a8cd3bc7116153fa4ee671680b109f0a9">sunLight</a>);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            a     = atof(token);</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            a     = a / 180 * M_PI;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            b     = atof(token);</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;            b     = b / 180 * M_PI;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ae4f91976372aab4203f2849fdbcc0e7d">sunDirection</a>[0] = cos(a) * cos(b);</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ae4f91976372aab4203f2849fdbcc0e7d">sunDirection</a>[1] = sin(a) * cos(b);</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ae4f91976372aab4203f2849fdbcc0e7d">sunDirection</a>[2] = sin(b);</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;            <a class="code" href="q__shared_8c.html#a5de5d3e70183fa4bbb77e5dee2d3d67f">SkipRestOfLine</a>(text); <span class="comment">// skip q3map_sunExt additional parms</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        }</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;deformVertexes&quot;</span>))</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        {</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            <a class="code" href="tr__shader_8c.html#a43c60bae100a5c008106719eddfa0550">ParseDeform</a>(text);</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        }</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;tesssize&quot;</span>))</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        {</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;            <a class="code" href="q__shared_8c.html#a5de5d3e70183fa4bbb77e5dee2d3d67f">SkipRestOfLine</a>(text);</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        }</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;clampTime&quot;</span>))</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        {</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            <span class="keywordflow">if</span> (token[0])</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;            {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                shader.<a class="code" href="structshader__s.html#ab0438ecf32c7ae598e6289354e20385c">clampTime</a> = atof(token);</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            }</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        }</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        <span class="comment">// skip stuff that only the q3map needs</span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="q__shared_8c.html#ae1c8da83fdf8cbec90cd9333694f7ac7">Q_stricmpn</a>(token, <span class="stringliteral">&quot;q3map&quot;</span>, 5))</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        {</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            <a class="code" href="q__shared_8c.html#a5de5d3e70183fa4bbb77e5dee2d3d67f">SkipRestOfLine</a>(text);</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        }</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        <span class="comment">// skip stuff that only q3map or the server needs</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;surfaceParm&quot;</span>))</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        {</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;            <a class="code" href="tr__shader_8c.html#aecd2c8bd1cd9af69a1d4af74904b0d72">ParseSurfaceParm</a>(text);</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        }</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        <span class="comment">// no mip maps</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;nomipmaps&quot;</span>)) || (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;nomipmap&quot;</span>)))</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        {</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            shader.<a class="code" href="structshader__s.html#aaedbf92720608037ecec267bc6ae8a30">noMipMaps</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;            shader.<a class="code" href="structshader__s.html#a8d3a2544c772c37f23d29cc2b07de54d">noPicMip</a>  = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        }</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        <span class="comment">// no picmip adjustment</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;nopicmip&quot;</span>))</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        {</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;            shader.<a class="code" href="structshader__s.html#a8d3a2544c772c37f23d29cc2b07de54d">noPicMip</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        }</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        <span class="comment">// polygonOffset</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;polygonOffset&quot;</span>))</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        {</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            shader.<a class="code" href="structshader__s.html#aa40dd5dbff2a337571afae3a3459a19f">polygonOffset</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        }</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <span class="comment">// entityMergable, allowing sprite surfaces from multiple entities</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <span class="comment">// to be merged into one batch.  This is a savings for smoke</span></div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="comment">// puffs and blood, but can&#39;t be used for anything where the</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        <span class="comment">// shader calcs (not the surface function) reference the entity color or scroll</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;entityMergable&quot;</span>))</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        {</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            shader.<a class="code" href="structshader__s.html#a760873e6830362e6d13f7e963d1a9a75">entityMergable</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        }</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        <span class="comment">// fogParms</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;fogParms&quot;</span>))</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        {</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="tr__shader_8c.html#adc7392b4ee0ab13892fd3f48e5b438a2">ParseVector</a>(text, 3, shader.<a class="code" href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">fogParms</a>.<a class="code" href="structfogParms__t.html#a48790f698fb2ca8273452c1b8f5b18c3">color</a>))</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            {</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;            }</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            shader.<a class="code" href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">fogParms</a>.<a class="code" href="structfogParms__t.html#ad2338bdb116d319a884c6349eb99fd89">colorInt</a> = <a class="code" href="q__math_8c.html#a80a7100dd04cc45b8d0413f3f2f2f96e">ColorBytes4</a>(shader.<a class="code" href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">fogParms</a>.<a class="code" href="structfogParms__t.html#a48790f698fb2ca8273452c1b8f5b18c3">color</a>[0] * <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a24c849f0892f437bc7bd872be87ac501">identityLight</a>,</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                                                   shader.<a class="code" href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">fogParms</a>.<a class="code" href="structfogParms__t.html#a48790f698fb2ca8273452c1b8f5b18c3">color</a>[1] * <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a24c849f0892f437bc7bd872be87ac501">identityLight</a>,</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                                                   shader.<a class="code" href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">fogParms</a>.<a class="code" href="structfogParms__t.html#a48790f698fb2ca8273452c1b8f5b18c3">color</a>[2] * <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a24c849f0892f437bc7bd872be87ac501">identityLight</a>, 1.0);</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;            {</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: &#39;fogParms&#39; incomplete - missing opacity value in shader &#39;%s&#39; set to 1\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>); <span class="comment">// tcScale is 1.0f</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                shader.<a class="code" href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">fogParms</a>.<a class="code" href="structfogParms__t.html#a5b229bb84063c51fec206d2291cf3527">depthForOpaque</a> = 1;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            }</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;            {</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                shader.<a class="code" href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">fogParms</a>.<a class="code" href="structfogParms__t.html#a5b229bb84063c51fec206d2291cf3527">depthForOpaque</a> = atof(token);</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                shader.<a class="code" href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">fogParms</a>.<a class="code" href="structfogParms__t.html#a5b229bb84063c51fec206d2291cf3527">depthForOpaque</a> = shader.<a class="code" href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">fogParms</a>.<a class="code" href="structfogParms__t.html#a5b229bb84063c51fec206d2291cf3527">depthForOpaque</a> &lt; 1 ? 1 : shader.<a class="code" href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">fogParms</a>.<a class="code" href="structfogParms__t.html#a5b229bb84063c51fec206d2291cf3527">depthForOpaque</a>;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;            }</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;            shader.<a class="code" href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">fogParms</a>.<a class="code" href="structfogParms__t.html#acfe1477fb2ed9891745980ae7af86135">tcScale</a> = 1.0f / shader.<a class="code" href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">fogParms</a>.<a class="code" href="structfogParms__t.html#a5b229bb84063c51fec206d2291cf3527">depthForOpaque</a>;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            </div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;            <span class="comment">// skip any old gradient directions</span></div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;            <a class="code" href="q__shared_8c.html#a5de5d3e70183fa4bbb77e5dee2d3d67f">SkipRestOfLine</a>(text);</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;        }</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        <span class="comment">// portal</span></div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;portal&quot;</span>))</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        {</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705afb09f05e459b02e210cfdb8b743338d8">SS_PORTAL</a>;</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        }</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        <span class="comment">// skyparms &lt;cloudheight&gt; &lt;outerbox&gt; &lt;innerbox&gt;</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;skyparms&quot;</span>))</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        {</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;            <a class="code" href="tr__shader_8c.html#aedadca85b6178230c07eb8256de8ab06">ParseSkyParms</a>(text);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        }</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        <span class="comment">// This is fixed fog for the skybox/clouds determined solely by the shader</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        <span class="comment">// it will not change in a level and will not be necessary</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;        <span class="comment">// to force clients to use a sky fog the server says to.</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="comment">// skyfogvars &lt;(r,g,b)&gt; &lt;dist&gt;</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;skyfogvars&quot;</span>))</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        {</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;            <a class="code" href="q__math_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> fogColor;</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="tr__shader_8c.html#adc7392b4ee0ab13892fd3f48e5b438a2">ParseVector</a>(text, 3, fogColor))</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            {</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;            }</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;            {</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing density value for sky fog\n&quot;</span>);</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;            }</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;            <span class="keywordflow">if</span> (atof(token) &gt; 1)</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;            {</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: last value for skyfogvars is &#39;density&#39; which needs to be 0.0-1.0\n&quot;</span>);</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            }</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;            <a class="code" href="tr__local_8h.html#a326090c62abbe93466e0a4147f789f85">R_SetFog</a>(<a class="code" href="tr__types_8h.html#ad6e514d0c9dd889c0b1b36049c979270aaf0388b7430eb0d0996cd6584394c0e1">FOG_SKY</a>, 0, 5, fogColor[0], fogColor[1], fogColor[2], atof(token));</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        }</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;sunshader&quot;</span>))</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        {</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            <span class="keywordtype">size_t</span> tokenLen;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;            {</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing shader name for &#39;sunshader&#39;\n&quot;</span>);</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;            }</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;            tokenLen         = strlen(token) + 1;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a7f1cf2772d1c621995974d6f15eee3b2">sunShaderName</a> = <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#aeebd8342a3d6978b06c0dcd6dba30b56">Hunk_Alloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * tokenLen, <a class="code" href="q__shared_8h.html#a88839cf8fa6a56d94589791f0db32328acfc60ea7f4012a0fac6bc3ec1cfaf69a">h_low</a>);</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;            <a class="code" href="q__shared_8c.html#a70a2b0d67ad6af400d513cf1136af8dc">Q_strncpyz</a>(<a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a7f1cf2772d1c621995974d6f15eee3b2">sunShaderName</a>, token, tokenLen);</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;        }</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;lightgridmulamb&quot;</span>))       <span class="comment">// ambient multiplier for lightgrid</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        {</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;            {</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing value for &#39;lightgrid ambient multiplier&#39;\n&quot;</span>);</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;            }</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;            <span class="keywordflow">if</span> (atof(token) &gt; 0)</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;            {</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aa78c6d369f60940013579a8b2e5b22d1">lightGridMulAmbient</a> = atof(token);</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;            }</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        }</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;lightgridmuldir&quot;</span>))                <span class="comment">// directional multiplier for lightgrid</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        {</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;            {</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing value for &#39;lightgrid directional multiplier&#39;\n&quot;</span>);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;            }</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;            <span class="keywordflow">if</span> (atof(token) &gt; 0)</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;            {</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a975e37df7eb8dfcf152fe2c89f9ca189">lightGridMulDirected</a> = atof(token);</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;            }</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        }</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;waterfogvars&quot;</span>))</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;        {</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;            <a class="code" href="q__math_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> watercolor;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;            <span class="keywordtype">float</span>  fogvar;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="tr__shader_8c.html#adc7392b4ee0ab13892fd3f48e5b438a2">ParseVector</a>(text, 3, watercolor))</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;            {</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;            }</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;            {</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing density/distance value for water fog\n&quot;</span>);</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;            }</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            fogvar = atof(token);</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            <span class="comment">// right now allow one water color per map.  I&#39;m sure this will need</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            <span class="comment">// to change at some point, but I&#39;m not sure how to track fog parameters</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;            <span class="comment">// on a &quot;per-water volume&quot; basis yet.</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;            <span class="keywordflow">if</span> (fogvar == 0.f)           <span class="comment">// &#39;0&#39; specifies &quot;use the map values for everything except the fog color</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;            {   <span class="comment">// TODO</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;            }</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fogvar &gt; 1)            <span class="comment">// distance &quot;linear&quot; fog</span></div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;            {</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                <a class="code" href="tr__local_8h.html#a326090c62abbe93466e0a4147f789f85">R_SetFog</a>(<a class="code" href="tr__types_8h.html#ad6e514d0c9dd889c0b1b36049c979270a008df92960f310c1bf5159c28bbb9230">FOG_WATER</a>, 0, fogvar, watercolor[0], watercolor[1], watercolor[2], 1.1);</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;            }</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;            <span class="keywordflow">else</span>                          <span class="comment">// density &quot;exp&quot; fog</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            {</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;                <a class="code" href="tr__local_8h.html#a326090c62abbe93466e0a4147f789f85">R_SetFog</a>(<a class="code" href="tr__types_8h.html#ad6e514d0c9dd889c0b1b36049c979270a008df92960f310c1bf5159c28bbb9230">FOG_WATER</a>, 0, 5, watercolor[0], watercolor[1], watercolor[2], fogvar);</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;            }</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        }</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        <span class="comment">// fogvars</span></div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;fogvars&quot;</span>))</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        {</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;            <a class="code" href="q__math_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> fogColor;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;            <span class="keywordtype">float</span>  fogDensity;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;            <span class="keywordtype">int</span>    fogFar;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="tr__shader_8c.html#adc7392b4ee0ab13892fd3f48e5b438a2">ParseVector</a>(text, 3, fogColor))</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;            {</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;            }</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;            <span class="keywordflow">if</span> (!token[0])</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;            {</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing density value for the fog\n&quot;</span>);</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;            }</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            <span class="comment">// NOTE:   fogFar &gt; 1 means the shader is setting the farclip, &lt; 1 means setting</span></div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;            <span class="comment">//         density (so old maps or maps that just need softening fog don&#39;t have to care about farclip)</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;            fogDensity = atof(token);</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;            <span class="keywordflow">if</span> (fogDensity &gt; 1)      <span class="comment">// linear</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;            {</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                fogFar = fogDensity;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;            }</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;            {</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                fogFar = 5;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;            }</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;            <a class="code" href="tr__local_8h.html#a326090c62abbe93466e0a4147f789f85">R_SetFog</a>(<a class="code" href="tr__types_8h.html#ad6e514d0c9dd889c0b1b36049c979270ae3d414a7742cf030feb8df8099eca49b">FOG_MAP</a>, 0, fogFar, fogColor[0], fogColor[1], fogColor[2], fogDensity);</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            <a class="code" href="tr__local_8h.html#a326090c62abbe93466e0a4147f789f85">R_SetFog</a>(<a class="code" href="tr__types_8h.html#ad6e514d0c9dd889c0b1b36049c979270ab9d1c751bec4dd35f665b96e7ae2cf86">FOG_CMD_SWITCHFOG</a>, <a class="code" href="tr__types_8h.html#ad6e514d0c9dd889c0b1b36049c979270ae3d414a7742cf030feb8df8099eca49b">FOG_MAP</a>, 50, 0, 0, 0, 0);</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;        }</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;        <span class="comment">// allow disable fog for some shaders</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;nofog&quot;</span>))</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;            shader.<a class="code" href="structshader__s.html#af924a498fd9f3cb298b5848ac47efc53">noFog</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        }</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        <span class="comment">// allow each shader to permit compression if available</span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;allowcompress&quot;</span>))</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;        {</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a11d547fcf077a6bf5085585d14853d85">allowCompress</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;        }</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;nocompress&quot;</span>))</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        {</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a11d547fcf077a6bf5085585d14853d85">allowCompress</a> = -1;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        }</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="comment">// light &lt;value&gt; determines flaring in q3map, not needed here</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;light&quot;</span>))</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;        {</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;            (void) <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        }</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;        <span class="comment">// cull &lt;face&gt;</span></div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;cull&quot;</span>))</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;        {</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;            <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;            {</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing cull parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;            }</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;none&quot;</span>) || !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;twosided&quot;</span>) || !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;disable&quot;</span>))</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;            {</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                shader.<a class="code" href="structshader__s.html#af94e3b944a5a6b22a0cf578d62859b08">cullType</a> = <a class="code" href="tr__local_8h.html#a1480f4cb61af8bab511fad028c084b20aafb48a0aca87f48c96d94db54eda9185">CT_TWO_SIDED</a>;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;            }</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;back&quot;</span>) || !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;backside&quot;</span>) || !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;backsided&quot;</span>))</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;            {</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                shader.<a class="code" href="structshader__s.html#af94e3b944a5a6b22a0cf578d62859b08">cullType</a> = <a class="code" href="tr__local_8h.html#a1480f4cb61af8bab511fad028c084b20ae116d7ed4c4d372d170555d1e9ddd387">CT_BACK_SIDED</a>;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;            }</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;front&quot;</span>))</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;            {</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                <span class="comment">// CT_FRONT_SIDED is set per default see R_FindShader - nothing to do just don&#39;t throw a warning</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;            }</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;            {</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: invalid cull parm &#39;%s&#39; in shader &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;            }</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        }</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        <span class="comment">// distancecull &lt;opaque distance&gt; &lt;transparent distance&gt; &lt;alpha threshold&gt;</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;distancecull&quot;</span>))</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        {</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;            <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;            <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;            {</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;                token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;                <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;                {</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;                    <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: missing distancecull parms in shader &#39;%s&#39;\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;                }</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                {</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;                    shader.<a class="code" href="structshader__s.html#a52e1f12a898d13b736cab846d0ccb874">distanceCull</a>[i] = atof(token);</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;                }</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;            }</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;            <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a52e1f12a898d13b736cab846d0ccb874">distanceCull</a>[1] - shader.<a class="code" href="structshader__s.html#a52e1f12a898d13b736cab846d0ccb874">distanceCull</a>[0] &gt; 0)</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            {</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;                <span class="comment">// distanceCull[ 3 ] is an optimization</span></div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;                shader.<a class="code" href="structshader__s.html#a52e1f12a898d13b736cab846d0ccb874">distanceCull</a>[3] = 1.0f / (shader.<a class="code" href="structshader__s.html#a52e1f12a898d13b736cab846d0ccb874">distanceCull</a>[1] - shader.<a class="code" href="structshader__s.html#a52e1f12a898d13b736cab846d0ccb874">distanceCull</a>[0]);</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            }</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;            {</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                shader.<a class="code" href="structshader__s.html#a52e1f12a898d13b736cab846d0ccb874">distanceCull</a>[0] = 0;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;                shader.<a class="code" href="structshader__s.html#a52e1f12a898d13b736cab846d0ccb874">distanceCull</a>[1] = 0;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                shader.<a class="code" href="structshader__s.html#a52e1f12a898d13b736cab846d0ccb874">distanceCull</a>[2] = 0;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                shader.<a class="code" href="structshader__s.html#a52e1f12a898d13b736cab846d0ccb874">distanceCull</a>[3] = 0;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;            }</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;        }</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        <span class="comment">// sort</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;sort&quot;</span>))</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        {</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;            <a class="code" href="tr__shader_8c.html#abe39f2e2dbcb1700a9dc07aecd3e267a">ParseSort</a>(text);</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;        }</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        <span class="comment">// implicit default mapping to eliminate redundant/incorrect explicit shader stages</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="q__shared_8c.html#ae1c8da83fdf8cbec90cd9333694f7ac7">Q_stricmpn</a>(token, <span class="stringliteral">&quot;implicit&quot;</span>, 8))</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;        {</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;            <span class="comment">// set implicit mapping state</span></div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;implicitBlend&quot;</span>))</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;            {</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                <a class="code" href="tr__shader_8c.html#aab9ed2981b91833632d1ef7e7e902217">implicitStateBits</a> = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a26c7b5847174a854a49f9b7db6dee3e2">GLS_DEPTHMASK_TRUE</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a4629e9392a6fa30b3b8dfca9b7d7fb2d">GLS_SRCBLEND_SRC_ALPHA</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a50de0d49082484f366759a62c2f8e7a7">GLS_DSTBLEND_ONE_MINUS_SRC_ALPHA</a>;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                <a class="code" href="tr__shader_8c.html#a52b8d89d4ebdb10b979fbbf4cfc5b9e4">implicitCullType</a>  = <a class="code" href="tr__local_8h.html#a1480f4cb61af8bab511fad028c084b20aafb48a0aca87f48c96d94db54eda9185">CT_TWO_SIDED</a>;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;            }</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, <span class="stringliteral">&quot;implicitMask&quot;</span>))</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;            {</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                <a class="code" href="tr__shader_8c.html#aab9ed2981b91833632d1ef7e7e902217">implicitStateBits</a> = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a26c7b5847174a854a49f9b7db6dee3e2">GLS_DEPTHMASK_TRUE</a> | <a class="code" href="tr__local_8h.html#ade4a593805de6ee6d59c4a0db0cc362f">GLS_ATEST_GE_80</a>;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                <a class="code" href="tr__shader_8c.html#a52b8d89d4ebdb10b979fbbf4cfc5b9e4">implicitCullType</a>  = <a class="code" href="tr__local_8h.html#a1480f4cb61af8bab511fad028c084b20aafb48a0aca87f48c96d94db54eda9185">CT_TWO_SIDED</a>;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;            }</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;            <span class="keywordflow">else</span>      <span class="comment">// &quot;implicitMap&quot;</span></div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;            {</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                <a class="code" href="tr__shader_8c.html#aab9ed2981b91833632d1ef7e7e902217">implicitStateBits</a> = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a26c7b5847174a854a49f9b7db6dee3e2">GLS_DEPTHMASK_TRUE</a>;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                <a class="code" href="tr__shader_8c.html#a52b8d89d4ebdb10b979fbbf4cfc5b9e4">implicitCullType</a>  = <a class="code" href="tr__local_8h.html#a1480f4cb61af8bab511fad028c084b20abdaa968e7a13ee0c5e8426ee732a5736">CT_FRONT_SIDED</a>;</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;            }</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            <span class="comment">// get image</span></div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;            token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(text, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;            <span class="keywordflow">if</span> (token[0] != <span class="charliteral">&#39;\0&#39;</span>)</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;            {</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                <a class="code" href="q__shared_8c.html#a70a2b0d67ad6af400d513cf1136af8dc">Q_strncpyz</a>(<a class="code" href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">implicitMap</a>, token, <span class="keyword">sizeof</span>(<a class="code" href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">implicitMap</a>));</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;            }</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;            {</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                <a class="code" href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">implicitMap</a>[0] = <span class="charliteral">&#39;-&#39;</span>;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                <a class="code" href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">implicitMap</a>[1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;            }</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        }</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        <span class="comment">// unknown directive</span></div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        {</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: unknown general shader parameter &#39;%s&#39; in &#39;%s&#39;\n&quot;</span>, token, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        }</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <span class="comment">// ignore shaders that don&#39;t have any stages, unless it is a sky or fog</span></div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="comment">// or have implicit mapping</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="keywordflow">if</span> (s == 0 &amp;&amp; !shader.<a class="code" href="structshader__s.html#a89f20ab7415b09dd1a5b2086a8a66214">isSky</a> &amp;&amp; !(shader.<a class="code" href="structshader__s.html#a55acc662139df10b7d341d32000c9555">contentFlags</a> &amp; <a class="code" href="surfaceflags_8h.html#a05c596817b2aba376b069f8ebbef075d">CONTENTS_FOG</a>) &amp;&amp; <a class="code" href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">implicitMap</a>[0] == <span class="charliteral">&#39;\0&#39;</span>)</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    {</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    }</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    shader.<a class="code" href="structshader__s.html#aabd84064b69c81d8ff686d48cfac82d6">explicitlyDefined</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;}</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="comment">========================================================================================</span></div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;<span class="comment">SHADER OPTIMIZATION AND FOGGING</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;<span class="comment">========================================================================================</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;</div><div class="line"><a name="l02171"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#abdd71375f16dbb0a6e34d5639d41c179"> 2171</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#abdd71375f16dbb0a6e34d5639d41c179">ComputeStageIteratorFunc</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;{</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    shader.<a class="code" href="structshader__s.html#acf1494aadd7b1831bbeef2989f25f379">optimalStageIteratorFunc</a> = <a class="code" href="tr__local_8h.html#abc4424e8b066b9fdb3a369fe35d9e1a8">RB_StageIteratorGeneric</a>;</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    <span class="comment">// see if this should go into the sky path</span></div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a89f20ab7415b09dd1a5b2086a8a66214">isSky</a>)</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    {</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        shader.<a class="code" href="structshader__s.html#acf1494aadd7b1831bbeef2989f25f379">optimalStageIteratorFunc</a> = <a class="code" href="tr__local_8h.html#a8493c1d2f9f4c2ddd3b3abda295d680a">RB_StageIteratorSky</a>;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    }</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tr__init_8c.html#a700b412228b34d5097a2b60b107b9108">r_ignoreFastPath</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    {</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    }</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <span class="comment">// stages with tcMods can&#39;t be fast-pathed</span></div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <span class="keywordflow">if</span> (stages[0].bundle[0].numTexMods != 0 ||</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        stages[0].bundle[1].numTexMods != 0)</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    {</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    }</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <span class="comment">// see if this can go into the vertex lit fast path</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a6a1e4e84a91cda33a050c17e8377bef7">numUnfoggedPasses</a> == 1)</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    {</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        <span class="keywordflow">if</span> (stages[0].rgbGen == <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa4981c8d38c68fc7cc7c570f175864b06">CGEN_LIGHTING_DIFFUSE</a>)</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;        {</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;            <span class="keywordflow">if</span> (stages[0].alphaGen == <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427acf0d6ef5c91891a62f9b17b00121c741">AGEN_IDENTITY</a>)</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;            {</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                <span class="keywordflow">if</span> (stages[0].bundle[0].tcGen == <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca37acf280d9b867c360c0ca203e6bdfa2">TCGEN_TEXTURE</a>)</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                {</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                    <span class="keywordflow">if</span> (!shader.<a class="code" href="structshader__s.html#aa40dd5dbff2a337571afae3a3459a19f">polygonOffset</a>)</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                    {</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                        <span class="keywordflow">if</span> (!shader.<a class="code" href="structshader__s.html#a8a2dbab0cb598e82bd1866b0bf300aa6">multitextureEnv</a>)</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;                        {</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;                            <span class="keywordflow">if</span> (!shader.<a class="code" href="structshader__s.html#ad7e072249689528b97c784b3ab0ae887">numDeforms</a>)</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                            {</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                                shader.<a class="code" href="structshader__s.html#acf1494aadd7b1831bbeef2989f25f379">optimalStageIteratorFunc</a> = <a class="code" href="tr__local_8h.html#adc65c268c034252fe71d66175cb41a9d">RB_StageIteratorVertexLitTexture</a>;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;                                <span class="keywordflow">return</span>;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                            }</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                        }</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                    }</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;                }</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;            }</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;        }</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    }</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="comment">// see if this can go into an optimized LM, multitextured path</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a6a1e4e84a91cda33a050c17e8377bef7">numUnfoggedPasses</a> == 1)</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    {</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;        <span class="keywordflow">if</span> ((stages[0].rgbGen == <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa3fd04125fe0240035c5da6bc2e31d310">CGEN_IDENTITY</a>) &amp;&amp; (stages[0].alphaGen == <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427acf0d6ef5c91891a62f9b17b00121c741">AGEN_IDENTITY</a>))</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;        {</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;            <span class="keywordflow">if</span> (stages[0].bundle[0].tcGen == <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca37acf280d9b867c360c0ca203e6bdfa2">TCGEN_TEXTURE</a> &amp;&amp;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                stages[0].bundle[1].tcGen == <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca08a84aec97b7f5a7410e587ab07bd1a7">TCGEN_LIGHTMAP</a>)</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;            {</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                <span class="keywordflow">if</span> (!shader.<a class="code" href="structshader__s.html#aa40dd5dbff2a337571afae3a3459a19f">polygonOffset</a>)</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                {</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                    <span class="keywordflow">if</span> (!shader.<a class="code" href="structshader__s.html#ad7e072249689528b97c784b3ab0ae887">numDeforms</a>)</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                    {</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                        <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a8a2dbab0cb598e82bd1866b0bf300aa6">multitextureEnv</a>)</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;                        {</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                            shader.<a class="code" href="structshader__s.html#acf1494aadd7b1831bbeef2989f25f379">optimalStageIteratorFunc</a> = <a class="code" href="tr__local_8h.html#a6ee900266c2268e950038aa773b30b3d">RB_StageIteratorLightmappedMultitexture</a>;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                        }</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;                    }</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;                }</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            }</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        }</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    }</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;}</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;</div><div class="line"><a name="l02243"></a><span class="lineno"><a class="line" href="structcollapse__t.html"> 2243</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;{</div><div class="line"><a name="l02245"></a><span class="lineno"><a class="line" href="structcollapse__t.html#a6fa0ed4beda3fc528c5c2d50970daa46"> 2245</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structcollapse__t.html#a6fa0ed4beda3fc528c5c2d50970daa46">blendA</a>;</div><div class="line"><a name="l02246"></a><span class="lineno"><a class="line" href="structcollapse__t.html#a5e5dc1743ca7f1bd28f0eedac4498d1c"> 2246</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structcollapse__t.html#a5e5dc1743ca7f1bd28f0eedac4498d1c">blendB</a>;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;</div><div class="line"><a name="l02248"></a><span class="lineno"><a class="line" href="structcollapse__t.html#aecb666eb6218381fe97fc584956fddc1"> 2248</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structcollapse__t.html#aecb666eb6218381fe97fc584956fddc1">multitextureEnv</a>;</div><div class="line"><a name="l02249"></a><span class="lineno"><a class="line" href="structcollapse__t.html#a6d06ba9a6152dc980ed244dc8f404f81"> 2249</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structcollapse__t.html#a6d06ba9a6152dc980ed244dc8f404f81">multitextureBlend</a>;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;} <a class="code" href="structcollapse__t.html">collapse_t</a>;</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;</div><div class="line"><a name="l02252"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a8a2fa573685b71127cd2b352fff89d5a"> 2252</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structcollapse__t.html">collapse_t</a> collapse[] =</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;{</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    { 0,                                          <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a7379cb52014d710eb6ca42a544ff7a3c">GLS_DSTBLEND_SRC_COLOR</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609af509a0566baa77afd7d612455ee365a0">GLS_SRCBLEND_ZERO</a>,</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      GL_MODULATE, 0 },</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    { 0,                                          <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a>,</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;      GL_MODULATE, 0 },</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    { <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a>, <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a>,</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;      GL_MODULATE, <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a> },</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    { <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a7379cb52014d710eb6ca42a544ff7a3c">GLS_DSTBLEND_SRC_COLOR</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609af509a0566baa77afd7d612455ee365a0">GLS_SRCBLEND_ZERO</a>, <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a>,</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      GL_MODULATE, <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a> },</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    { <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a>, <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a7379cb52014d710eb6ca42a544ff7a3c">GLS_DSTBLEND_SRC_COLOR</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609af509a0566baa77afd7d612455ee365a0">GLS_SRCBLEND_ZERO</a>,</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      GL_MODULATE, <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a> },</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    { <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a7379cb52014d710eb6ca42a544ff7a3c">GLS_DSTBLEND_SRC_COLOR</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609af509a0566baa77afd7d612455ee365a0">GLS_SRCBLEND_ZERO</a>, <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a7379cb52014d710eb6ca42a544ff7a3c">GLS_DSTBLEND_SRC_COLOR</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609af509a0566baa77afd7d612455ee365a0">GLS_SRCBLEND_ZERO</a>,</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      GL_MODULATE, <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a> },</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    { 0,                                          <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a3bb089e7ee899da0b4e9b4b17d716377">GLS_DSTBLEND_ONE</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac">GLS_SRCBLEND_ONE</a>,</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;      GL_ADD, 0 },</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    { <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a3bb089e7ee899da0b4e9b4b17d716377">GLS_DSTBLEND_ONE</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac">GLS_SRCBLEND_ONE</a>,        <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a3bb089e7ee899da0b4e9b4b17d716377">GLS_DSTBLEND_ONE</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac">GLS_SRCBLEND_ONE</a>,</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      GL_ADD, <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a3bb089e7ee899da0b4e9b4b17d716377">GLS_DSTBLEND_ONE</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac">GLS_SRCBLEND_ONE</a> },</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    { 0,                                          <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a50de0d49082484f366759a62c2f8e7a7">GLS_DSTBLEND_ONE_MINUS_SRC_ALPHA</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a4629e9392a6fa30b3b8dfca9b7d7fb2d">GLS_SRCBLEND_SRC_ALPHA</a>,</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;      GL_DECAL, 0 },</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    { -1,                                         -1,                                                       -1,-1 }</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;};</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;</div><div class="line"><a name="l02290"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a29562977973a8c3ebb5d5c495f46059d"> 2290</a></span>&#160;<span class="keyword">static</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> <a class="code" href="tr__shader_8c.html#a29562977973a8c3ebb5d5c495f46059d">CollapseMultitexture</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;{</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    <span class="keywordtype">int</span>             abits, bbits;</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="keywordtype">int</span>             i;</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <a class="code" href="structtextureBundle__t.html">textureBundle_t</a> tmpBundle;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="qgl_8h.html#a8a0a412364e3499d57bc9e15a5345852">qglActiveTextureARB</a>)</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    {</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    }</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <span class="comment">// make sure both stages are active</span></div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <span class="keywordflow">if</span> (!stages[0].active || !stages[1].active)</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    {</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    }</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    abits = stages[0].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a>;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    bbits = stages[1].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a>;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <span class="comment">// make sure that both stages have identical state other than blend modes</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <span class="keywordflow">if</span> ((abits &amp; ~(<a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a0b70f0cd27eb851a6ca5edbadd07e570">GLS_DSTBLEND_BITS</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5d35ebb8a04fcb88117cca5d357261af">GLS_SRCBLEND_BITS</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a26c7b5847174a854a49f9b7db6dee3e2">GLS_DEPTHMASK_TRUE</a>)) !=</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        (bbits &amp; ~(<a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a0b70f0cd27eb851a6ca5edbadd07e570">GLS_DSTBLEND_BITS</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5d35ebb8a04fcb88117cca5d357261af">GLS_SRCBLEND_BITS</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a26c7b5847174a854a49f9b7db6dee3e2">GLS_DEPTHMASK_TRUE</a>)))</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    {</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    }</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    abits &amp;= (<a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a0b70f0cd27eb851a6ca5edbadd07e570">GLS_DSTBLEND_BITS</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5d35ebb8a04fcb88117cca5d357261af">GLS_SRCBLEND_BITS</a>);</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    bbits &amp;= (<a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a0b70f0cd27eb851a6ca5edbadd07e570">GLS_DSTBLEND_BITS</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5d35ebb8a04fcb88117cca5d357261af">GLS_SRCBLEND_BITS</a>);</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="comment">// search for a valid multitexture blend function</span></div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keywordflow">for</span> (i = 0; collapse[i].<a class="code" href="structcollapse__t.html#a6fa0ed4beda3fc528c5c2d50970daa46">blendA</a> != -1 ; i++)</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    {</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;        <span class="keywordflow">if</span> (abits == collapse[i].blendA</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;            &amp;&amp; bbits == collapse[i].blendB)</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        {</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        }</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    }</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="comment">// nothing found</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="keywordflow">if</span> (collapse[i].blendA == -1)</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    {</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    }</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <span class="comment">// GL_ADD is a separate extension</span></div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <span class="keywordflow">if</span> (collapse[i].multitextureEnv == GL_ADD &amp;&amp; !<a class="code" href="tr__init_8c.html#ae5a86f4b2e7724fd33b09be699cacc97">glConfig</a>.<a class="code" href="structglconfig__t.html#a4717bfae77789bfd4bb53d0577018f30">textureEnvAddAvailable</a>)</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    {</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    }</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    <span class="comment">// make sure waveforms have identical parameters</span></div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    <span class="keywordflow">if</span> ((stages[0].rgbGen != stages[1].rgbGen) ||</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        (stages[0].<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> != stages[1].<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a>))</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    {</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    }</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="comment">// an add collapse can only have identity colors</span></div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <span class="keywordflow">if</span> (collapse[i].multitextureEnv == GL_ADD &amp;&amp; stages[0].rgbGen != <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa3fd04125fe0240035c5da6bc2e31d310">CGEN_IDENTITY</a>)</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    {</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    }</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <span class="keywordflow">if</span> (stages[0].rgbGen == <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfab22bdc334d6355c003a10be8ed27b99b">CGEN_WAVEFORM</a>)</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    {</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;        <span class="keywordflow">if</span> (memcmp(&amp;stages[0].rgbWave,</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                   &amp;stages[1].rgbWave,</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                   <span class="keyword">sizeof</span>(stages[0].rgbWave)))</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        {</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        }</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    }</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="keywordflow">if</span> (stages[0].alphaGen == <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a21420715f26ce730a43a9b391789bb24">AGEN_WAVEFORM</a>)</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    {</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        <span class="keywordflow">if</span> (memcmp(&amp;stages[0].alphaWave,</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                   &amp;stages[1].alphaWave,</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;                   <span class="keyword">sizeof</span>(stages[0].alphaWave)))</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;        {</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;        }</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    }</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="comment">// make sure that lightmaps are in bundle 1 for 3dfx</span></div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <span class="keywordflow">if</span> (stages[0].bundle[0].isLightmap)</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    {</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;        tmpBundle           = stages[0].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0];</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0] = stages[1].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0];</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[1] = tmpBundle;</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    }</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    {</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[1] = stages[1].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0];</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    }</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="comment">// set the new blend state bits</span></div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    shader.<a class="code" href="structshader__s.html#a8a2dbab0cb598e82bd1866b0bf300aa6">multitextureEnv</a> = collapse[i].<a class="code" href="structcollapse__t.html#aecb666eb6218381fe97fc584956fddc1">multitextureEnv</a>;</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    stages[0].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a>   &amp;= ~(<a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a0b70f0cd27eb851a6ca5edbadd07e570">GLS_DSTBLEND_BITS</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5d35ebb8a04fcb88117cca5d357261af">GLS_SRCBLEND_BITS</a>);</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    stages[0].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a>   |= collapse[i].<a class="code" href="structcollapse__t.html#a6d06ba9a6152dc980ed244dc8f404f81">multitextureBlend</a>;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="comment">// move down subsequent shaders</span></div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    memmove(&amp;stages[1], &amp;stages[2], <span class="keyword">sizeof</span>(stages[0]) * (<a class="code" href="tr__local_8h.html#a8f9f17869dd24d22985f328decc076a8">MAX_SHADER_STAGES</a> - 2));</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <a class="code" href="q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(&amp;stages[<a class="code" href="tr__local_8h.html#a8f9f17869dd24d22985f328decc076a8">MAX_SHADER_STAGES</a> - 1], 0, <span class="keyword">sizeof</span>(stages[0]));</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;}</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;</div><div class="line"><a name="l02409"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a4e007efc30f7e9bb085dec524ed3c73a"> 2409</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a4e007efc30f7e9bb085dec524ed3c73a">FixRenderCommandList</a>(<span class="keywordtype">int</span> newShader)</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;{</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <a class="code" href="structrenderCommandList__t.html">renderCommandList_t</a> *cmdList = &amp;<a class="code" href="tr__backend_8c.html#a3a0b0bb971e18ae6245e77bf93473e0a">backEndData</a>-&gt;<a class="code" href="structbackEndData__t.html#ab549f9de564b7da040af8e9d51371cf3">commands</a>;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <span class="keywordflow">if</span> (cmdList)</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    {</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">void</span> *curCmd = cmdList-&gt;<a class="code" href="structrenderCommandList__t.html#aa85d7ffd6623fa7bcebb2f40bdeac6f4">cmds</a>;</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        {</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;            curCmd = <a class="code" href="q__shared_8h.html#a1b70c63c830b530f9eacf212a290f275">PADP</a>(curCmd, <span class="keyword">sizeof</span>(<span class="keywordtype">void</span> *));</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;            <span class="keywordflow">switch</span> (*(<span class="keyword">const</span> <span class="keywordtype">int</span> *)curCmd)</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;            {</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822ae0f8207e89a519b869824170b1064ada">RC_SET_COLOR</a>:</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;            {</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;                <span class="keyword">const</span> <a class="code" href="structsetColorCommand__t.html">setColorCommand_t</a> *sc_cmd = (<span class="keyword">const</span> <a class="code" href="structsetColorCommand__t.html">setColorCommand_t</a> *)curCmd;</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;                curCmd = (<span class="keyword">const</span> <span class="keywordtype">void</span> *)(sc_cmd + 1);</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;            }</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822a75e586aac893f50caab85e8bd4f29b02">RC_STRETCH_PIC</a>:</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822a2eb0c4d039eb8481fd2613a3d2438dd5">RC_ROTATED_PIC</a>:</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822aeb7456dd272e67909ae53f68dcd2e1e6">RC_STRETCH_PIC_GRADIENT</a>:</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;            {</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                <span class="keyword">const</span> <a class="code" href="structstretchPicCommand__t.html">stretchPicCommand_t</a> *sp_cmd = (<span class="keyword">const</span> <a class="code" href="structstretchPicCommand__t.html">stretchPicCommand_t</a> *)curCmd;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;                curCmd = (<span class="keyword">const</span> <span class="keywordtype">void</span> *)(sp_cmd + 1);</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;            }</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822a096bbe7cd283c4935cf1dd692bb482b6">RC_2DPOLYS</a>:</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;            {</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;                <span class="keyword">const</span> <a class="code" href="structpoly2dCommand__t.html">poly2dCommand_t</a> *sp_cmd = (<span class="keyword">const</span> <a class="code" href="structpoly2dCommand__t.html">poly2dCommand_t</a> *)curCmd;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;                curCmd = (<span class="keyword">const</span> <span class="keywordtype">void</span> *)(sp_cmd + 1);</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;            }</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822a1b5e6f8a20c2e0b5e00595d2e3e94249">RC_DRAW_SURFS</a>:</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;            {</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                <a class="code" href="structdrawSurf__s.html">drawSurf_t</a>               *drawSurf;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                <a class="code" href="structshader__s.html">shader_t</a>                 *<a class="code" href="tr__shader_8c.html#add8b99b73cfef6fc7963980f9db455de">shader</a>;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;                <span class="keywordtype">int</span>                      i, fogNum, frontFace, entityNum, dlightMap, sortedIndex;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;                <span class="keyword">const</span> <a class="code" href="structdrawSurfsCommand__t.html">drawSurfsCommand_t</a> *ds_cmd = (<span class="keyword">const</span> <a class="code" href="structdrawSurfsCommand__t.html">drawSurfsCommand_t</a> *)curCmd;</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                <span class="keywordflow">for</span> (i = 0, drawSurf = ds_cmd-&gt;<a class="code" href="structdrawSurfsCommand__t.html#aab88e321fa4985fe8a1696789b8dbec9">drawSurfs</a>; i &lt; ds_cmd-&gt;numDrawSurfs; i++, drawSurf++)</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;                {</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;                    <a class="code" href="tr__local_8h.html#abc791445795125c996a0d09cc17a349d">R_DecomposeSort</a>(drawSurf-&gt;<a class="code" href="structdrawSurf__s.html#a4f8f60ae5a912c5687bd35edc41728ed">sort</a>, &amp;entityNum, &amp;shader, &amp;fogNum, &amp;frontFace, &amp;dlightMap);</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;                    sortedIndex = ((drawSurf-&gt;<a class="code" href="structdrawSurf__s.html#a4f8f60ae5a912c5687bd35edc41728ed">sort</a> &gt;&gt; <a class="code" href="tr__local_8h.html#a4e71d334da5d51d22a8938274611ec03">QSORT_SHADERNUM_SHIFT</a>) &amp; (<a class="code" href="tr__local_8h.html#a3e81bce4adf8cfce68f5dea670fac3f0">MAX_SHADERS</a> - 1));</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;                    <span class="keywordflow">if</span> (sortedIndex &gt;= newShader)</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                    {</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                        sortedIndex++;</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                        drawSurf-&gt;<a class="code" href="structdrawSurf__s.html#a4f8f60ae5a912c5687bd35edc41728ed">sort</a> = (sortedIndex &lt;&lt; <a class="code" href="tr__local_8h.html#a4e71d334da5d51d22a8938274611ec03">QSORT_SHADERNUM_SHIFT</a>)</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                                         | (entityNum &lt;&lt; <a class="code" href="tr__local_8h.html#aa9e5f00500a9762756bbe693e71de433">QSORT_ENTITYNUM_SHIFT</a>) | (fogNum &lt;&lt; <a class="code" href="tr__local_8h.html#a0983272711952af388a03af2e4c058b7">QSORT_FOGNUM_SHIFT</a>) | (frontFace &lt;&lt; <a class="code" href="tr__local_8h.html#aaa3322b93f735cd1e46b1ec42cdfc03e">QSORT_FRONTFACE_SHIFT</a>) | dlightMap;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;                    }</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;                }</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;                curCmd = (<span class="keyword">const</span> <span class="keywordtype">void</span> *)(ds_cmd + 1);</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;            }</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822aa9887869deeb5209f9ec17d90eaab99e">RC_DRAW_BUFFER</a>:</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;            {</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;                <span class="keyword">const</span> <a class="code" href="structdrawBufferCommand__t.html">drawBufferCommand_t</a> *db_cmd = (<span class="keyword">const</span> <a class="code" href="structdrawBufferCommand__t.html">drawBufferCommand_t</a> *)curCmd;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;                curCmd = (<span class="keyword">const</span> <span class="keywordtype">void</span> *)(db_cmd + 1);</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;            }</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822a3e192d6c4ad99601317640cec6bad60f">RC_SWAP_BUFFERS</a>:</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;            {</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;                <span class="keyword">const</span> <a class="code" href="structswapBuffersCommand__t.html">swapBuffersCommand_t</a> *sb_cmd = (<span class="keyword">const</span> <a class="code" href="structswapBuffersCommand__t.html">swapBuffersCommand_t</a> *)curCmd;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                curCmd = (<span class="keyword">const</span> <span class="keywordtype">void</span> *)(sb_cmd + 1);</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;            }</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822a49438b0491cea0754c0c315582682f43">RC_END_OF_LIST</a>:</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;            }</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;        }</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    }</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;}</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;</div><div class="line"><a name="l02496"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a961cfd3275a1fb303d89b9a38bbe3991"> 2496</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a961cfd3275a1fb303d89b9a38bbe3991">SortNewShader</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;{</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="keywordtype">int</span>      i;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <a class="code" href="structshader__s.html">shader_t</a> *newShader = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ac637e5669ddac0b56802fc22ee762425">shaders</a>[<a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a> - 1];</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <span class="keywordtype">float</span>    sort       = newShader-&gt;<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a>;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    <span class="keywordflow">for</span> (i = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a> - 2 ; i &gt;= 0 ; i--)</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    {</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a62f176b8fd5c75131eb4adb78df8589b">sortedShaders</a>[i]-&gt;<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> &lt;= sort)</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        {</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;        }</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;        <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a62f176b8fd5c75131eb4adb78df8589b">sortedShaders</a>[i + 1] = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a62f176b8fd5c75131eb4adb78df8589b">sortedShaders</a>[i];</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;        <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a62f176b8fd5c75131eb4adb78df8589b">sortedShaders</a>[i + 1]-&gt;<a class="code" href="structshader__s.html#ae6ada0c41fb9b5e8ca539fa5b3895eb4">sortedIndex</a>++;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    }</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <span class="comment">// fix rendercommandlist</span></div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <a class="code" href="tr__shader_8c.html#a4e007efc30f7e9bb085dec524ed3c73a">FixRenderCommandList</a>(i + 1);</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    newShader-&gt;<a class="code" href="structshader__s.html#ae6ada0c41fb9b5e8ca539fa5b3895eb4">sortedIndex</a>  = i + 1;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a62f176b8fd5c75131eb4adb78df8589b">sortedShaders</a>[i + 1] = newShader;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;}</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;</div><div class="line"><a name="l02523"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#ab6d3fb4c10b6e127071890a047ff497b"> 2523</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__shader_8c.html#ab6d3fb4c10b6e127071890a047ff497b">GeneratePermanentShader</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;{</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    <a class="code" href="structshader__s.html">shader_t</a> *newShader;</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="keywordtype">int</span>      i, b;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <span class="keywordtype">int</span>      size, <a class="code" href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a>;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a> == <a class="code" href="tr__local_8h.html#a3e81bce4adf8cfce68f5dea670fac3f0">MAX_SHADERS</a>)</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    {</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: GeneratePermanentShader - MAX_SHADERS hit\n&quot;</span>);</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aac35656af63d3b2b5057189ed4c45a3e">defaultShader</a>;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    }</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <span class="comment">// caching system</span></div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    newShader = <a class="code" href="tr__local_8h.html#a147d38561844c7dc036d685df22fa9c3">R_CacheShaderAlloc</a>(shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> &lt; 0 ? <a class="code" href="dl__local_8h.html#a2f2251d7d64d4c9ec69520b953f68bb9">va</a>(<span class="stringliteral">&quot;%s lm: %i&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>, shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a>) : <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">sizeof</span>(<a class="code" href="structshader__s.html">shader_t</a>));</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    *newShader = <a class="code" href="tr__shader_8c.html#add8b99b73cfef6fc7963980f9db455de">shader</a>;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> &lt;= <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a7beaf01cbe0de9e837686d0038c631a0">SS_SEE_THROUGH</a>)      <span class="comment">// was SS_DECAL, this allows grates to be fogged</span></div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    {</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;        newShader-&gt;<a class="code" href="structshader__s.html#aba9983a1df1e71a7d1e154422516d1c4">fogPass</a> = <a class="code" href="tr__local_8h.html#ab59af7adf1cc82196d2cedbfd127ffb5a38ac98d11bc4564f23a27e9e6472adee">FP_EQUAL</a>;</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    }</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a55acc662139df10b7d341d32000c9555">contentFlags</a> &amp; <a class="code" href="surfaceflags_8h.html#a05c596817b2aba376b069f8ebbef075d">CONTENTS_FOG</a>)</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    {</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        newShader-&gt;<a class="code" href="structshader__s.html#aba9983a1df1e71a7d1e154422516d1c4">fogPass</a> = <a class="code" href="tr__local_8h.html#ab59af7adf1cc82196d2cedbfd127ffb5a0fc501b5f3fe31aab8026fea86522588">FP_LE</a>;</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    }</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ac637e5669ddac0b56802fc22ee762425">shaders</a>[<a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a>] = newShader;</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    newShader-&gt;<a class="code" href="structshader__s.html#aef63f5e4a3db9c23201ef10d62cb42f5">index</a>          = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a>;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a62f176b8fd5c75131eb4adb78df8589b">sortedShaders</a>[<a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a>] = newShader;</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    newShader-&gt;<a class="code" href="structshader__s.html#ae6ada0c41fb9b5e8ca539fa5b3895eb4">sortedIndex</a>          = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a>;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a>++;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <span class="keywordflow">for</span> (i = 0 ; i &lt; newShader-&gt;<a class="code" href="structshader__s.html#a6a1e4e84a91cda33a050c17e8377bef7">numUnfoggedPasses</a> ; i++)</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    {</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;        <span class="keywordflow">if</span> (!stages[i].active)</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        {</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;            newShader-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i] = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;    <span class="comment">// make sure it&#39;s null</span></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;        }</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        <span class="comment">// caching system</span></div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        newShader-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i] = <a class="code" href="tr__local_8h.html#a147d38561844c7dc036d685df22fa9c3">R_CacheShaderAlloc</a>(<a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">sizeof</span>(stages[i]));</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;        *newShader-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i] = stages[i];</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;        <span class="keywordflow">for</span> (b = 0 ; b &lt; <a class="code" href="tr__local_8h.html#ae1cdd295436ef51febabf3b11dc897e0">NUM_TEXTURE_BUNDLES</a> ; b++)</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;        {</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;            <span class="keywordflow">if</span> (!newShader-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i]-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[b].<a class="code" href="structtextureBundle__t.html#a3618aefcd18757c48c6fba6d56ab967f">numTexMods</a>)</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;            {</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                <span class="comment">// make sure unalloc&#39;d texMods aren&#39;t pointing to some random point in memory</span></div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                newShader-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i]-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[b].<a class="code" href="structtextureBundle__t.html#ac460ff874c73b07d93144cf5c760cb81">texMods</a> = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;            }</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;            size = newShader-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i]-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[b].<a class="code" href="structtextureBundle__t.html#a3618aefcd18757c48c6fba6d56ab967f">numTexMods</a> * <span class="keyword">sizeof</span>(<a class="code" href="structtexModInfo__t.html">texModInfo_t</a>);</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;            <span class="comment">// caching system</span></div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;            newShader-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i]-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[b].<a class="code" href="structtextureBundle__t.html#ac460ff874c73b07d93144cf5c760cb81">texMods</a> = <a class="code" href="tr__local_8h.html#a147d38561844c7dc036d685df22fa9c3">R_CacheShaderAlloc</a>(<a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, size);</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;            <a class="code" href="q__shared_8h.html#a0701630965c52ce0cc99eda50fbb8235">Com_Memcpy</a>(newShader-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i]-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[b].<a class="code" href="structtextureBundle__t.html#ac460ff874c73b07d93144cf5c760cb81">texMods</a>, stages[i].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[b].<a class="code" href="structtextureBundle__t.html#ac460ff874c73b07d93144cf5c760cb81">texMods</a>, size);</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;        }</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    }</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    <a class="code" href="tr__shader_8c.html#a961cfd3275a1fb303d89b9a38bbe3991">SortNewShader</a>();</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    hash            = <a class="code" href="tr__shader_8c.html#accbfbb017e2efca51df4e2d767280b09">generateHashValue</a>(newShader-&gt;<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    newShader-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a> = hashTable[<a class="code" href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a>];</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    hashTable[<a class="code" href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a>] = newShader;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    <span class="keywordflow">return</span> newShader;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;}</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;<span class="preprocessor">#if 0 // To shut up compiler warnings until we use this function.</span></div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> VertexLightingCollapse(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;{</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="keywordtype">int</span>           stage;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    <a class="code" href="structshaderStage__t.html">shaderStage_t</a> *bestStage;</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <span class="keywordtype">int</span>           bestImageRank;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <span class="keywordtype">int</span>           rank;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    <span class="comment">// if we aren&#39;t opaque, just use the first pass</span></div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> == <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a6b2c619db929f7bd5a69e8ef573e60cf">SS_OPAQUE</a>)</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    {</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;        <span class="comment">// pick the best texture for the single pass</span></div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;        bestStage     = &amp;stages[0];</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;        bestImageRank = -999999;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        <span class="keywordflow">for</span> (stage = 0; stage &lt; <a class="code" href="tr__local_8h.html#a8f9f17869dd24d22985f328decc076a8">MAX_SHADER_STAGES</a>; stage++)</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        {</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;            <a class="code" href="structshaderStage__t.html">shaderStage_t</a> *pStage = &amp;stages[stage];</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;            <span class="keywordflow">if</span> (!pStage-&gt;<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>)</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;            {</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;            }</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;            rank = 0;</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;            <span class="keywordflow">if</span> (pStage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#aff49fd5f8043dfa9f1f3d7ac3fc44330">isLightmap</a>)</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;            {</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                rank -= 100;</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;            }</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;            <span class="keywordflow">if</span> (pStage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ae9e7dc0e6443b51059d0d07cccd00fcf">tcGen</a> != <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca37acf280d9b867c360c0ca203e6bdfa2">TCGEN_TEXTURE</a>)</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;            {</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                rank -= 5;</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;            }</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;            <span class="keywordflow">if</span> (pStage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a3618aefcd18757c48c6fba6d56ab967f">numTexMods</a>)</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;            {</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;                rank -= 5;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;            }</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;            <span class="keywordflow">if</span> (pStage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> != <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa3fd04125fe0240035c5da6bc2e31d310">CGEN_IDENTITY</a> &amp;&amp; pStage-&gt;<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> != <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa95148bf4c94b7a559f8f6b9ba4e386bb">CGEN_IDENTITY_LIGHTING</a>)</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;            {</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;                rank -= 3;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;            }</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;            <span class="keywordflow">if</span> (rank &gt; bestImageRank)</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;            {</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;                bestImageRank = rank;</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;                bestStage     = pStage;</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;            }</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        }</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0]  = bestStage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0];</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a> &amp;= ~(<a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a0b70f0cd27eb851a6ca5edbadd07e570">GLS_DSTBLEND_BITS</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5d35ebb8a04fcb88117cca5d357261af">GLS_SRCBLEND_BITS</a>);</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a> |= <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a26c7b5847174a854a49f9b7db6dee3e2">GLS_DEPTHMASK_TRUE</a>;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;        <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> == <a class="code" href="tr__local_8h.html#a09448f021c14aabac18683284291174b">LIGHTMAP_NONE</a>)</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        {</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa4981c8d38c68fc7cc7c570f175864b06">CGEN_LIGHTING_DIFFUSE</a>;</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;        }</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;        {</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa17132f4772be73d5a222521c450ba8ed">CGEN_EXACT_VERTEX</a>;</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;        }</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a> = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a3960eb96d46757dd6bec1c9b1c061e2b">AGEN_SKIP</a>;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    }</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    {</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;        <span class="comment">// don&#39;t use a lightmap (tesla coils)</span></div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        <span class="keywordflow">if</span> (stages[0].bundle[0].isLightmap)</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;        {</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;            stages[0] = stages[1];</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;        }</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;        <span class="comment">// if we were in a cross-fade cgen, hack it to normal</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;        <span class="keywordflow">if</span> (stages[0].rgbGen == <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa958f68d1ba9f16898759973f89f30c2a">CGEN_ONE_MINUS_ENTITY</a> || stages[1].rgbGen == <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa958f68d1ba9f16898759973f89f30c2a">CGEN_ONE_MINUS_ENTITY</a>)</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;        {</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa95148bf4c94b7a559f8f6b9ba4e386bb">CGEN_IDENTITY_LIGHTING</a>;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;        }</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;        <span class="keywordflow">if</span> ((stages[0].rgbGen == <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfab22bdc334d6355c003a10be8ed27b99b">CGEN_WAVEFORM</a> &amp;&amp; stages[0].rgbWave.func == <a class="code" href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a72d01f6e8b73dea27285bdbec6dd4a9b">GF_SAWTOOTH</a>)</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;            &amp;&amp; (stages[1].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> == <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfab22bdc334d6355c003a10be8ed27b99b">CGEN_WAVEFORM</a> &amp;&amp; stages[1].<a class="code" href="structshaderStage__t.html#a87be6cca01f47bbc8d1f228150fd058a">rgbWave</a>.<a class="code" href="structwaveForm__t.html#a2285d473e6ed4f901f640c947c392d6b">func</a> == <a class="code" href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a7bb00dbb6e2977ac4eb1705e4a084146">GF_INVERSE_SAWTOOTH</a>))</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        {</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa95148bf4c94b7a559f8f6b9ba4e386bb">CGEN_IDENTITY_LIGHTING</a>;</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;        }</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;        <span class="keywordflow">if</span> ((stages[0].rgbGen == <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfab22bdc334d6355c003a10be8ed27b99b">CGEN_WAVEFORM</a> &amp;&amp; stages[0].rgbWave.func == <a class="code" href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a7bb00dbb6e2977ac4eb1705e4a084146">GF_INVERSE_SAWTOOTH</a>)</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;            &amp;&amp; (stages[1].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> == <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfab22bdc334d6355c003a10be8ed27b99b">CGEN_WAVEFORM</a> &amp;&amp; stages[1].<a class="code" href="structshaderStage__t.html#a87be6cca01f47bbc8d1f228150fd058a">rgbWave</a>.<a class="code" href="structwaveForm__t.html#a2285d473e6ed4f901f640c947c392d6b">func</a> == <a class="code" href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a72d01f6e8b73dea27285bdbec6dd4a9b">GF_SAWTOOTH</a>))</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;        {</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a> = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa95148bf4c94b7a559f8f6b9ba4e386bb">CGEN_IDENTITY_LIGHTING</a>;</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;        }</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;    }</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    <span class="keywordflow">for</span> (stage = 1; stage &lt; <a class="code" href="tr__local_8h.html#a8f9f17869dd24d22985f328decc076a8">MAX_SHADER_STAGES</a>; stage++)</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    {</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        <a class="code" href="structshaderStage__t.html">shaderStage_t</a> *pStage = &amp;stages[stage];</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;        <span class="keywordflow">if</span> (!pStage-&gt;<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>)</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;        {</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;        }</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;        <a class="code" href="q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(pStage, 0, <span class="keyword">sizeof</span>(*pStage));</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    }</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;}</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;<span class="preprocessor">#endif // 0</span></div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;</div><div class="line"><a name="l02704"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#aebab19fec7c981d20371396f9f58aa05"> 2704</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#aebab19fec7c981d20371396f9f58aa05">SetImplicitShaderStages</a>(<a class="code" href="structimage__s.html">image_t</a> *image)</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;{</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <span class="comment">// set implicit cull type</span></div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tr__shader_8c.html#a52b8d89d4ebdb10b979fbbf4cfc5b9e4">implicitCullType</a> &amp;&amp; !shader.<a class="code" href="structshader__s.html#af94e3b944a5a6b22a0cf578d62859b08">cullType</a>)</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;    {</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;        shader.<a class="code" href="structshader__s.html#af94e3b944a5a6b22a0cf578d62859b08">cullType</a> = <a class="code" href="tr__shader_8c.html#a52b8d89d4ebdb10b979fbbf4cfc5b9e4">implicitCullType</a>;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    }</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    <span class="comment">// set shader stages</span></div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    <span class="keywordflow">switch</span> (shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a>)</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    {</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    <span class="comment">// dynamic colors at vertexes</span></div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#a09448f021c14aabac18683284291174b">LIGHTMAP_NONE</a>:</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = image;</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>             = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a>             = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa4981c8d38c68fc7cc7c570f175864b06">CGEN_LIGHTING_DIFFUSE</a>;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a>          = <a class="code" href="tr__shader_8c.html#aab9ed2981b91833632d1ef7e7e902217">implicitStateBits</a>;</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <span class="comment">// gui elements (note state bits are overridden)</span></div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#ae4e9045737fe24f4ce7eb31f2344f7b5">LIGHTMAP_2D</a>:</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = image;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>             = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a>             = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfaad756db890aeaf2d33fa4d5bd0be5adc">CGEN_VERTEX</a>;</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a>           = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a3960eb96d46757dd6bec1c9b1c061e2b">AGEN_SKIP</a>;</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a>          = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609ad8bde17375d82c84fd3d1deacb6c18e0">GLS_DEPTHTEST_DISABLE</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a4629e9392a6fa30b3b8dfca9b7d7fb2d">GLS_SRCBLEND_SRC_ALPHA</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a50de0d49082484f366759a62c2f8e7a7">GLS_DSTBLEND_ONE_MINUS_SRC_ALPHA</a>;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    <span class="comment">// fullbright is disabled per atvi request</span></div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#aed53346f43c984f792de204496721aa6">LIGHTMAP_WHITEIMAGE</a>:</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    <span class="comment">// explicit colors at vertexes</span></div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="tr__local_8h.html#acccb0d46274afb7b3c39e9393075b12f">LIGHTMAP_BY_VERTEX</a>:</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = image;</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>             = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a>             = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa17132f4772be73d5a222521c450ba8ed">CGEN_EXACT_VERTEX</a>;</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">alphaGen</a>           = <a class="code" href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a3960eb96d46757dd6bec1c9b1c061e2b">AGEN_SKIP</a>;</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;        stages[0].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a>          = <a class="code" href="tr__shader_8c.html#aab9ed2981b91833632d1ef7e7e902217">implicitStateBits</a>;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <span class="comment">// use lightmap pass</span></div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;        <span class="comment">// masked or blended implicit shaders need texture first</span></div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tr__shader_8c.html#aab9ed2981b91833632d1ef7e7e902217">implicitStateBits</a> &amp; (<a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acebe515c42a789aafa3a3168c3036f95">GLS_ATEST_BITS</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5d35ebb8a04fcb88117cca5d357261af">GLS_SRCBLEND_BITS</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a0b70f0cd27eb851a6ca5edbadd07e570">GLS_DSTBLEND_BITS</a>))</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;        {</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = image;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>             = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a>             = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa3fd04125fe0240035c5da6bc2e31d310">CGEN_IDENTITY</a>;</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a>          = <a class="code" href="tr__shader_8c.html#aab9ed2981b91833632d1ef7e7e902217">implicitStateBits</a>;</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;            stages[1].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0]   = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a3641a2f9201c25daea2e70dd88e71681">lightmaps</a>[shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a>];</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;            stages[1].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#aff49fd5f8043dfa9f1f3d7ac3fc44330">isLightmap</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;            stages[1].<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>               = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;            stages[1].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a>               = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa3fd04125fe0240035c5da6bc2e31d310">CGEN_IDENTITY</a>;</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;            stages[1].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a>            = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a77d8851e0bc5022621c27190da81830a">GLS_DEFAULT</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609aae250dd615a1365a9675e90fda3ab72d">GLS_DEPTHFUNC_EQUAL</a>;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;        }</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        <span class="comment">// otherwise do standard lightmap + texture</span></div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;        {</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0]   = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a3641a2f9201c25daea2e70dd88e71681">lightmaps</a>[shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a>];</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#aff49fd5f8043dfa9f1f3d7ac3fc44330">isLightmap</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>               = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a>               = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa3fd04125fe0240035c5da6bc2e31d310">CGEN_IDENTITY</a>;</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;            stages[0].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a>            = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a77d8851e0bc5022621c27190da81830a">GLS_DEFAULT</a>;</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;            stages[1].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = image;</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;            stages[1].<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>             = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;            stages[1].<a class="code" href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">rgbGen</a>             = <a class="code" href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa3fd04125fe0240035c5da6bc2e31d310">CGEN_IDENTITY</a>;</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;            stages[1].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a>          = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a77d8851e0bc5022621c27190da81830a">GLS_DEFAULT</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a>;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;        }</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    }</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;}</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;</div><div class="line"><a name="l02779"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#ac8459afb5f9ddaadc120a357be3d1755"> 2779</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#ac8459afb5f9ddaadc120a357be3d1755">InitShader</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">int</span> lightmapIndex)</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;{</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <span class="comment">// clear the global shader</span></div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <a class="code" href="q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(&amp;shader, 0, <span class="keyword">sizeof</span>(shader));</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    <a class="code" href="q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(&amp;stages, 0, <span class="keyword">sizeof</span>(stages));</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    <a class="code" href="q__shared_8c.html#a70a2b0d67ad6af400d513cf1136af8dc">Q_strncpyz</a>(shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>, name, <span class="keyword">sizeof</span>(shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>));</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> = lightmapIndex;</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    <span class="keywordflow">for</span> (i = 0 ; i &lt; <a class="code" href="tr__local_8h.html#a8f9f17869dd24d22985f328decc076a8">MAX_SHADER_STAGES</a> ; i++)</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    {</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;        stages[i].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ac460ff874c73b07d93144cf5c760cb81">texMods</a> = texMods[i];</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    }</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;}</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;</div><div class="line"><a name="l02801"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#aebbe38d36a2d56121d8624f2fc4818ab"> 2801</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__shader_8c.html#aebbe38d36a2d56121d8624f2fc4818ab">FinishShader</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;{</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;    <span class="keywordtype">int</span>      stage, i;</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> hasLightmapStage = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    <span class="comment">// set sky stuff appropriate</span></div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a89f20ab7415b09dd1a5b2086a8a66214">isSky</a>)</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    {</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a9e7ce240847a86e342b266101947163f">SS_ENVIRONMENT</a>;</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    }</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;    <span class="comment">// set polygon offset</span></div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;    <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#aa40dd5dbff2a337571afae3a3459a19f">polygonOffset</a> &amp;&amp; shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> == 0.f)</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    {</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a46067896dd2e825dcf507129dd677742">SS_DECAL</a>;</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    }</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    <span class="comment">// set appropriate stage information</span></div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <span class="keywordflow">for</span> (stage = 0; stage &lt; <a class="code" href="tr__local_8h.html#a8f9f17869dd24d22985f328decc076a8">MAX_SHADER_STAGES</a>; stage++)</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    {</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;        <a class="code" href="structshaderStage__t.html">shaderStage_t</a> *pStage = &amp;stages[stage];</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;        <span class="keywordflow">if</span> (!pStage-&gt;<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>)</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;        {</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        }</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;        <span class="comment">// check for a missing texture</span></div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        <span class="keywordflow">if</span> (!pStage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0])</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;        {</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;Shader %s has a stage with no image\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;            pStage-&gt;<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;        }</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;        <span class="comment">// ditch this stage if it&#39;s detail and detail textures are disabled</span></div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;        <span class="keywordflow">if</span> (pStage-&gt;<a class="code" href="structshaderStage__t.html#a9795b546d2a820b7719be15e865e3de6">isDetail</a> &amp;&amp; !<a class="code" href="tr__init_8c.html#a8ee01d04c50ee40fc3201c6e1aa2ba8b">r_detailTextures</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;        {</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;            <span class="keywordflow">if</span> (stage &lt; (MAX_SHADER_STAGES - 1))</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;            {</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;                memmove(pStage, pStage + 1, <span class="keyword">sizeof</span>(*pStage) * (MAX_SHADER_STAGES - stage - 1));</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;                <span class="comment">// kill the last stage, since it&#39;s now a duplicate</span></div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;                <span class="keywordflow">for</span> (i = MAX_SHADER_STAGES - 1; i &gt; stage; i--)</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;                {</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;                    <span class="keywordflow">if</span> (stages[i].active)</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;                    {</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;                        <a class="code" href="q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(&amp;stages[i], 0, <span class="keyword">sizeof</span>(*pStage));</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;                    }</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;                }</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;                stage--;    <span class="comment">// the next stage is now the current stage, so check it again</span></div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;            }</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;            {</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;                <a class="code" href="q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(pStage, 0, <span class="keyword">sizeof</span>(*pStage));</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;            }</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;        }</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;        <span class="comment">// default texture coordinate generation</span></div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;        <span class="keywordflow">if</span> (pStage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#aff49fd5f8043dfa9f1f3d7ac3fc44330">isLightmap</a>)</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;        {</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;            <span class="keywordflow">if</span> (pStage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ae9e7dc0e6443b51059d0d07cccd00fcf">tcGen</a> == <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca8076ba3842371ed48d00d75dbc844d0b">TCGEN_BAD</a>)</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;            {</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;                pStage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ae9e7dc0e6443b51059d0d07cccd00fcf">tcGen</a> = <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca08a84aec97b7f5a7410e587ab07bd1a7">TCGEN_LIGHTMAP</a>;</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;            }</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;            hasLightmapStage = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;        }</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;        {</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;            <span class="keywordflow">if</span> (pStage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ae9e7dc0e6443b51059d0d07cccd00fcf">tcGen</a> == <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca8076ba3842371ed48d00d75dbc844d0b">TCGEN_BAD</a>)</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;            {</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;                pStage-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#ae9e7dc0e6443b51059d0d07cccd00fcf">tcGen</a> = <a class="code" href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca37acf280d9b867c360c0ca203e6bdfa2">TCGEN_TEXTURE</a>;</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;            }</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;        }</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;        <span class="comment">// determine sort order and fog color adjustment</span></div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;        <span class="keywordflow">if</span> ((pStage-&gt;<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a> &amp; (<a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5d35ebb8a04fcb88117cca5d357261af">GLS_SRCBLEND_BITS</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a0b70f0cd27eb851a6ca5edbadd07e570">GLS_DSTBLEND_BITS</a>)) &amp;&amp;</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;            (stages[0].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a> &amp; (<a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5d35ebb8a04fcb88117cca5d357261af">GLS_SRCBLEND_BITS</a> | <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a0b70f0cd27eb851a6ca5edbadd07e570">GLS_DSTBLEND_BITS</a>)))</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;        {</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;            <span class="keywordtype">int</span> blendSrcBits = pStage-&gt;<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a> &amp; <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5d35ebb8a04fcb88117cca5d357261af">GLS_SRCBLEND_BITS</a>;</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;            <span class="keywordtype">int</span> blendDstBits = pStage-&gt;<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a> &amp; <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a0b70f0cd27eb851a6ca5edbadd07e570">GLS_DSTBLEND_BITS</a>;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;            <span class="comment">// fog color adjustment only works for blend modes that have a contribution</span></div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;            <span class="comment">// that aproaches 0 as the modulate values aproach 0 --</span></div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;            <span class="comment">// GL_ONE, GL_ONE</span></div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;            <span class="comment">// GL_ZERO, GL_ONE_MINUS_SRC_COLOR</span></div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;            <span class="comment">// GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA</span></div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;            <span class="comment">// modulate, additive</span></div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;            <span class="keywordflow">if</span> (((blendSrcBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac">GLS_SRCBLEND_ONE</a>) &amp;&amp; (blendDstBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a3bb089e7ee899da0b4e9b4b17d716377">GLS_DSTBLEND_ONE</a>)) ||</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;                ((blendSrcBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609af509a0566baa77afd7d612455ee365a0">GLS_SRCBLEND_ZERO</a>) &amp;&amp; (blendDstBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609ad07517a56f680aff8c9b8a53037beec0">GLS_DSTBLEND_ONE_MINUS_SRC_COLOR</a>)))</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;            {</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;                pStage-&gt;<a class="code" href="structshaderStage__t.html#a9b6dc857ee93f699cf1b0d431358b774">adjustColorsForFog</a> = <a class="code" href="tr__local_8h.html#a4b3a68960d20a863d417f91ff1a5f929a52472b8a6b8d3b378338c4f88771ccec">ACFF_MODULATE_RGB</a>;</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;            }</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;            <span class="comment">// strict blend</span></div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((blendSrcBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a4629e9392a6fa30b3b8dfca9b7d7fb2d">GLS_SRCBLEND_SRC_ALPHA</a>) &amp;&amp; (blendDstBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a50de0d49082484f366759a62c2f8e7a7">GLS_DSTBLEND_ONE_MINUS_SRC_ALPHA</a>))</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;            {</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;                pStage-&gt;<a class="code" href="structshaderStage__t.html#a9b6dc857ee93f699cf1b0d431358b774">adjustColorsForFog</a> = <a class="code" href="tr__local_8h.html#a4b3a68960d20a863d417f91ff1a5f929aed66f9cea48f1e187395c9b0ef7930f9">ACFF_MODULATE_ALPHA</a>;</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;            }</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;            <span class="comment">// premultiplied alpha</span></div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((blendSrcBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac">GLS_SRCBLEND_ONE</a>) &amp;&amp; (blendDstBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a50de0d49082484f366759a62c2f8e7a7">GLS_DSTBLEND_ONE_MINUS_SRC_ALPHA</a>))</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;            {</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;                pStage-&gt;<a class="code" href="structshaderStage__t.html#a9b6dc857ee93f699cf1b0d431358b774">adjustColorsForFog</a> = <a class="code" href="tr__local_8h.html#a4b3a68960d20a863d417f91ff1a5f929ab78063942025e89434c5df10d3342b09">ACFF_MODULATE_RGBA</a>;</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;            }</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;            <span class="comment">// zero + blended alpha, one + blended alpha</span></div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (blendSrcBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a4629e9392a6fa30b3b8dfca9b7d7fb2d">GLS_SRCBLEND_SRC_ALPHA</a> || blendDstBits == <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a50de0d49082484f366759a62c2f8e7a7">GLS_DSTBLEND_ONE_MINUS_SRC_ALPHA</a>)</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;            {</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;                pStage-&gt;<a class="code" href="structshaderStage__t.html#a9b6dc857ee93f699cf1b0d431358b774">adjustColorsForFog</a> = <a class="code" href="tr__local_8h.html#a4b3a68960d20a863d417f91ff1a5f929aed66f9cea48f1e187395c9b0ef7930f9">ACFF_MODULATE_ALPHA</a>;</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;            }</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;            {</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;                <span class="comment">// we can&#39;t adjust this one correctly, so it won&#39;t be exactly correct in fog</span></div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;            }</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;            <span class="comment">// don&#39;t screw with sort order if this is a portal or environment</span></div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;            <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> == 0.f)</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;            {</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;                <span class="comment">// see through item, like a grill or grate</span></div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;                <span class="keywordflow">if</span> (pStage-&gt;<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a> &amp; <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a26c7b5847174a854a49f9b7db6dee3e2">GLS_DEPTHMASK_TRUE</a>)</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;                {</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;                    shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a7beaf01cbe0de9e837686d0038c631a0">SS_SEE_THROUGH</a>;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;                }</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;                {</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;                    shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a34fcab287406a5051f095dfd1d1e0cda">SS_BLEND0</a>;</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;                }</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;            }</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;        }</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    }</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    <span class="comment">// there are times when you will need to manually apply a sort to</span></div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <span class="comment">// opaque alpha tested shaders that have later blend passes</span></div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> == 0.f)</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    {</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a6b2c619db929f7bd5a69e8ef573e60cf">SS_OPAQUE</a>;</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    }</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    <span class="comment">// look for multitexture potential</span></div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    <span class="keywordflow">if</span> (stage &gt; 1 &amp;&amp; <a class="code" href="tr__shader_8c.html#a29562977973a8c3ebb5d5c495f46059d">CollapseMultitexture</a>())</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    {</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;        stage--;</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    }</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <span class="keywordflow">if</span> (shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> &gt;= 0 &amp;&amp; !hasLightmapStage)</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    {</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        <a class="code" href="tr__common_8h.html#a4ace57eb682bd3e6ac5fc82ae2e9bd3e">Ren_Developer</a>(<span class="stringliteral">&quot;WARNING: shader &#39;%s&#39; has lightmap but no lightmap stage!\n&quot;</span>, shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;        shader.<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> = <a class="code" href="tr__local_8h.html#a09448f021c14aabac18683284291174b">LIGHTMAP_NONE</a>;</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;    }</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;    <span class="comment">// compute number of passes</span></div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    shader.<a class="code" href="structshader__s.html#a6a1e4e84a91cda33a050c17e8377bef7">numUnfoggedPasses</a> = stage;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;    <span class="comment">// fogonly shaders don&#39;t have any normal passes</span></div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;    <span class="keywordflow">if</span> (stage == 0)</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    {</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;        shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a> = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a5387d32643e272a7aab7117d2fa0d235">SS_FOG</a>;</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    }</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    <span class="comment">// determine which stage iterator function is appropriate</span></div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    <a class="code" href="tr__shader_8c.html#abdd71375f16dbb0a6e34d5639d41c179">ComputeStageIteratorFunc</a>();</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    <span class="comment">// default back to no compression for next shader</span></div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tr__init_8c.html#a783d57e9d724bb0e296b4f0e9f7cab0d">r_extCompressedTextures</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a> == 2)</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    {</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;        <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a11d547fcf077a6bf5085585d14853d85">allowCompress</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    }</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tr__shader_8c.html#ab6d3fb4c10b6e127071890a047ff497b">GeneratePermanentShader</a>();</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;}</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;<span class="comment">//========================================================================================</span></div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;</div><div class="line"><a name="l02974"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a5d83d453d7b0e765932a11b0dc5c4a04"> 2974</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structdynamicshader.html">dynamicshader</a> <a class="code" href="structdynamicshader.html">dynamicshader_t</a>;</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;</div><div class="line"><a name="l02980"></a><span class="lineno"><a class="line" href="structdynamicshader.html"> 2980</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdynamicshader.html">dynamicshader</a></div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;{</div><div class="line"><a name="l02982"></a><span class="lineno"><a class="line" href="structdynamicshader.html#a5e455cca9d429ab62f3cf0b5fb4133c5"> 2982</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structdynamicshader.html#a5e455cca9d429ab62f3cf0b5fb4133c5">shadertext</a>;</div><div class="line"><a name="l02983"></a><span class="lineno"><a class="line" href="structdynamicshader.html#a1b87cfec5b0dd858dea52982a1ea102e"> 2983</a></span>&#160;    <a class="code" href="structdynamicshader.html">dynamicshader_t</a> *<a class="code" href="structdynamicshader.html#a1b87cfec5b0dd858dea52982a1ea102e">next</a>;</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;};</div><div class="line"><a name="l02985"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#aff663d15b92b099f10ce008263b33746"> 2985</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structdynamicshader.html">dynamicshader_t</a> *dshader = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;</div><div class="line"><a name="l02996"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#aef5482366b63b6e3c30eef12629d467c"> 2996</a></span>&#160;<a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> <a class="code" href="tr__shader_8c.html#aef5482366b63b6e3c30eef12629d467c">RE_LoadDynamicShader</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *shadername, <span class="keyword">const</span> <span class="keywordtype">char</span> *shadertext)</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;{</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>      *func_err = <span class="stringliteral">&quot;WARNING: RE_LoadDynamicShader&quot;</span>;</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <a class="code" href="structdynamicshader.html">dynamicshader_t</a> *dptr, *lastdptr;</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    <span class="keywordtype">char</span>            *q, *token;</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    <span class="keywordflow">if</span> (!shadername &amp;&amp; shadertext)</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    {</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;RE_LoadDynamicShader: %s called with NULL shadername and non-NULL shadertext:\n%s\n&quot;</span>, func_err, shadertext);</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    }</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <span class="keywordflow">if</span> (shadername &amp;&amp; strlen(shadername) &gt;= <a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>)</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    {</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;RE_LoadDynamicShader: %s shadername %s exceeds MAX_QPATH\n&quot;</span>, func_err, shadername);</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    }</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    <span class="comment">// empty the whole list</span></div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <span class="keywordflow">if</span> (!shadername &amp;&amp; !shadertext)</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    {</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;        dptr = <a class="code" href="tr__shader_8c.html#aff663d15b92b099f10ce008263b33746">dshader</a>;</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;        <span class="keywordflow">while</span> (dptr)</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;        {</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;            lastdptr = dptr-&gt;<a class="code" href="structdynamicshader.html#a1b87cfec5b0dd858dea52982a1ea102e">next</a>;</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;            <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a28c4af91358e17a3d3a3d2d05eff7578">Free</a>(dptr-&gt;<a class="code" href="structdynamicshader.html#a5e455cca9d429ab62f3cf0b5fb4133c5">shadertext</a>);</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;            <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a28c4af91358e17a3d3a3d2d05eff7578">Free</a>(dptr);</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;            dptr = lastdptr;</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;        }</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;        dshader = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    }</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;    <span class="comment">// walk list for existing shader to delete, or end of the list</span></div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    dptr     = <a class="code" href="tr__shader_8c.html#aff663d15b92b099f10ce008263b33746">dshader</a>;</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    lastdptr = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;    <span class="keywordflow">while</span> (dptr)</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    {</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;        q = dptr-&gt;<a class="code" href="structdynamicshader.html#a5e455cca9d429ab62f3cf0b5fb4133c5">shadertext</a>;</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(&amp;q, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;        <span class="keywordflow">if</span> ((token[0] != 0) &amp;&amp; !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, shadername))</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;        {</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;            <span class="comment">// request to nuke this dynamic shader</span></div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;            <span class="keywordflow">if</span> (!shadertext)</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;            {</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;                <span class="keywordflow">if</span> (!lastdptr)</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;                {</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;                    dshader = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;                }</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;                {</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;                    lastdptr-&gt;<a class="code" href="structdynamicshader.html#a1b87cfec5b0dd858dea52982a1ea102e">next</a> = dptr-&gt;<a class="code" href="structdynamicshader.html#a1b87cfec5b0dd858dea52982a1ea102e">next</a>;</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;                }</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;                <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a28c4af91358e17a3d3a3d2d05eff7578">Free</a>(dptr-&gt;<a class="code" href="structdynamicshader.html#a5e455cca9d429ab62f3cf0b5fb4133c5">shadertext</a>);</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;                <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a28c4af91358e17a3d3a3d2d05eff7578">Free</a>(dptr);</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;            }</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;            <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;RE_LoadDynamicShader: %s shader %s already exists!\n&quot;</span>, func_err, shadername);</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;        }</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;        lastdptr = dptr;</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;        dptr     = dptr-&gt;<a class="code" href="structdynamicshader.html#a1b87cfec5b0dd858dea52982a1ea102e">next</a>;</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    }</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;    <span class="comment">// cant add a new one with empty shadertext</span></div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    <span class="keywordflow">if</span> (!shadertext || !strlen(shadertext))</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    {</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;RE_LoadDynamicShader: %s new shader %s has NULL shadertext!\n&quot;</span>, func_err, shadername);</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    }</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    <span class="comment">// create a new shader</span></div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    dptr = (<a class="code" href="structdynamicshader.html">dynamicshader_t</a> *)<a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a3f2f49cacd03b754aa17590b65ca0228">Z_Malloc</a>(<span class="keyword">sizeof</span>(*dptr));</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    <span class="keywordflow">if</span> (!dptr)</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;    {</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;        <a class="code" href="tr__common_8h.html#a58ed4136a90ad8c1dcf1795785834c89">Ren_Fatal</a>(<span class="stringliteral">&quot;Couldn&#39;t allocate struct for dynamic shader %s&quot;</span>, shadername);</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    }</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;    <span class="keywordflow">if</span> (lastdptr)</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    {</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;        lastdptr-&gt;<a class="code" href="structdynamicshader.html#a1b87cfec5b0dd858dea52982a1ea102e">next</a> = dptr;</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    }</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    dptr-&gt;<a class="code" href="structdynamicshader.html#a5e455cca9d429ab62f3cf0b5fb4133c5">shadertext</a> = <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a3f2f49cacd03b754aa17590b65ca0228">Z_Malloc</a>(strlen(shadertext) + 1);</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    <span class="keywordflow">if</span> (!dptr-&gt;<a class="code" href="structdynamicshader.html#a5e455cca9d429ab62f3cf0b5fb4133c5">shadertext</a>)</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;    {</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;        <a class="code" href="tr__common_8h.html#a58ed4136a90ad8c1dcf1795785834c89">Ren_Fatal</a>(<span class="stringliteral">&quot;Couldn&#39;t allocate buffer for dynamic shader %s&quot;</span>, shadername);</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    }</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;    <a class="code" href="q__shared_8c.html#a70a2b0d67ad6af400d513cf1136af8dc">Q_strncpyz</a>(dptr-&gt;<a class="code" href="structdynamicshader.html#a5e455cca9d429ab62f3cf0b5fb4133c5">shadertext</a>, shadertext, strlen(shadertext) + 1);</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;    dptr-&gt;<a class="code" href="structdynamicshader.html#a1b87cfec5b0dd858dea52982a1ea102e">next</a> = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    <span class="keywordflow">if</span> (!dshader)</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;    {</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;        dshader = dptr;</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    }</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;    <span class="comment">//ri.Printf( PRINT_ALL, &quot;Loaded dynamic shader [%s] with shadertext [%s]\n&quot;, shadername, shadertext );</span></div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;}</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;</div><div class="line"><a name="l03104"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a65324e3e2cbd6297df4952fc8078bdbc"> 3104</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="tr__shader_8c.html#a65324e3e2cbd6297df4952fc8078bdbc">FindShaderInShaderText</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *shadername)</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;{</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    <span class="keywordtype">char</span> *p = <a class="code" href="tr__shader_8c.html#a0b7b5ade5914f295223f64cb09505ac0">s_shaderText</a>;</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    <span class="keywordtype">char</span> *token;</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;<span class="preprocessor">#ifdef SH_LOADTIMING</span></div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> total = 0;</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <span class="keywordtype">int</span> start = <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#ab5d3ec649e23d90ca4199d2bfc663e74">Milliseconds</a>();</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;<span class="preprocessor">#endif // SH_LOADTIMING</span></div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <span class="keywordflow">if</span> (!p)</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    {</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;FindShaderInShaderText WARNING: no shadertext found for shader &#39;%s&#39;\n&quot;</span>, shadername);</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    }</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    <span class="comment">// if we have any dynamic shaders loaded, check them first</span></div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <span class="keywordflow">if</span> (dshader)</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    {</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;        <a class="code" href="structdynamicshader.html">dynamicshader_t</a> *dptr = <a class="code" href="tr__shader_8c.html#aff663d15b92b099f10ce008263b33746">dshader</a>;</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;        <span class="keywordtype">char</span>            *q;</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;        <span class="keywordtype">int</span>             i = 0;</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;        <span class="keywordflow">while</span> (dptr)</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;        {</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;            <span class="keywordflow">if</span> (!dptr-&gt;<a class="code" href="structdynamicshader.html#a5e455cca9d429ab62f3cf0b5fb4133c5">shadertext</a> || !strlen(dptr-&gt;<a class="code" href="structdynamicshader.html#a5e455cca9d429ab62f3cf0b5fb4133c5">shadertext</a>))</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;            {</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: dynamic shader %s(%d) has no shadertext\n&quot;</span>, shadername, i);</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;            }</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;            {</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;                q = dptr-&gt;<a class="code" href="structdynamicshader.html#a5e455cca9d429ab62f3cf0b5fb4133c5">shadertext</a>;</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;                token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(&amp;q, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;                <span class="keywordflow">if</span> ((token[0] != 0) &amp;&amp; !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, shadername))</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;                {</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;<span class="preprocessor">#ifdef SH_LOADTIMING</span></div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;                    total += <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#ab5d3ec649e23d90ca4199d2bfc663e74">Milliseconds</a>() - start;</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;                    <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;Shader lookup dshader &#39;%s&#39;: %i, total: %i\n&quot;</span>, shadername, <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#ab5d3ec649e23d90ca4199d2bfc663e74">Milliseconds</a>() - start, total);</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;<span class="preprocessor">#endif // SH_LOADTIMING</span></div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;                    <span class="comment">//ri.Printf( PRINT_ALL, &quot;Found dynamic shader [%s] with shadertext [%s]\n&quot;, shadername, dptr-&gt;shadertext );</span></div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;                    <span class="keywordflow">return</span> q;</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;                }</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;            }</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;            i++;</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;            dptr = dptr-&gt;<a class="code" href="structdynamicshader.html#a1b87cfec5b0dd858dea52982a1ea102e">next</a>;</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;        }</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    }</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;    <span class="comment">// optimized shader loading</span></div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tr__init_8c.html#ad07dd4c678f4b44ba0e02c145533db5c">r_cacheShaders</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;    {</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;        <span class="comment">/*if (strstr( shadername, &quot;/&quot; ) &amp;&amp; !strstr( shadername, &quot;.&quot; ))*/</span></div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;        {</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span>    checksum;</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;            <a class="code" href="structshaderStringPointer__s.html">shaderStringPointer_t</a> *pShaderString;</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;            checksum = <a class="code" href="tr__shader_8c.html#accbfbb017e2efca51df4e2d767280b09">generateHashValue</a>(shadername);</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;            <span class="comment">// if it&#39;s known, skip straight to it&#39;s position</span></div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;            pShaderString = &amp;shaderChecksumLookup[checksum];</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;            <span class="keywordflow">while</span> (pShaderString &amp;&amp; pShaderString-&gt;<a class="code" href="structshaderStringPointer__s.html#a637304a0854fb097033d25d4d26768ec">pStr</a>)</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;            {</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;                p = pShaderString-&gt;<a class="code" href="structshaderStringPointer__s.html#a637304a0854fb097033d25d4d26768ec">pStr</a>;</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;                token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(&amp;p, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;                <span class="keywordflow">if</span> ((token[0] != 0) &amp;&amp; !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, shadername))</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;                {</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;<span class="preprocessor">#ifdef SH_LOADTIMING</span></div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;                    total += <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#ab5d3ec649e23d90ca4199d2bfc663e74">Milliseconds</a>() - start;</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;                    <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;Shader lookup cached &#39;%s&#39;: %i, total: %i\n&quot;</span>, shadername, <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#ab5d3ec649e23d90ca4199d2bfc663e74">Milliseconds</a>() - start, total);</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;<span class="preprocessor">#endif // SH_LOADTIMING</span></div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;                    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;                }</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;                pShaderString = pShaderString-&gt;<a class="code" href="structshaderStringPointer__s.html#a3fa910376850a0d63ae2a830fa49591c">next</a>;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;            }</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;            </div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;            <span class="comment">// it&#39;s not even in our list, so it mustn&#39;t exist</span></div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;<span class="preprocessor">#ifdef SH_LOADTIMING</span></div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;            total += <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#ab5d3ec649e23d90ca4199d2bfc663e74">Milliseconds</a>() - start;</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;Shader lookup cached failed &#39;%s&#39;: %i, total: %i\n&quot;</span>, shadername, <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#ab5d3ec649e23d90ca4199d2bfc663e74">Milliseconds</a>() - start, total);</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;<span class="preprocessor">#endif // SH_LOADTIMING</span></div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;        }</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    }</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <span class="comment">// look for label</span></div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    <span class="comment">// note that this could get confused if a shader name is used inside</span></div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;    <span class="comment">// another shader definition</span></div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;    {</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(&amp;p, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;        <span class="keywordflow">if</span> (token[0] == 0)</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;        {</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;        }</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(token, shadername))</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;        {</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;<span class="preprocessor">#ifdef SH_LOADTIMING</span></div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;            total += <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#ab5d3ec649e23d90ca4199d2bfc663e74">Milliseconds</a>() - start;</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;Shader lookup label &#39;%s&#39;: %i, total: %i\n&quot;</span>, shadername, <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#ab5d3ec649e23d90ca4199d2bfc663e74">Milliseconds</a>() - start, total);</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;<span class="preprocessor">#endif // SH_LOADTIMING</span></div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;            <span class="keywordflow">return</span> p;</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;        }</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;        <a class="code" href="q__shared_8c.html#aca778d04cc90b4085a20b901dfbf33df">SkipBracedSection</a>(&amp;p);</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    }</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;<span class="preprocessor">#ifdef SH_LOADTIMING</span></div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;    total += <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#ab5d3ec649e23d90ca4199d2bfc663e74">Milliseconds</a>() - start;</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;Shader lookup &#39;%s&#39; failed: %i, total: %i\n&quot;</span>, shadername, <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#ab5d3ec649e23d90ca4199d2bfc663e74">Milliseconds</a>() - start, total);</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;<span class="preprocessor">#endif // SH_LOADTIMING</span></div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;}</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;</div><div class="line"><a name="l03229"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#ae312db0f08696bf6ac77c7b0ed5ccc4b"> 3229</a></span>&#160;<a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__shader_8c.html#ae312db0f08696bf6ac77c7b0ed5ccc4b">R_FindShaderByName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;{</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <span class="keywordtype">char</span>     strippedName[<a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a>;</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;    <a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    <span class="keywordflow">if</span> ((name == <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) || (name[0] == 0))</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    {</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;R_FindShaderByName WARNING: Name is empty - returning default shader\n&quot;</span>);</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aac35656af63d3b2b5057189ed4c45a3e">defaultShader</a>;</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;    }</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <a class="code" href="q__shared_8c.html#ac5559db84415463975aeaa060f618f7d">COM_StripExtension</a>(name, strippedName, <span class="keyword">sizeof</span>(strippedName));</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <a class="code" href="q__shared_8c.html#a4ebbf2d87debcef0d3ecd2fd4fe753f9">COM_FixPath</a>(strippedName);</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    hash = <a class="code" href="tr__shader_8c.html#accbfbb017e2efca51df4e2d767280b09">generateHashValue</a>(strippedName);</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;    <span class="comment">// see if the shader is already loaded</span></div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;    <span class="keywordflow">for</span> (sh = hashTable[hash]; <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>; sh = sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>)</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    {</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;        <span class="comment">// NOTE: if there was no shader or image available with the name strippedName</span></div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;        <span class="comment">// then a default shader is created with lightmapIndex == LIGHTMAP_NONE, so we</span></div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;        <span class="comment">// have to check all default shaders otherwise for every call to R_FindShader</span></div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;        <span class="comment">// with that same strippedName a new default shader is created.</span></div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(sh-&gt;<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>, strippedName) == 0)</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;        {</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;            <span class="comment">// match found</span></div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;        }</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    }</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aac35656af63d3b2b5057189ed4c45a3e">defaultShader</a>;</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;}</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;</div><div class="line"><a name="l03263"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a8260bf2c69dcde09c3c2ea21ca07a7ec"> 3263</a></span>&#160;<span class="preprocessor">#define EXTERNAL_LIGHTMAP   &quot;lm_%04d.tga&quot;    // THIS MUST BE IN SYNC WITH Q3MAP2</span></div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;</div><div class="line"><a name="l03270"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a9b38f8845bb09721d2d99b61fe6e70f8"> 3270</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a9b38f8845bb09721d2d99b61fe6e70f8">R_FindLightmap</a>(<span class="keywordtype">int</span> *lightmapIndex)</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;{</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;    <a class="code" href="structimage__s.html">image_t</a> *image;</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;    <span class="keywordtype">char</span>    fileName[<a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;    <span class="comment">// don&#39;t fool with bogus lightmap indexes</span></div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    <span class="keywordflow">if</span> (*lightmapIndex &lt; 0)</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    {</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    }</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    <span class="comment">// does this lightmap already exist?</span></div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    <span class="keywordflow">if</span> (*lightmapIndex &lt; <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ac761ba2aae32d561420f834bf99bec9d">numLightmaps</a> &amp;&amp; <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a3641a2f9201c25daea2e70dd88e71681">lightmaps</a>[*lightmapIndex] != <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    {</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;    }</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    <span class="comment">// bail if no world dir</span></div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a6358308720e31e20f6848d1821ff16ce">worldDir</a> == <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    {</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;        *lightmapIndex = <a class="code" href="tr__local_8h.html#acccb0d46274afb7b3c39e9393075b12f">LIGHTMAP_BY_VERTEX</a>;</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    }</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    <span class="comment">// sync up render thread, because we&#39;re going to have to load an image</span></div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    <a class="code" href="tr__cmds_8c.html#aba8115c5cabdc2f4c577b6ad30a9f357">R_IssuePendingRenderCommands</a>();</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;    <span class="comment">// attempt to load an external lightmap</span></div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    sprintf(fileName, <span class="stringliteral">&quot;%s/&quot;</span> <a class="code" href="tr__shader_8c.html#a8260bf2c69dcde09c3c2ea21ca07a7ec">EXTERNAL_LIGHTMAP</a>, <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a6358308720e31e20f6848d1821ff16ce">worldDir</a>, *lightmapIndex);</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    image = <a class="code" href="tr__image_8c.html#a8aa4c79f547ccb517411a9cd3e76d990">R_FindImageFile</a>(fileName, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, GL_CLAMP_TO_EDGE, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    <span class="keywordflow">if</span> (image == <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;    {</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        *lightmapIndex = <a class="code" href="tr__local_8h.html#acccb0d46274afb7b3c39e9393075b12f">LIGHTMAP_BY_VERTEX</a>;</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;    }</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <span class="comment">// add it to the lightmap list</span></div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    <span class="keywordflow">if</span> (*lightmapIndex &gt;= <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ac761ba2aae32d561420f834bf99bec9d">numLightmaps</a>)</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    {</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;        <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ac761ba2aae32d561420f834bf99bec9d">numLightmaps</a> = *lightmapIndex + 1;</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    }</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a3641a2f9201c25daea2e70dd88e71681">lightmaps</a>[*lightmapIndex] = image;</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;}</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;</div><div class="line"><a name="l03342"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#a0c3a13742d428268823a68cb4a1393c3"> 3342</a></span>&#160;<a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__shader_8c.html#a0c3a13742d428268823a68cb4a1393c3">R_FindShader</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">int</span> lightmapIndex, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> mipRawImage)</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;{</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;    <span class="keywordtype">char</span>     strippedName[<a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;    <span class="keywordtype">char</span>     fileName[<a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a>;</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;    <span class="keywordtype">char</span>     *shaderText;</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;    <a class="code" href="structimage__s.html">image_t</a>  *image;</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;    <a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;    <span class="keywordflow">if</span> (name[0] == 0)</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;    {</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aac35656af63d3b2b5057189ed4c45a3e">defaultShader</a>;</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;    }</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;    <span class="comment">// validate lightmap index</span></div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    <a class="code" href="tr__shader_8c.html#a9b38f8845bb09721d2d99b61fe6e70f8">R_FindLightmap</a>(&amp;lightmapIndex);</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;    <a class="code" href="q__shared_8c.html#ac5559db84415463975aeaa060f618f7d">COM_StripExtension</a>(name, strippedName, <span class="keyword">sizeof</span>(strippedName));</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    <a class="code" href="q__shared_8c.html#a4ebbf2d87debcef0d3ecd2fd4fe753f9">COM_FixPath</a>(strippedName);</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    hash = <a class="code" href="tr__shader_8c.html#accbfbb017e2efca51df4e2d767280b09">generateHashValue</a>(strippedName);</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    <span class="comment">// see if the shader is already loaded</span></div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;<span class="preprocessor">#if 1</span></div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <span class="keywordflow">for</span> (sh = hashTable[hash]; <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>; sh = sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>)</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;    {</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;        <span class="comment">// index by name</span></div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;        <span class="comment">// the original way was correct</span></div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;        <span class="keywordflow">if</span> (sh-&gt;<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> == lightmapIndex &amp;&amp;</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;            !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(sh-&gt;<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>, strippedName))</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;        {</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;            <span class="comment">// match found</span></div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;        }</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;        <span class="comment">// modified this so we don&#39;t keep trying to load an invalid lightmap shader</span></div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;        <span class="keywordflow">if</span> (((sh-&gt;<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> == lightmapIndex) || (sh-&gt;<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> &lt; 0 &amp;&amp; lightmapIndex &gt;= 0)) &amp;&amp;</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;            !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(sh-&gt;<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>, strippedName))</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;        {</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;            <span class="comment">// match found</span></div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;        }</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;    }</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;    <span class="keywordflow">for</span> (sh = hashTable[hash]; <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>; sh = sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>)</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;    {</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;        <span class="comment">// NOTE: if there was no shader or image available with the name strippedName</span></div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;        <span class="comment">// then a default shader is created with lightmapIndex == LIGHTMAP_NONE, so we</span></div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;        <span class="comment">// have to check all default shaders otherwise for every call to R_FindShader</span></div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;        <span class="comment">// with that same strippedName a new default shader is created.</span></div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;        <span class="keywordflow">if</span> ((sh-&gt;<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> == lightmapIndex || sh-&gt;<a class="code" href="structshader__s.html#a2af382c428d935fb204790586efcd0ca">defaultShader</a>) &amp;&amp;</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;            !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(sh-&gt;<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>, strippedName))</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;        {</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;            <span class="comment">// match found</span></div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;        }</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;    }</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;    <span class="comment">// check the cache</span></div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;    <span class="comment">// assignment used as truth value</span></div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;    <span class="comment">// - don&#39;t cache shaders using lightmaps</span></div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;    <span class="keywordflow">if</span> (lightmapIndex &lt; 0)</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;    {</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;        sh = <a class="code" href="tr__shader_8c.html#ae8e3c43121c29e2c85f25d66a7b5f2d5">R_FindCachedShader</a>(strippedName, lightmapIndex, hash);</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;        <span class="keywordflow">if</span> (sh != <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;        {</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;        }</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;    }</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;    <a class="code" href="tr__shader_8c.html#ac8459afb5f9ddaadc120a357be3d1755">InitShader</a>(strippedName, lightmapIndex);</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;    <span class="comment">// FIXME: set these &quot;need&quot; values apropriately</span></div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;    shader.<a class="code" href="structshader__s.html#a61742fb0cad6c2ef67e0c59c7c3c84d1">needsNormal</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;    shader.<a class="code" href="structshader__s.html#a0617231a29d5a121cb1f240f7a64400c">needsST1</a>    = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;    shader.<a class="code" href="structshader__s.html#afadb8a30f5d1ae9bed786cc2824a9312">needsST2</a>    = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;    shader.<a class="code" href="structshader__s.html#a5003d5a68c72e2b9ce5f776efc7593dc">needsColor</a>  = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;    <span class="comment">// default to no implicit mappings</span></div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    <a class="code" href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">implicitMap</a>[0]    = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    <a class="code" href="tr__shader_8c.html#aab9ed2981b91833632d1ef7e7e902217">implicitStateBits</a> = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a77d8851e0bc5022621c27190da81830a">GLS_DEFAULT</a>;</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    <a class="code" href="tr__shader_8c.html#a52b8d89d4ebdb10b979fbbf4cfc5b9e4">implicitCullType</a>  = <a class="code" href="tr__local_8h.html#a1480f4cb61af8bab511fad028c084b20abdaa968e7a13ee0c5e8426ee732a5736">CT_FRONT_SIDED</a>;</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    <span class="comment">// attempt to define shader from an explicit parameter file</span></div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    shaderText = <a class="code" href="tr__shader_8c.html#a65324e3e2cbd6297df4952fc8078bdbc">FindShaderInShaderText</a>(strippedName);</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    <span class="keywordflow">if</span> (shaderText)</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    {</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;        <span class="comment">// enable this when building a pak file to get a global list</span></div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;        <span class="comment">// of all explicit shaders</span></div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tr__init_8c.html#a7e151f8b7e5a2df0a3ac4d57475cd569">r_printShaders</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;        {</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;*SHADER* %s\n&quot;</span>, name);</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;        }</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="tr__shader_8c.html#a6567fbeacf4d3bc769163e59b44e9681">ParseShader</a>(&amp;shaderText))</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;        {</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;            <span class="comment">// had errors, so use default shader</span></div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;            shader.<a class="code" href="structshader__s.html#a2af382c428d935fb204790586efcd0ca">defaultShader</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;            sh                   = <a class="code" href="tr__shader_8c.html#aebbe38d36a2d56121d8624f2fc4818ab">FinishShader</a>();</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;        }</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;        <span class="comment">// allow implicit mappings</span></div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">implicitMap</a>[0] == <span class="charliteral">&#39;\0&#39;</span>)</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;        {</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;            sh = <a class="code" href="tr__shader_8c.html#aebbe38d36a2d56121d8624f2fc4818ab">FinishShader</a>();</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;        }</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    }</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;    <span class="comment">// allow implicit mapping (&#39;-&#39; = use shader name)</span></div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">implicitMap</a>[0] == <span class="charliteral">&#39;\0&#39;</span> || <a class="code" href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">implicitMap</a>[0] == <span class="charliteral">&#39;-&#39;</span>)</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;    {</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;        <a class="code" href="q__shared_8c.html#a70a2b0d67ad6af400d513cf1136af8dc">Q_strncpyz</a>(fileName, name, <span class="keyword">sizeof</span>(fileName));</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;    }</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;    {</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;        <a class="code" href="q__shared_8c.html#a70a2b0d67ad6af400d513cf1136af8dc">Q_strncpyz</a>(fileName, <a class="code" href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">implicitMap</a>, <span class="keyword">sizeof</span>(fileName));</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    }</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;    <a class="code" href="q__shared_8c.html#ae6426bdf1634fb3553e1d73bad95fd7f">COM_DefaultExtension</a>(fileName, <span class="keyword">sizeof</span>(fileName), <span class="stringliteral">&quot;.tga&quot;</span>);</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    <span class="comment">// implicit shaders were breaking nopicmip/nomipmaps</span></div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;    <span class="keywordflow">if</span> (!mipRawImage)</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;    {</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;        shader.<a class="code" href="structshader__s.html#aaedbf92720608037ecec267bc6ae8a30">noMipMaps</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;        shader.<a class="code" href="structshader__s.html#a8d3a2544c772c37f23d29cc2b07de54d">noPicMip</a>  = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;    }</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;    <span class="comment">// if not defined in the in-memory shader descriptions,</span></div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;    <span class="comment">// look for a single TGA, BMP, or PCX</span></div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;    image = <a class="code" href="tr__image_8c.html#a8aa4c79f547ccb517411a9cd3e76d990">R_FindImageFile</a>(fileName, !shader.<a class="code" href="structshader__s.html#aaedbf92720608037ecec267bc6ae8a30">noMipMaps</a>, !shader.<a class="code" href="structshader__s.html#a8d3a2544c772c37f23d29cc2b07de54d">noPicMip</a>, mipRawImage ? GL_REPEAT : GL_CLAMP_TO_EDGE, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;    <span class="keywordflow">if</span> (!image)</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;    {</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;        <a class="code" href="tr__common_8h.html#a4ace57eb682bd3e6ac5fc82ae2e9bd3e">Ren_Developer</a>(<span class="stringliteral">&quot;WARNING: Couldn&#39;t find image for shader %s\n&quot;</span>, name);</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;        shader.<a class="code" href="structshader__s.html#a2af382c428d935fb204790586efcd0ca">defaultShader</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__shader_8c.html#aebbe38d36a2d56121d8624f2fc4818ab">FinishShader</a>();</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;    }</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;    <span class="comment">// set default stages (removing redundant code)</span></div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;    <a class="code" href="tr__shader_8c.html#aebab19fec7c981d20371396f9f58aa05">SetImplicitShaderStages</a>(image);</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tr__shader_8c.html#aebbe38d36a2d56121d8624f2fc4818ab">FinishShader</a>();</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;}</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;</div><div class="line"><a name="l03498"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#a1caf9aa9aadb12cf22d72ee5b7bd2ca7"> 3498</a></span>&#160;<a class="code" href="q__shared_8h.html#aa46eefcd4cf4d61e2fa13b5ff45f6847">qhandle_t</a> <a class="code" href="tr__shader_8c.html#a1caf9aa9aadb12cf22d72ee5b7bd2ca7">RE_RegisterShaderFromImage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">int</span> lightmapIndex, <a class="code" href="structimage__s.html">image_t</a> *image, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> mipRawImage)</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;{</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a>;</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;    <a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    hash = <a class="code" href="tr__shader_8c.html#accbfbb017e2efca51df4e2d767280b09">generateHashValue</a>(name);</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;    <span class="comment">// see if the shader is already loaded</span></div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;    <span class="keywordflow">for</span> (sh = hashTable[hash]; <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>; sh = sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>)</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;    {</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;        <span class="comment">// NOTE: if there was no shader or image available with the name strippedName</span></div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;        <span class="comment">// then a default shader is created with lightmapIndex == LIGHTMAP_NONE, so we</span></div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;        <span class="comment">// have to check all default shaders otherwise for every call to R_FindShader</span></div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;        <span class="comment">// with that same strippedName a new default shader is created.</span></div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;        <span class="keywordflow">if</span> ((sh-&gt;<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> == lightmapIndex || sh-&gt;<a class="code" href="structshader__s.html#a2af382c428d935fb204790586efcd0ca">defaultShader</a>) &amp;&amp;</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;            <span class="comment">// index by name</span></div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;            !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(sh-&gt;<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>, name))</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;        {</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;            <span class="comment">// match found</span></div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;            <span class="keywordflow">return</span> sh-&gt;<a class="code" href="structshader__s.html#aef63f5e4a3db9c23201ef10d62cb42f5">index</a>;</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;        }</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;    }</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;    <span class="comment">// clear the global shader</span></div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;    <a class="code" href="tr__shader_8c.html#ac8459afb5f9ddaadc120a357be3d1755">InitShader</a>(name, lightmapIndex);</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;    <span class="comment">// FIXME: set these &quot;need&quot; values apropriately</span></div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;    shader.<a class="code" href="structshader__s.html#a61742fb0cad6c2ef67e0c59c7c3c84d1">needsNormal</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;    shader.<a class="code" href="structshader__s.html#a0617231a29d5a121cb1f240f7a64400c">needsST1</a>    = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;    shader.<a class="code" href="structshader__s.html#afadb8a30f5d1ae9bed786cc2824a9312">needsST2</a>    = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;    shader.<a class="code" href="structshader__s.html#a5003d5a68c72e2b9ce5f776efc7593dc">needsColor</a>  = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;    <span class="comment">// set default stages (removing redundant code)</span></div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;    <a class="code" href="tr__shader_8c.html#aebab19fec7c981d20371396f9f58aa05">SetImplicitShaderStages</a>(image);</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;    sh = <a class="code" href="tr__shader_8c.html#aebbe38d36a2d56121d8624f2fc4818ab">FinishShader</a>();</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;    <span class="keywordflow">return</span> sh-&gt;<a class="code" href="structshader__s.html#aef63f5e4a3db9c23201ef10d62cb42f5">index</a>;</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;}</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;</div><div class="line"><a name="l03548"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#a8a9eed080ae1cf52c7128a52e4e07a50"> 3548</a></span>&#160;<a class="code" href="q__shared_8h.html#aa46eefcd4cf4d61e2fa13b5ff45f6847">qhandle_t</a> <a class="code" href="tr__shader_8c.html#a8a9eed080ae1cf52c7128a52e4e07a50">RE_RegisterShaderLightMap</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">int</span> lightmapIndex)</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;{</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;    <a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;    <span class="keywordflow">if</span> (strlen(name) &gt;= <a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>)</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;    {</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;        <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;Shader name exceeds MAX_QPATH\n&quot;</span>);</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;    }</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;    sh = <a class="code" href="tr__shader_8c.html#a0c3a13742d428268823a68cb4a1393c3">R_FindShader</a>(name, lightmapIndex, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;    <span class="comment">// we want to return 0 if the shader failed to</span></div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;    <span class="comment">// load for some reason, but R_FindShader should</span></div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;    <span class="comment">// still keep a name allocated for it, so if</span></div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;    <span class="comment">// something calls RE_RegisterShaderLightMap again with</span></div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;    <span class="comment">// the same name, we don&#39;t try looking for it again</span></div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;    <span class="keywordflow">if</span> (sh-&gt;<a class="code" href="structshader__s.html#a2af382c428d935fb204790586efcd0ca">defaultShader</a>)</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    {</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;RE_RegisterShaderLightMap WARNING: shader &#39;%s&#39; not found - using default shader\n&quot;</span>, name);</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    }</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;    <span class="keywordflow">return</span> sh-&gt;<a class="code" href="structshader__s.html#aef63f5e4a3db9c23201ef10d62cb42f5">index</a>;</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;}</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;</div><div class="line"><a name="l03584"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#a8dd6744600e77daf2ae178b0f557e7e9"> 3584</a></span>&#160;<a class="code" href="q__shared_8h.html#aa46eefcd4cf4d61e2fa13b5ff45f6847">qhandle_t</a> <a class="code" href="tr__shader_8c.html#a8dd6744600e77daf2ae178b0f557e7e9">RE_RegisterShader</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;{</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;    <a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;    <span class="keywordflow">if</span> (strlen(name) &gt;= <a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>)</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;    {</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;RE_RegisterShader WARNING: shader name exceeds MAX_QPATH\n&quot;</span>);</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;    }</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;    sh = <a class="code" href="tr__shader_8c.html#a0c3a13742d428268823a68cb4a1393c3">R_FindShader</a>(name, <a class="code" href="tr__local_8h.html#ae4e9045737fe24f4ce7eb31f2344f7b5">LIGHTMAP_2D</a>, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;    <span class="comment">// we want to return 0 if the shader failed to</span></div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;    <span class="comment">// load for some reason, but R_FindShader should</span></div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;    <span class="comment">// still keep a name allocated for it, so if</span></div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;    <span class="comment">// something calls RE_RegisterShader again with</span></div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;    <span class="comment">// the same name, we don&#39;t try looking for it again</span></div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;    <span class="keywordflow">if</span> (sh-&gt;<a class="code" href="structshader__s.html#a2af382c428d935fb204790586efcd0ca">defaultShader</a>)</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;    {</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;RE_RegisterShader WARNING: shader &#39;%s&#39; not found - using default shader\n&quot;</span>, name);</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;    }</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;    <span class="keywordflow">return</span> sh-&gt;<a class="code" href="structshader__s.html#aef63f5e4a3db9c23201ef10d62cb42f5">index</a>;</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;}</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;</div><div class="line"><a name="l03617"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#a8fdf7ae7711df49a80e9cc706c0e3ce9"> 3617</a></span>&#160;<a class="code" href="q__shared_8h.html#aa46eefcd4cf4d61e2fa13b5ff45f6847">qhandle_t</a> <a class="code" href="tr__shader_8c.html#a8fdf7ae7711df49a80e9cc706c0e3ce9">RE_RegisterShaderNoMip</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;{</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;    <a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;    <span class="keywordflow">if</span> (strlen(name) &gt;= <a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>)</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;    {</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;RE_RegisterShaderNoMip WARNING: shader name exceeds MAX_QPATH\n&quot;</span>);</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;    }</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;    sh = <a class="code" href="tr__shader_8c.html#a0c3a13742d428268823a68cb4a1393c3">R_FindShader</a>(name, <a class="code" href="tr__local_8h.html#ae4e9045737fe24f4ce7eb31f2344f7b5">LIGHTMAP_2D</a>, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;    <span class="comment">// we want to return 0 if the shader failed to</span></div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;    <span class="comment">// load for some reason, but R_FindShader should</span></div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;    <span class="comment">// still keep a name allocated for it, so if</span></div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;    <span class="comment">// something calls RE_RegisterShader again with</span></div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;    <span class="comment">// the same name, we don&#39;t try looking for it again</span></div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;    <span class="keywordflow">if</span> (sh-&gt;<a class="code" href="structshader__s.html#a2af382c428d935fb204790586efcd0ca">defaultShader</a>)</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;    {</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;        <a class="code" href="tr__common_8h.html#a4ace57eb682bd3e6ac5fc82ae2e9bd3e">Ren_Developer</a>(<span class="stringliteral">&quot;RE_RegisterShaderNoMip WARNING: shader &#39;%s&#39; not found - using default shader\n&quot;</span>, name);</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;    }</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;    <span class="keywordflow">return</span> sh-&gt;<a class="code" href="structshader__s.html#aef63f5e4a3db9c23201ef10d62cb42f5">index</a>;</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;}</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;</div><div class="line"><a name="l03649"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#a379ee38303eb2bfeb9a0273de9228f19"> 3649</a></span>&#160;<a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__shader_8c.html#a379ee38303eb2bfeb9a0273de9228f19">R_GetShaderByHandle</a>(<a class="code" href="q__shared_8h.html#aa46eefcd4cf4d61e2fa13b5ff45f6847">qhandle_t</a> hShader)</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;{</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;    <span class="keywordflow">if</span> (hShader &lt; 0)</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;    {</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;        <a class="code" href="tr__common_8h.html#a4ace57eb682bd3e6ac5fc82ae2e9bd3e">Ren_Developer</a>(<span class="stringliteral">&quot;R_GetShaderByHandle: out of range hShader &#39;%d&#39;\n&quot;</span>, hShader); <span class="comment">// FIXME name</span></div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aac35656af63d3b2b5057189ed4c45a3e">defaultShader</a>;</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;    }</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <span class="keywordflow">if</span> (hShader &gt;= <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a>)</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;    {</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;        <a class="code" href="tr__common_8h.html#a4ace57eb682bd3e6ac5fc82ae2e9bd3e">Ren_Developer</a>(<span class="stringliteral">&quot;R_GetShaderByHandle: out of range hShader &#39;%d&#39;\n&quot;</span>, hShader);</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aac35656af63d3b2b5057189ed4c45a3e">defaultShader</a>;</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;    }</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ac637e5669ddac0b56802fc22ee762425">shaders</a>[hShader];</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;}</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;</div><div class="line"><a name="l03668"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#acc7c00663d190d26219aacc43b1adb99"> 3668</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#acc7c00663d190d26219aacc43b1adb99">R_ShaderList_f</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;{</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;    <span class="keywordtype">int</span>      i;</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;    <span class="keywordtype">int</span>      count = 0;</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;    <a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__shader_8c.html#add8b99b73cfef6fc7963980f9db455de">shader</a>;</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;    <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;-----------------------\n&quot;</span>);</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;    <span class="keywordflow">for</span> (i = 0 ; i &lt; <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a> ; i++)</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;    {</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a24b78f445e9bd6484b2b5f3cc48e5192">Cmd_Argc</a>() &gt; 1)</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;        {</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;            shader = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a62f176b8fd5c75131eb4adb78df8589b">sortedShaders</a>[i];</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;        }</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;        {</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;            shader = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ac637e5669ddac0b56802fc22ee762425">shaders</a>[i];</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;        }</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;        <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;%i &quot;</span>, shader-&gt;<a class="code" href="structshader__s.html#a6a1e4e84a91cda33a050c17e8377bef7">numUnfoggedPasses</a>);</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;        <span class="keywordflow">if</span> (shader-&gt;<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> &gt;= 0)</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;        {</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;L &quot;</span>);</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;        }</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;        {</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;  &quot;</span>);</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;        }</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;        <span class="keywordflow">if</span> (shader-&gt;<a class="code" href="structshader__s.html#a8a2dbab0cb598e82bd1866b0bf300aa6">multitextureEnv</a> == GL_ADD)</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;        {</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;MT(a) &quot;</span>);</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;        }</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shader-&gt;<a class="code" href="structshader__s.html#a8a2dbab0cb598e82bd1866b0bf300aa6">multitextureEnv</a> == GL_MODULATE)</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;        {</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;MT(m) &quot;</span>);</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;        }</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shader-&gt;<a class="code" href="structshader__s.html#a8a2dbab0cb598e82bd1866b0bf300aa6">multitextureEnv</a> == GL_DECAL)</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;        {</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;MT(d) &quot;</span>);</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;        }</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;        {</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;      &quot;</span>);</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;        }</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;        <span class="keywordflow">if</span> (shader-&gt;<a class="code" href="structshader__s.html#aabd84064b69c81d8ff686d48cfac82d6">explicitlyDefined</a>)</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;        {</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;E &quot;</span>);</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;        }</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;        {</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;  &quot;</span>);</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;        }</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;        <span class="keywordflow">if</span> (shader-&gt;<a class="code" href="structshader__s.html#acf1494aadd7b1831bbeef2989f25f379">optimalStageIteratorFunc</a> == <a class="code" href="tr__local_8h.html#abc4424e8b066b9fdb3a369fe35d9e1a8">RB_StageIteratorGeneric</a>)</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;        {</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;gen &quot;</span>);</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;        }</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shader-&gt;<a class="code" href="structshader__s.html#acf1494aadd7b1831bbeef2989f25f379">optimalStageIteratorFunc</a> == <a class="code" href="tr__local_8h.html#a8493c1d2f9f4c2ddd3b3abda295d680a">RB_StageIteratorSky</a>)</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;        {</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;sky &quot;</span>);</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;        }</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shader-&gt;<a class="code" href="structshader__s.html#acf1494aadd7b1831bbeef2989f25f379">optimalStageIteratorFunc</a> == <a class="code" href="tr__local_8h.html#a6ee900266c2268e950038aa773b30b3d">RB_StageIteratorLightmappedMultitexture</a>)</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;        {</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;lmmt&quot;</span>);</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;        }</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shader-&gt;<a class="code" href="structshader__s.html#acf1494aadd7b1831bbeef2989f25f379">optimalStageIteratorFunc</a> == <a class="code" href="tr__local_8h.html#adc65c268c034252fe71d66175cb41a9d">RB_StageIteratorVertexLitTexture</a>)</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;        {</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;vlt &quot;</span>);</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;        }</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;        {</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;    &quot;</span>);</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;        }</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;        <span class="keywordflow">if</span> (shader-&gt;<a class="code" href="structshader__s.html#a2af382c428d935fb204790586efcd0ca">defaultShader</a>)</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;        {</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;: %s (DEFAULTED)\n&quot;</span>, shader-&gt;<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;        }</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;        {</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;            <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;: %s\n&quot;</span>, shader-&gt;<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>);</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;        }</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;        count++;</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    }</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;    <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;%i total shaders\n&quot;</span>, count);</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;------------------\n&quot;</span>);</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;}</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;<span class="comment">// optimized shader loading</span></div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;</div><div class="line"><a name="l03761"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a371658349f67d74fd68c8a8f1db84481"> 3761</a></span>&#160;<span class="preprocessor">#define MAX_SHADER_STRING_POINTERS  100000</span></div><div class="line"><a name="l03762"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a8f0fb6b4240efa8633455cf8c0fc5907"> 3762</a></span>&#160;<a class="code" href="structshaderStringPointer__s.html">shaderStringPointer_t</a> shaderStringPointerList[<a class="code" href="tr__shader_8c.html#a371658349f67d74fd68c8a8f1db84481">MAX_SHADER_STRING_POINTERS</a>];</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;</div><div class="line"><a name="l03767"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a7d3f95f2b598474fe5852eb6f7b961db"> 3767</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a7d3f95f2b598474fe5852eb6f7b961db">BuildShaderChecksumLookup</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;{</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;    <span class="keywordtype">char</span>               *p = <a class="code" href="tr__shader_8c.html#a0b7b5ade5914f295223f64cb09505ac0">s_shaderText</a>, *pOld;</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;    <span class="keywordtype">char</span>               *token;</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> checksum;</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;    <span class="keywordtype">int</span>                numShaderStringPointers = 0;</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    <span class="comment">// initialize the checksums</span></div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;    <a class="code" href="q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(shaderChecksumLookup, 0, <span class="keyword">sizeof</span>(shaderChecksumLookup));</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    <span class="keywordflow">if</span> (!p)</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;    {</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    }</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;    <span class="comment">// loop for all labels</span></div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    {</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;        pOld = p;</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;        token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(&amp;p, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;        <span class="keywordflow">if</span> (!*token)</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;        {</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;        }</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;        <span class="comment">// get it&#39;s checksum</span></div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;        checksum = <a class="code" href="tr__shader_8c.html#accbfbb017e2efca51df4e2d767280b09">generateHashValue</a>(token);</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;        <span class="comment">//Ren_Print(&quot;Shader Found: %s\n&quot;, token );</span></div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;        <span class="comment">// if it&#39;s not currently used</span></div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;        <span class="keywordflow">if</span> (!shaderChecksumLookup[checksum].<a class="code" href="structshaderStringPointer__s.html#a637304a0854fb097033d25d4d26768ec">pStr</a>)</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;        {</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;            shaderChecksumLookup[checksum].<a class="code" href="structshaderStringPointer__s.html#a637304a0854fb097033d25d4d26768ec">pStr</a> = pOld;</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;        }</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;        {</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;            <span class="comment">// create a new list item</span></div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;            <a class="code" href="structshaderStringPointer__s.html">shaderStringPointer_t</a> *newStrPtr;</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;            <span class="keywordflow">if</span> (numShaderStringPointers &gt;= <a class="code" href="tr__shader_8c.html#a371658349f67d74fd68c8a8f1db84481">MAX_SHADER_STRING_POINTERS</a>)</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;            {</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;                <a class="code" href="tr__common_8h.html#a25773beb6dfe4ff97d145689df62c375">Ren_Drop</a>(<span class="stringliteral">&quot;MAX_SHADER_STRING_POINTERS exceeded, too many shaders&quot;</span>);</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;            }</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;            newStrPtr                           = &amp;shaderStringPointerList[numShaderStringPointers++]; <span class="comment">//ri.Hunk_Alloc( sizeof( shaderStringPointer_t ), h_low );</span></div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;            newStrPtr-&gt;<a class="code" href="structshaderStringPointer__s.html#a637304a0854fb097033d25d4d26768ec">pStr</a>                     = pOld;</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;            newStrPtr-&gt;<a class="code" href="structshaderStringPointer__s.html#a3fa910376850a0d63ae2a830fa49591c">next</a>                     = shaderChecksumLookup[checksum].<a class="code" href="structshaderStringPointer__s.html#a3fa910376850a0d63ae2a830fa49591c">next</a>;</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;            shaderChecksumLookup[checksum].<a class="code" href="structshaderStringPointer__s.html#a3fa910376850a0d63ae2a830fa49591c">next</a> = newStrPtr;</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;        }</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;        <span class="comment">// skip the actual shader section</span></div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;        <a class="code" href="q__shared_8c.html#aca778d04cc90b4085a20b901dfbf33df">SkipBracedSection</a>(&amp;p);</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;    }</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;}</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;</div><div class="line"><a name="l03824"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a4b96bfc1cab08cd7393ad68459b530b8"> 3824</a></span>&#160;<span class="preprocessor">#define MAX_SHADER_FILES    4096</span></div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;</div><div class="line"><a name="l03829"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a6749ab228855b2cfcd47d45999fa78e9"> 3829</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a6749ab228855b2cfcd47d45999fa78e9">ScanAndLoadShaderFiles</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;{</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;    <span class="keywordtype">char</span> filename[<a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;    <span class="keywordtype">char</span> **shaderFiles;</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;    <span class="keywordtype">char</span> *buffers[<a class="code" href="tr__shader_8c.html#a4b96bfc1cab08cd7393ad68459b530b8">MAX_SHADER_FILES</a>];</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;    <span class="keywordtype">int</span>  buffersize[<a class="code" href="tr__shader_8c.html#a4b96bfc1cab08cd7393ad68459b530b8">MAX_SHADER_FILES</a>];</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;    <span class="keywordtype">char</span> *p = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;    <span class="keywordtype">int</span>  numShaders;</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;    <span class="keywordtype">int</span>  i;</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;    <span class="keywordtype">long</span> sum = 0;</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;    <a class="code" href="q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(buffers, 0, <a class="code" href="tr__shader_8c.html#a4b96bfc1cab08cd7393ad68459b530b8">MAX_SHADER_FILES</a>);</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    <a class="code" href="q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(buffersize, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * <a class="code" href="tr__shader_8c.html#a4b96bfc1cab08cd7393ad68459b530b8">MAX_SHADER_FILES</a>);</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;    <span class="comment">// scan for shader files</span></div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    shaderFiles = <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a30d0806f3a82ee724a23031990a7a450">FS_ListFiles</a>(<span class="stringliteral">&quot;scripts&quot;</span>, <span class="stringliteral">&quot;.shader&quot;</span>, &amp;numShaders);</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;    <span class="keywordflow">if</span> (!shaderFiles || !numShaders)</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;    {</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;ScanAndLoadShaderFiles WARNING: no shader files found\n&quot;</span>);</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;    }</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;    <span class="keywordflow">if</span> (numShaders &gt; MAX_SHADER_FILES)</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    {</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;        numShaders = <a class="code" href="tr__shader_8c.html#a4b96bfc1cab08cd7393ad68459b530b8">MAX_SHADER_FILES</a>;</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;        <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;ScanAndLoadShaderFiles WARNING: MAX_SHADER_FILES reached\n&quot;</span>);</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;    }</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;    <span class="comment">// load and parse shader files</span></div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; numShaders; i++)</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;    {</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;        <a class="code" href="q__shared_8c.html#aad4e641649a5bcf8bb21fbe7a815ee98">Com_sprintf</a>(filename, <span class="keyword">sizeof</span>(filename), <span class="stringliteral">&quot;scripts/%s&quot;</span>, shaderFiles[i]);</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;        <a class="code" href="tr__common_8h.html#a4ace57eb682bd3e6ac5fc82ae2e9bd3e">Ren_Developer</a>(<span class="stringliteral">&quot;...loading &#39;%s&#39;\n&quot;</span>, filename);</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;        buffersize[i] = <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#aea2078fbd2fef731d60a1e53116f4839">FS_ReadFile</a>(filename, (<span class="keywordtype">void</span> **)&amp;buffers[i]);</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;        sum          += buffersize[i];</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;        <span class="keywordflow">if</span> (!buffers[i])</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;        {</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;            <a class="code" href="tr__common_8h.html#a25773beb6dfe4ff97d145689df62c375">Ren_Drop</a>(<span class="stringliteral">&quot;ScanAndLoadShaderFiles: Couldn&#39;t load %s&quot;</span>, filename);</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;        }</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;    }</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;    <span class="comment">// build single large buffer</span></div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;    <a class="code" href="tr__shader_8c.html#a0b7b5ade5914f295223f64cb09505ac0">s_shaderText</a> = <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#aeebd8342a3d6978b06c0dcd6dba30b56">Hunk_Alloc</a>(sum + numShaders * 2, <a class="code" href="q__shared_8h.html#a88839cf8fa6a56d94589791f0db32328acfc60ea7f4012a0fac6bc3ec1cfaf69a">h_low</a>);</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;    <span class="comment">// optimised to not use strcat/strlen which can be VERY slow for the large strings we&#39;re using here</span></div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;    p = <a class="code" href="tr__shader_8c.html#a0b7b5ade5914f295223f64cb09505ac0">s_shaderText</a>;</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;    <span class="comment">// free in reverse order, so the temp files are all dumped</span></div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;    <span class="keywordflow">for</span> (i = numShaders - 1; i &gt;= 0 ; i--)</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    {</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;        strcpy(p++, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;        strcpy(p, buffers[i]);</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;        <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a17973ae5f907844145cefcf5e423b473">FS_FreeFile</a>(buffers[i]);</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;        buffers[i] = p;</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;        p         += buffersize[i];</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;    }</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;    <span class="comment">// unixify all shaders</span></div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;    <a class="code" href="q__shared_8c.html#a4ebbf2d87debcef0d3ecd2fd4fe753f9">COM_FixPath</a>(<a class="code" href="tr__shader_8c.html#a0b7b5ade5914f295223f64cb09505ac0">s_shaderText</a>);</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;    <span class="comment">// free up memory</span></div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;    <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a66f56a1fff56767323aa8fb6dcec3f8d">FS_FreeFileList</a>(shaderFiles);</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;    <span class="comment">// optimized shader loading (18ms on a P3-500 for sfm1.bsp)</span></div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tr__init_8c.html#ad07dd4c678f4b44ba0e02c145533db5c">r_cacheShaders</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;    {</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;        <a class="code" href="tr__shader_8c.html#a7d3f95f2b598474fe5852eb6f7b961db">BuildShaderChecksumLookup</a>();</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;    }</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;}</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;</div><div class="line"><a name="l03902"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a8c8cf460ff9d0c2dbddac1d2eb3eb2bf"> 3902</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a8c8cf460ff9d0c2dbddac1d2eb3eb2bf">CreateInternalShaders</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;{</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a> = 0;</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;    <span class="comment">// init the default shader</span></div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;    <a class="code" href="tr__shader_8c.html#ac8459afb5f9ddaadc120a357be3d1755">InitShader</a>(<span class="stringliteral">&quot;&lt;default&gt;&quot;</span>, <a class="code" href="tr__local_8h.html#a09448f021c14aabac18683284291174b">LIGHTMAP_NONE</a>);</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;    stages[0].<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[0].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[0] = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aea5a21d8f3283636bc595f3f6ee9f7e4">defaultImage</a>;</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;    stages[0].<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>             = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;    stages[0].<a class="code" href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">stateBits</a>          = <a class="code" href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a77d8851e0bc5022621c27190da81830a">GLS_DEFAULT</a>;</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aac35656af63d3b2b5057189ed4c45a3e">defaultShader</a>             = <a class="code" href="tr__shader_8c.html#aebbe38d36a2d56121d8624f2fc4818ab">FinishShader</a>();</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;    <span class="comment">// shadow shader is just a marker</span></div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;    <a class="code" href="q__shared_8c.html#a70a2b0d67ad6af400d513cf1136af8dc">Q_strncpyz</a>(shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>, <span class="stringliteral">&quot;&lt;stencil shadow&gt;&quot;</span>, <span class="keyword">sizeof</span>(shader.<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>));</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    shader.<a class="code" href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">sort</a>     = <a class="code" href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a36bc1ac47235e3346ef0917c8b0e0cb7">SS_STENCIL_SHADOW</a>;</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a19ac459fd24ff4f766b78dc2bdd963b3">shadowShader</a> = <a class="code" href="tr__shader_8c.html#aebbe38d36a2d56121d8624f2fc4818ab">FinishShader</a>();</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;}</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;</div><div class="line"><a name="l03920"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a5610a0415f265b57443d01ee10809655"> 3920</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a5610a0415f265b57443d01ee10809655">CreateExternalShaders</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;{</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a7714641026f653c05e6d364892f37de7">projectionShadowShader</a> = <a class="code" href="tr__shader_8c.html#a0c3a13742d428268823a68cb4a1393c3">R_FindShader</a>(<span class="stringliteral">&quot;projectionShadow&quot;</span>, <a class="code" href="tr__local_8h.html#a09448f021c14aabac18683284291174b">LIGHTMAP_NONE</a>, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a1af399b6fadf45560e4e38f00dad4424">flareShader</a>            = <a class="code" href="tr__shader_8c.html#a0c3a13742d428268823a68cb4a1393c3">R_FindShader</a>(<span class="stringliteral">&quot;flareShader&quot;</span>, <a class="code" href="tr__local_8h.html#a09448f021c14aabac18683284291174b">LIGHTMAP_NONE</a>, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a842ad2a36782e97b37fbfc6df16df3d0">sunflareShader</a>[0]      = <a class="code" href="tr__shader_8c.html#a0c3a13742d428268823a68cb4a1393c3">R_FindShader</a>(<span class="stringliteral">&quot;sunflare1&quot;</span>, <a class="code" href="tr__local_8h.html#a09448f021c14aabac18683284291174b">LIGHTMAP_NONE</a>, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;    <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#aa80863a237fbbf2032f54b654b739255">dlightShader</a>           = <a class="code" href="tr__shader_8c.html#a0c3a13742d428268823a68cb4a1393c3">R_FindShader</a>(<span class="stringliteral">&quot;dlightshader&quot;</span>, <a class="code" href="tr__local_8h.html#a09448f021c14aabac18683284291174b">LIGHTMAP_NONE</a>, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;}</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;<span class="comment">//=============================================================================</span></div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;<span class="comment">// shader caching</span></div><div class="line"><a name="l03930"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a34329880bf54d25adc0f0556f9c33e30"> 3930</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>      <a class="code" href="tr__shader_8c.html#a34329880bf54d25adc0f0556f9c33e30">numBackupShaders</a> = 0;</div><div class="line"><a name="l03931"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#ae6d5f16ae782347d0b378f22ca88bb25"> 3931</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structshader__s.html">shader_t</a> *backupShaders[<a class="code" href="tr__local_8h.html#a3e81bce4adf8cfce68f5dea670fac3f0">MAX_SHADERS</a>];</div><div class="line"><a name="l03932"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a13b12d569c6cd67df3b898fe5848003c"> 3932</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structshader__s.html">shader_t</a> *backupHashTable[<a class="code" href="tr__shader_8c.html#a5c075d6db4d7bf46cc72a74e7a356347">FILE_HASH_SIZE</a>];</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;</div><div class="line"><a name="l03942"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#a8589f25374cfaf54b423c559cca3f370"> 3942</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="tr__shader_8c.html#a8589f25374cfaf54b423c559cca3f370">R_CacheShaderAllocExt</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">int</span> size, <span class="keyword">const</span> <span class="keywordtype">char</span> *file, <span class="keywordtype">int</span> line)</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;{</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tr__init_8c.html#a29892989fc4f56ce3bb001c096bcddd0">r_cache</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a> &amp;&amp; <a class="code" href="tr__init_8c.html#ad07dd4c678f4b44ba0e02c145533db5c">r_cacheShaders</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;    {</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;        <span class="keywordtype">void</span> *ptr = <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a3f2f49cacd03b754aa17590b65ca0228">Z_Malloc</a>(size);</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;        <span class="keywordflow">return</span> ptr;</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;    }</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;    {</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#aeebd8342a3d6978b06c0dcd6dba30b56">Hunk_Alloc</a>(size, <a class="code" href="q__shared_8h.html#a88839cf8fa6a56d94589791f0db32328acfc60ea7f4012a0fac6bc3ec1cfaf69a">h_low</a>);</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;    }</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;}</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;</div><div class="line"><a name="l03962"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#ad9399c90d88d7a45f462e9434202a25f"> 3962</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#ad9399c90d88d7a45f462e9434202a25f">R_CacheShaderFreeExt</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">void</span> *ptr, <span class="keyword">const</span> <span class="keywordtype">char</span> *file, <span class="keywordtype">int</span> line)</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;{</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tr__init_8c.html#a29892989fc4f56ce3bb001c096bcddd0">r_cache</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a> &amp;&amp; <a class="code" href="tr__init_8c.html#ad07dd4c678f4b44ba0e02c145533db5c">r_cacheShaders</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;    {</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;        <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a28c4af91358e17a3d3a3d2d05eff7578">Free</a>(ptr);</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;    }</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;}</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;</div><div class="line"><a name="l03970"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#acb3f226300198564e33b9d7032057b10"> 3970</a></span>&#160;<a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> <a class="code" href="tr__shader_8c.html#acb3f226300198564e33b9d7032057b10">purgeallshaders</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;</div><div class="line"><a name="l03976"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#a86df4996b68e0f7d397ab658cb31a6a1"> 3976</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a86df4996b68e0f7d397ab658cb31a6a1">R_PurgeShaders</a>(<span class="keywordtype">int</span> count)</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;{</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tr__shader_8c.html#a34329880bf54d25adc0f0556f9c33e30">numBackupShaders</a>)</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;    {</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;    }</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;    <a class="code" href="tr__shader_8c.html#acb3f226300198564e33b9d7032057b10">purgeallshaders</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;    <a class="code" href="tr__shader_8c.html#a8f2d9bf40455f07b1383535b22843427">R_PurgeLightmapShaders</a>();</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;    <a class="code" href="tr__shader_8c.html#acb3f226300198564e33b9d7032057b10">purgeallshaders</a> = <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;}</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;</div><div class="line"><a name="l03993"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a8ee2582c5cc93d0d810730521a26750b"> 3993</a></span>&#160;<a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> <a class="code" href="tr__shader_8c.html#a8ee2582c5cc93d0d810730521a26750b">R_ShaderCanBeCached</a>(<a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>)</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;{</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;    <span class="keywordtype">int</span> i, j, b;</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tr__shader_8c.html#acb3f226300198564e33b9d7032057b10">purgeallshaders</a>)</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;    {</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;    }</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;    <span class="keywordflow">if</span> (sh-&gt;<a class="code" href="structshader__s.html#a89f20ab7415b09dd1a5b2086a8a66214">isSky</a>)</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;    {</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;    }</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; sh-&gt;<a class="code" href="structshader__s.html#a6a1e4e84a91cda33a050c17e8377bef7">numUnfoggedPasses</a>; i++)</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;    {</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;        <span class="keywordflow">if</span> (sh-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i] &amp;&amp; sh-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i]-&gt;<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>)</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;        {</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;            <span class="keywordflow">for</span> (b = 0 ; b &lt; <a class="code" href="tr__local_8h.html#ae1cdd295436ef51febabf3b11dc897e0">NUM_TEXTURE_BUNDLES</a> ; b++)</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;            {</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;                <span class="comment">// swapped order of for() comparisons so that</span></div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;                <span class="comment">// image[16] (out of bounds) isn&#39;t dereferenced</span></div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;                <span class="comment">//for (j=0; sh-&gt;stages[i]-&gt;bundle[b].image[j] &amp;&amp; j &lt; MAX_IMAGE_ANIMATIONS; j++) {</span></div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="tr__local_8h.html#a9c3accc458de4122b714536a2a87ba9a">MAX_IMAGE_ANIMATIONS</a> &amp;&amp; sh-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i]-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[b].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[j]; j++)</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;                {</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;                    <span class="keywordflow">if</span> (sh-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i]-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[b].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[j]-&gt;<a class="code" href="structimage__s.html#a290222e3c972d9805359501b0f42b4e7">imgName</a>[0] == <span class="charliteral">&#39;*&#39;</span>)</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;                    {</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;                    }</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;                }</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;            }</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;        }</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;    }</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;}</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;</div><div class="line"><a name="l04032"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#a8f2d9bf40455f07b1383535b22843427"> 4032</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a8f2d9bf40455f07b1383535b22843427">R_PurgeLightmapShaders</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;{</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;    <span class="keywordtype">int</span>      j, b, i = 0;</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;    <a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>, *shPrev, *<a class="code" href="structshaderStringPointer__s.html#a3fa910376850a0d63ae2a830fa49591c">next</a>;</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <span class="keyword">sizeof</span>(<a class="code" href="tr__shader_8c.html#a13b12d569c6cd67df3b898fe5848003c">backupHashTable</a>) / <span class="keyword">sizeof</span>(backupHashTable[0]); i++)</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;    {</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;        sh = backupHashTable[i];</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;        shPrev = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;        next   = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;        <span class="keywordflow">while</span> (sh)</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;        {</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;            <span class="keywordflow">if</span> (sh-&gt;<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> &gt;= 0 || !<a class="code" href="tr__shader_8c.html#a8ee2582c5cc93d0d810730521a26750b">R_ShaderCanBeCached</a>(sh))</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;            {</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;                next = sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>;</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;                <span class="keywordflow">if</span> (!shPrev)</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;                {</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;                    backupHashTable[i] = sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>;</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;                }</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;                {</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;                    shPrev-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a> = sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>;</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;                }</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;                backupShaders[sh-&gt;<a class="code" href="structshader__s.html#aef63f5e4a3db9c23201ef10d62cb42f5">index</a>] = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;    <span class="comment">// make sure we don&#39;t try and free it</span></div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;                <a class="code" href="tr__shader_8c.html#a34329880bf54d25adc0f0556f9c33e30">numBackupShaders</a>--;</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;                <span class="keywordflow">for</span> (j = 0 ; j &lt; sh-&gt;<a class="code" href="structshader__s.html#a6a1e4e84a91cda33a050c17e8377bef7">numUnfoggedPasses</a> ; j++)</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;                {</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;                    <span class="keywordflow">if</span> (!sh-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[j])</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;                    {</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;                    }</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;                    <span class="keywordflow">for</span> (b = 0 ; b &lt; <a class="code" href="tr__local_8h.html#ae1cdd295436ef51febabf3b11dc897e0">NUM_TEXTURE_BUNDLES</a> ; b++)</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;                    {</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;                        <span class="keywordflow">if</span> (sh-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[j]-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[b].<a class="code" href="structtextureBundle__t.html#ac460ff874c73b07d93144cf5c760cb81">texMods</a>)</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;                        {</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;                            <a class="code" href="tr__local_8h.html#a85d02351b7ff61c5cc48c1365cca58c6">R_CacheShaderFree</a>(<a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, sh-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[j]-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[b].<a class="code" href="structtextureBundle__t.html#ac460ff874c73b07d93144cf5c760cb81">texMods</a>);</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;                        }</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;                    }</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;                    <a class="code" href="tr__local_8h.html#a85d02351b7ff61c5cc48c1365cca58c6">R_CacheShaderFree</a>(<a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, sh-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[j]);</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;                }</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;                <a class="code" href="tr__local_8h.html#a85d02351b7ff61c5cc48c1365cca58c6">R_CacheShaderFree</a>(sh-&gt;<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> &lt; 0 ? <a class="code" href="dl__local_8h.html#a2f2251d7d64d4c9ec69520b953f68bb9">va</a>(<span class="stringliteral">&quot;%s lm: %i&quot;</span>, sh-&gt;<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>, sh-&gt;<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a>) : <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, sh);</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;                sh = <a class="code" href="structshaderStringPointer__s.html#a3fa910376850a0d63ae2a830fa49591c">next</a>;</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;            }</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;            shPrev = <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;            sh     = sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>;</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;        }</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;    }</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;}</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;</div><div class="line"><a name="l04094"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#afdfa1e0dee12b36ef6fc745b533b046e"> 4094</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#afdfa1e0dee12b36ef6fc745b533b046e">R_BackupShaders</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;{</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;    <span class="comment">//int i;</span></div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tr__init_8c.html#a29892989fc4f56ce3bb001c096bcddd0">r_cache</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;    {</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;    }</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tr__init_8c.html#ad07dd4c678f4b44ba0e02c145533db5c">r_cacheShaders</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;    {</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;    }</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;    <span class="comment">// copy each model in memory across to the backupModels</span></div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;    <a class="code" href="q__shared_8h.html#a0701630965c52ce0cc99eda50fbb8235">Com_Memcpy</a>(backupShaders, <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ac637e5669ddac0b56802fc22ee762425">shaders</a>, <span class="keyword">sizeof</span>(backupShaders));</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;    <span class="comment">// now backup the hashTable</span></div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;    <a class="code" href="q__shared_8h.html#a0701630965c52ce0cc99eda50fbb8235">Com_Memcpy</a>(backupHashTable, hashTable, <span class="keyword">sizeof</span>(hashTable));</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;    <a class="code" href="tr__shader_8c.html#a34329880bf54d25adc0f0556f9c33e30">numBackupShaders</a> = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a>;</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;    <span class="comment">// ditch all lightmapped shaders</span></div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;    <a class="code" href="tr__shader_8c.html#a8f2d9bf40455f07b1383535b22843427">R_PurgeLightmapShaders</a>();</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;    <span class="comment">//Ren_Print(&quot;Backing up %i images\n&quot;, numBackupShaders );</span></div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;    <span class="comment">//for( i = 0; i &lt; tr.numShaders; i++ ) {</span></div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;    <span class="comment">//    if( backupShaders[ i ] ) {</span></div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;    <span class="comment">//        Ren_Print(&quot;Shader: %s: lm %i\n&quot;, backupShaders[ i ]-&gt;name, backupShaders[i]-&gt;lightmapIndex );</span></div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;    <span class="comment">//    }</span></div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;    <span class="comment">//}</span></div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;    <span class="comment">//Ren_Print(&quot;=======================================\n&quot; );</span></div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;}</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;</div><div class="line"><a name="l04133"></a><span class="lineno"><a class="line" href="tr__shader_8c.html#a377e595c80641dd7660728349eb92c55"> 4133</a></span>&#160;<span class="keyword">static</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> <a class="code" href="tr__shader_8c.html#a377e595c80641dd7660728349eb92c55">R_RegisterShaderImages</a>(<a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>)</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;{</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;    <span class="keywordtype">int</span> i, j, b;</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;    <span class="keywordflow">if</span> (sh-&gt;<a class="code" href="structshader__s.html#a89f20ab7415b09dd1a5b2086a8a66214">isSky</a>)</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;    {</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;    }</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; sh-&gt;<a class="code" href="structshader__s.html#a6a1e4e84a91cda33a050c17e8377bef7">numUnfoggedPasses</a>; i++)</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;    {</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;        <span class="keywordflow">if</span> (sh-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i] &amp;&amp; sh-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i]-&gt;<a class="code" href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">active</a>)</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;        {</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;            <span class="keywordflow">for</span> (b = 0 ; b &lt; <a class="code" href="tr__local_8h.html#ae1cdd295436ef51febabf3b11dc897e0">NUM_TEXTURE_BUNDLES</a> ; b++)</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;            {</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="tr__local_8h.html#a9c3accc458de4122b714536a2a87ba9a">MAX_IMAGE_ANIMATIONS</a> &amp;&amp; sh-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i]-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[b].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[j]; j++)</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;                {</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="tr__image_8c.html#a6cc76c159eb16e36265535b63f75f6e1">R_TouchImage</a>(sh-&gt;<a class="code" href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">stages</a>[i]-&gt;<a class="code" href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">bundle</a>[b].<a class="code" href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">image</a>[j]))</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;                    {</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;                    }</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;                }</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;            }</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;        }</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;    }</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;}</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;</div><div class="line"><a name="l04168"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#ae8e3c43121c29e2c85f25d66a7b5f2d5"> 4168</a></span>&#160;<a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__shader_8c.html#ae8e3c43121c29e2c85f25d66a7b5f2d5">R_FindCachedShader</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">int</span> lightmapIndex, <span class="keywordtype">int</span> <a class="code" href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a>)</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;{</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;    <a class="code" href="structshader__s.html">shader_t</a> *<a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>, *shPrev;</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tr__init_8c.html#ad07dd4c678f4b44ba0e02c145533db5c">r_cacheShaders</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;    {</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;    }</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tr__shader_8c.html#a34329880bf54d25adc0f0556f9c33e30">numBackupShaders</a>)</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;    {</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;    }</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;    <span class="keywordflow">if</span> (!name)</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;    {</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;    }</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;    sh     = backupHashTable[<a class="code" href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a>];</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;    shPrev = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;    <span class="keywordflow">while</span> (sh)</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;    {</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;        <span class="keywordflow">if</span> (sh-&gt;<a class="code" href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">lightmapIndex</a> == lightmapIndex &amp;&amp; !<a class="code" href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a>(sh-&gt;<a class="code" href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">name</a>, name))</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;        {</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a> == <a class="code" href="tr__local_8h.html#a3e81bce4adf8cfce68f5dea670fac3f0">MAX_SHADERS</a>)</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;            {</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;                <a class="code" href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a>(<span class="stringliteral">&quot;WARNING: R_FindCachedShader - MAX_SHADERS hit\n&quot;</span>);</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;            }</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;            <span class="comment">// make sure the images stay valid</span></div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="tr__shader_8c.html#a377e595c80641dd7660728349eb92c55">R_RegisterShaderImages</a>(sh))</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;            {</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;            }</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;            <span class="comment">// this is the one, so move this shader into the current list</span></div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;            <span class="keywordflow">if</span> (!shPrev)</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;            {</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;                backupHashTable[<a class="code" href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a>] = sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>;</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;            }</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;            {</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;                shPrev-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a> = sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>;</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;            }</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;            sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>        = hashTable[<a class="code" href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a>];</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;            hashTable[<a class="code" href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a>] = <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;            backupShaders[sh-&gt;<a class="code" href="structshader__s.html#aef63f5e4a3db9c23201ef10d62cb42f5">index</a>] = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;    <span class="comment">// make sure we don&#39;t try and free it</span></div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;            <span class="comment">// set the index up, and add it to the current list</span></div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#ac637e5669ddac0b56802fc22ee762425">shaders</a>[<a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a>] = <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;            sh-&gt;<a class="code" href="structshader__s.html#aef63f5e4a3db9c23201ef10d62cb42f5">index</a>                 = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a>;</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a62f176b8fd5c75131eb4adb78df8589b">sortedShaders</a>[<a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a>] = <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;            sh-&gt;<a class="code" href="structshader__s.html#ae6ada0c41fb9b5e8ca539fa5b3895eb4">sortedIndex</a>                 = <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a>;</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;            <a class="code" href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a>.<a class="code" href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">numShaders</a>++;</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;            <a class="code" href="tr__shader_8c.html#a34329880bf54d25adc0f0556f9c33e30">numBackupShaders</a>--;</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;            sh-&gt;<a class="code" href="structshader__s.html#a8fc0bf1568f390169f53e8540ea467ef">remappedShader</a> = <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;  <span class="comment">// remove any remaps</span></div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;            <a class="code" href="tr__shader_8c.html#a961cfd3275a1fb303d89b9a38bbe3991">SortNewShader</a>();    <span class="comment">// make sure it renders in the right order</span></div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;            <span class="comment">//Ren_Print(&quot;Removing %s from the cache: lm: %i\n&quot;, sh-&gt;name, sh-&gt;lightmapIndex );</span></div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;        }</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;        shPrev = <a class="code" href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a>;</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;        sh     = sh-&gt;<a class="code" href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">next</a>;</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;    }</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;}</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;</div><div class="line"><a name="l04251"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#a322c400276ad690123d7af809b37aea4"> 4251</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#a322c400276ad690123d7af809b37aea4">R_LoadCacheShaders</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;{</div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;    <span class="keywordtype">int</span>  len;</div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="sv__demo_8c.html#a1756d9ddc463d7bca9539c8546a7c1b0">buf</a>;</div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;    <span class="keywordtype">char</span> *token, *pString;</div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;    <span class="keywordtype">char</span> name[<a class="code" href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tr__init_8c.html#ad07dd4c678f4b44ba0e02c145533db5c">r_cacheShaders</a>-&gt;<a class="code" href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;    {</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;    }</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;    <span class="comment">// don&#39;t load the cache list in between level loads, only on startup, or after a vid_restart</span></div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tr__shader_8c.html#a34329880bf54d25adc0f0556f9c33e30">numBackupShaders</a> &gt; 0)</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;    {</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;    }</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;</div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;    len = <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#aea2078fbd2fef731d60a1e53116f4839">FS_ReadFile</a>(<span class="stringliteral">&quot;shader.cache&quot;</span>, <a class="code" href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;    <span class="keywordflow">if</span> (len &lt;= 0)</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;    {</div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;    }</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;    buf = (<span class="keywordtype">char</span> *)<a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#a3f8ba8b09086178fd9e92116a9ed49eb">Hunk_AllocateTempMemory</a>(len);</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;    <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#aea2078fbd2fef731d60a1e53116f4839">FS_ReadFile</a>(<span class="stringliteral">&quot;shader.cache&quot;</span>, (<span class="keywordtype">void</span> **)&amp;buf);</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;    pString = <a class="code" href="sv__demo_8c.html#a1756d9ddc463d7bca9539c8546a7c1b0">buf</a>;</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;</div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;    <span class="keywordflow">while</span> ((token = <a class="code" href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a>(&amp;pString, <a class="code" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>)) &amp;&amp; token[0])</div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;    {</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;        <a class="code" href="q__shared_8c.html#a70a2b0d67ad6af400d513cf1136af8dc">Q_strncpyz</a>(name, token, <span class="keyword">sizeof</span>(name));</div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;        <a class="code" href="tr__local_8h.html#a76069acfe8943f0fce7f1d291f2a763b">RE_RegisterModel</a>(name);</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;    }</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;    <a class="code" href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a>.<a class="code" href="structrefimport__t.html#ac7fc7916f1593dee91474ff7c75f6914">Hunk_FreeTempMemory</a>(buf);</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;}</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;<span class="comment">//=============================================================================</span></div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;</div><div class="line"><a name="l04294"></a><span class="lineno"><a class="line" href="LES_2tr__local_8h.html#acc293df37a38005d4a860328b70cc87c"> 4294</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="tr__shader_8c.html#acc293df37a38005d4a860328b70cc87c">R_InitShaders</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;{</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;    <a class="code" href="tr__local_8h.html#a17165a0d48e0267846dce61872b17255">glfogNum</a> = <a class="code" href="tr__types_8h.html#ad6e514d0c9dd889c0b1b36049c979270a0b1fc1fa233305431792ab6045861d41">FOG_NONE</a>;</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;    <a class="code" href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a>(<span class="stringliteral">&quot;Initializing Shaders\n&quot;</span>);</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;    <a class="code" href="q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(hashTable, 0, <span class="keyword">sizeof</span>(hashTable));</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;    <a class="code" href="tr__shader_8c.html#a8c8cf460ff9d0c2dbddac1d2eb3eb2bf">CreateInternalShaders</a>();</div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;    <a class="code" href="tr__shader_8c.html#a6749ab228855b2cfcd47d45999fa78e9">ScanAndLoadShaderFiles</a>();</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;    <a class="code" href="tr__shader_8c.html#a5610a0415f265b57443d01ee10809655">CreateExternalShaders</a>();</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;    <a class="code" href="tr__shader_8c.html#a322c400276ad690123d7af809b37aea4">R_LoadCacheShaders</a>();</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;}</div><div class="ttc" id="structtrGlobals__t_html_aa80863a237fbbf2032f54b654b739255"><div class="ttname"><a href="structtrGlobals__t.html#aa80863a237fbbf2032f54b654b739255">trGlobals_t::dlightShader</a></div><div class="ttdeci">shader_t * dlightShader</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01408">tr_local.h:1408</a></div></div>
<div class="ttc" id="tr__backend_8c_html_a3a0b0bb971e18ae6245e77bf93473e0a"><div class="ttname"><a href="tr__backend_8c.html#a3a0b0bb971e18ae6245e77bf93473e0a">backEndData</a></div><div class="ttdeci">backEndData_t * backEndData</div><div class="ttdoc">the second one may not be allocated </div><div class="ttdef"><b>Definition:</b> <a href="tr__backend_8c_source.html#l00037">tr_backend.c:37</a></div></div>
<div class="ttc" id="tr__shader_8c_html_acc293df37a38005d4a860328b70cc87c"><div class="ttname"><a href="tr__shader_8c.html#acc293df37a38005d4a860328b70cc87c">R_InitShaders</a></div><div class="ttdeci">void R_InitShaders(void)</div><div class="ttdoc">R_InitShaders. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l04294">tr_shader.c:4294</a></div></div>
<div class="ttc" id="tr__local_8h_html_a03df5920ac8ad3d828f4174d77a0c705a46067896dd2e825dcf507129dd677742"><div class="ttname"><a href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a46067896dd2e825dcf507129dd677742">SS_DECAL</a></div><div class="ttdoc">scorch marks, etc. </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00132">tr_local.h:132</a></div></div>
<div class="ttc" id="structwaveForm__t_html"><div class="ttname"><a href="structwaveForm__t.html">waveForm_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00268">tr_local.h:268</a></div></div>
<div class="ttc" id="tr__local_8h_html_a157944afb15e3073932b378dc6e6f9cfa17132f4772be73d5a222521c450ba8ed"><div class="ttname"><a href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa17132f4772be73d5a222521c450ba8ed">CGEN_EXACT_VERTEX</a></div><div class="ttdoc">tess.vertexColors </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00227">tr_local.h:227</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a60182585f02936ed4323c9885a51ea79"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a60182585f02936ed4323c9885a51ea79">GLS_DSTBLEND_ONE_MINUS_DST_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01550">tr_local.h:1550</a></div></div>
<div class="ttc" id="structdeformStage__t_html_ae086aeb311fe5724f77c5c12571fca4a"><div class="ttname"><a href="structdeformStage__t.html#ae086aeb311fe5724f77c5c12571fca4a">deformStage_t::moveVector</a></div><div class="ttdeci">vec3_t moveVector</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00307">tr_local.h:307</a></div></div>
<div class="ttc" id="snd__wavelet_8c_html_a09ebd310e71d5c5075c8631ceee3033d"><div class="ttname"><a href="snd__wavelet_8c.html#a09ebd310e71d5c5075c8631ceee3033d">a</a></div><div class="ttdeci">#define a(x)</div></div>
<div class="ttc" id="tr__shader_8c_html_a6567fbeacf4d3bc769163e59b44e9681"><div class="ttname"><a href="tr__shader_8c.html#a6567fbeacf4d3bc769163e59b44e9681">ParseShader</a></div><div class="ttdeci">static qboolean ParseShader(char **text)</div><div class="ttdoc">The current text pointer is at the explicit text definition of the shader. Parse it into the global s...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l01692">tr_shader.c:1692</a></div></div>
<div class="ttc" id="tr__local_8h_html_a8f9f17869dd24d22985f328decc076a8"><div class="ttname"><a href="tr__local_8h.html#a8f9f17869dd24d22985f328decc076a8">MAX_SHADER_STAGES</a></div><div class="ttdeci">#define MAX_SHADER_STAGES</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00153">tr_local.h:153</a></div></div>
<div class="ttc" id="structshader__s_html_a6adee68014b0cbf42cf0a12844b28a4c"><div class="ttname"><a href="structshader__s.html#a6adee68014b0cbf42cf0a12844b28a4c">shader_s::sky</a></div><div class="ttdeci">skyParms_t sky</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00484">tr_local.h:484</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a975e37df7eb8dfcf152fe2c89f9ca189"><div class="ttname"><a href="structtrGlobals__t.html#a975e37df7eb8dfcf152fe2c89f9ca189">trGlobals_t::lightGridMulDirected</a></div><div class="ttdeci">float lightGridMulDirected</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01441">tr_local.h:1441</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_ae4cc02d091eaf4c2d8d84ae8f09c0d37"><div class="ttname"><a href="surfaceflags_8h.html#ae4cc02d091eaf4c2d8d84ae8f09c0d37">SURF_SKY</a></div><div class="ttdeci">#define SURF_SKY</div><div class="ttdoc">lighting from environment map </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00075">surfaceflags.h:75</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a8c3262a58c2c24948bf7a69b4d5692eb"><div class="ttname"><a href="tr__shader_8c.html#a8c3262a58c2c24948bf7a69b4d5692eb">ParseTexMod</a></div><div class="ttdeci">static void ParseTexMod(char *_text, shaderStage_t *stage)</div><div class="ttdoc">ParseTexMod. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00382">tr_shader.c:382</a></div></div>
<div class="ttc" id="tr__shader_8c_html_ac8459afb5f9ddaadc120a357be3d1755"><div class="ttname"><a href="tr__shader_8c.html#ac8459afb5f9ddaadc120a357be3d1755">InitShader</a></div><div class="ttdeci">static void InitShader(const char *name, int lightmapIndex)</div><div class="ttdoc">Inits a shader. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02779">tr_shader.c:2779</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609ac6feee0cc3f76294c7c78341142de0ed"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609ac6feee0cc3f76294c7c78341142de0ed">GLS_SRCBLEND_ALPHA_SATURATE</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01531">tr_local.h:1531</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a50de0d49082484f366759a62c2f8e7a7"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a50de0d49082484f366759a62c2f8e7a7">GLS_DSTBLEND_ONE_MINUS_SRC_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01548">tr_local.h:1548</a></div></div>
<div class="ttc" id="tr__local_8h_html_aa9e5f00500a9762756bbe693e71de433"><div class="ttname"><a href="tr__local_8h.html#aa9e5f00500a9762756bbe693e71de433">QSORT_ENTITYNUM_SHIFT</a></div><div class="ttdeci">#define QSORT_ENTITYNUM_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01286">tr_local.h:1286</a></div></div>
<div class="ttc" id="structcollapse__t_html"><div class="ttname"><a href="structcollapse__t.html">collapse_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02243">tr_shader.c:2243</a></div></div>
<div class="ttc" id="tr__local_8h_html_a157944afb15e3073932b378dc6e6f9cfa958f68d1ba9f16898759973f89f30c2a"><div class="ttname"><a href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa958f68d1ba9f16898759973f89f30c2a">CGEN_ONE_MINUS_ENTITY</a></div><div class="ttdoc">grabbed from 1 - entity.modulate </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00226">tr_local.h:226</a></div></div>
<div class="ttc" id="q__shared_8h_html_abd4ae30fcfdcbbff51bbf3f4e6daeee7"><div class="ttname"><a href="q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a></div><div class="ttdeci">#define MAX_QPATH</div><div class="ttdoc">max length of a quake game pathname </div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00451">q_shared.h:451</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a9fd1e231d87f2ae4acb7a9b054298c84"><div class="ttname"><a href="surfaceflags_8h.html#a9fd1e231d87f2ae4acb7a9b054298c84">SURF_POINTLIGHT</a></div><div class="ttdeci">#define SURF_POINTLIGHT</div><div class="ttdoc">generate lighting info at vertexes </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00084">surfaceflags.h:84</a></div></div>
<div class="ttc" id="g__character_8c_html_af121d1294678e63f1fe71694880ef3ed"><div class="ttname"><a href="g__character_8c.html#af121d1294678e63f1fe71694880ef3ed">text</a></div><div class="ttdeci">static char text[MAX_TEXT_CHAR]</div><div class="ttdef"><b>Definition:</b> <a href="g__character_8c_source.html#l00042">g_character.c:42</a></div></div>
<div class="ttc" id="structshader__s_html_a8fc0bf1568f390169f53e8540ea467ef"><div class="ttname"><a href="structshader__s.html#a8fc0bf1568f390169f53e8540ea467ef">shader_s::remappedShader</a></div><div class="ttdeci">struct shader_s * remappedShader</div><div class="ttdoc">current shader this one is remapped too </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00518">tr_local.h:518</a></div></div>
<div class="ttc" id="tr__local_8h_html_a157944afb15e3073932b378dc6e6f9cfa8329b119cb9e51a0ed076b7f8913930c"><div class="ttname"><a href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa8329b119cb9e51a0ed076b7f8913930c">CGEN_ENTITY</a></div><div class="ttdoc">grabbed from entity&amp;#39;s modulate field </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00225">tr_local.h:225</a></div></div>
<div class="ttc" id="structshaderStage__t_html_af01604023e0dbcceb5ff0d7aa5b510c7"><div class="ttname"><a href="structshaderStage__t.html#af01604023e0dbcceb5ff0d7aa5b510c7">shaderStage_t::rgbGen</a></div><div class="ttdeci">colorGen_t rgbGen</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00387">tr_local.h:387</a></div></div>
<div class="ttc" id="structinfoParm__t_html_a0eb388d903ecc74809d55c93485c429d"><div class="ttname"><a href="structinfoParm__t.html#a0eb388d903ecc74809d55c93485c429d">infoParm_t::surfaceFlags</a></div><div class="ttdeci">int surfaceFlags</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l01567">tr_shader.c:1567</a></div></div>
<div class="ttc" id="tr__local_8h_html_a1480f4cb61af8bab511fad028c084b20aafb48a0aca87f48c96d94db54eda9185"><div class="ttname"><a href="tr__local_8h.html#a1480f4cb61af8bab511fad028c084b20aafb48a0aca87f48c96d94db54eda9185">CT_TWO_SIDED</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00419">tr_local.h:419</a></div></div>
<div class="ttc" id="structrenderCommandList__t_html_aa85d7ffd6623fa7bcebb2f40bdeac6f4"><div class="ttname"><a href="structrenderCommandList__t.html#aa85d7ffd6623fa7bcebb2f40bdeac6f4">renderCommandList_t::cmds</a></div><div class="ttdeci">byte cmds[MAX_RENDER_COMMANDS]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01889">tr_local.h:1889</a></div></div>
<div class="ttc" id="tr__shader_8c_html_ac8c463d8f3f7e1fb433fb5ee30516b14"><div class="ttname"><a href="tr__shader_8c.html#ac8c463d8f3f7e1fb433fb5ee30516b14">shaderStringPointer_t</a></div><div class="ttdeci">struct shaderStringPointer_s shaderStringPointer_t</div><div class="ttdoc">Table containing string indexes for each shader found in the scripts, referenced by their checksum va...</div></div>
<div class="ttc" id="tr__local_8h_html_a326090c62abbe93466e0a4147f789f85"><div class="ttname"><a href="tr__local_8h.html#a326090c62abbe93466e0a4147f789f85">R_SetFog</a></div><div class="ttdeci">void R_SetFog(int fogvar, int var1, int var2, float r, float g, float b, float density)</div><div class="ttdoc">R_SetFog. </div><div class="ttdef"><b>Definition:</b> <a href="tr__main_8c_source.html#l00189">tr_main.c:189</a></div></div>
<div class="ttc" id="snd__main_8c_html_a2f1b425181a9b7c25153a9ffb98ee2bc"><div class="ttname"><a href="snd__main_8c.html#a2f1b425181a9b7c25153a9ffb98ee2bc">si</a></div><div class="ttdeci">static soundInterface_t si</div><div class="ttdef"><b>Definition:</b> <a href="snd__main_8c_source.html#l00048">snd_main.c:48</a></div></div>
<div class="ttc" id="structdeformStage__t_html_a0ce924036e2cdc850b0b2147704f0cef"><div class="ttname"><a href="structdeformStage__t.html#a0ce924036e2cdc850b0b2147704f0cef">deformStage_t::bulgeSpeed</a></div><div class="ttdeci">float bulgeSpeed</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00313">tr_local.h:313</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a43b03b8fe4e894a2dc18d4b7e0d04e64">GLS_DSTBLEND_ZERO</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01543">tr_local.h:1543</a></div></div>
<div class="ttc" id="tr__local_8h_html_a0983272711952af388a03af2e4c058b7"><div class="ttname"><a href="tr__local_8h.html#a0983272711952af388a03af2e4c058b7">QSORT_FOGNUM_SHIFT</a></div><div class="ttdeci">#define QSORT_FOGNUM_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01287">tr_local.h:1287</a></div></div>
<div class="ttc" id="structshader__s_html_a89f20ab7415b09dd1a5b2086a8a66214"><div class="ttname"><a href="structshader__s.html#a89f20ab7415b09dd1a5b2086a8a66214">shader_s::isSky</a></div><div class="ttdeci">qboolean isSky</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00483">tr_local.h:483</a></div></div>
<div class="ttc" id="structtextureBundle__t_html_a5629bcc222eaddb10bf843d5feb7b232"><div class="ttname"><a href="structtextureBundle__t.html#a5629bcc222eaddb10bf843d5feb7b232">textureBundle_t::isVideoMap</a></div><div class="ttdeci">qboolean isVideoMap</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00371">tr_local.h:371</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a7f1cf2772d1c621995974d6f15eee3b2"><div class="ttname"><a href="structtrGlobals__t.html#a7f1cf2772d1c621995974d6f15eee3b2">trGlobals_t::sunShaderName</a></div><div class="ttdeci">char * sunShaderName</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01411">tr_local.h:1411</a></div></div>
<div class="ttc" id="structtexModInfo__t_html_af82dab42ab04e3d497982cffdf2e9e98"><div class="ttname"><a href="structtexModInfo__t.html#af82dab42ab04e3d497982cffdf2e9e98">texModInfo_t::matrix</a></div><div class="ttdeci">float matrix[2][2]</div><div class="ttdoc">s&amp;#39; = s * m[0][0] + t * m[1][0] + trans[0] </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00328">tr_local.h:328</a></div></div>
<div class="ttc" id="tr__local_8h_html_a2f66a4ae0d42348eca8a1333f82b1092"><div class="ttname"><a href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092">genFunc_t</a></div><div class="ttdeci">genFunc_t</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00159">tr_local.h:159</a></div></div>
<div class="ttc" id="tr__local_8h_html_ab59af7adf1cc82196d2cedbfd127ffb5a38ac98d11bc4564f23a27e9e6472adee"><div class="ttname"><a href="tr__local_8h.html#ab59af7adf1cc82196d2cedbfd127ffb5a38ac98d11bc4564f23a27e9e6472adee">FP_EQUAL</a></div><div class="ttdoc">surface is opaque but possibly alpha tested </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00429">tr_local.h:429</a></div></div>
<div class="ttc" id="structdeformStage__t_html"><div class="ttname"><a href="structdeformStage__t.html">deformStage_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00303">tr_local.h:303</a></div></div>
<div class="ttc" id="q__shared_8c_html_aca778d04cc90b4085a20b901dfbf33df"><div class="ttname"><a href="q__shared_8c.html#aca778d04cc90b4085a20b901dfbf33df">SkipBracedSection</a></div><div class="ttdeci">void SkipBracedSection(char **program)</div><div class="ttdoc">The next token should be an open brace. Skips until a matching close brace is found. Internal brace depths are properly skipped. </div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8c_source.html#l01056">q_shared.c:1056</a></div></div>
<div class="ttc" id="structtexModInfo__t_html_af8357925ef831bf705fa59cfc4180d93"><div class="ttname"><a href="structtexModInfo__t.html#af8357925ef831bf705fa59cfc4180d93">texModInfo_t::wave</a></div><div class="ttdeci">waveForm_t wave</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00325">tr_local.h:325</a></div></div>
<div class="ttc" id="structdrawSurf__s_html_a4f8f60ae5a912c5687bd35edc41728ed"><div class="ttname"><a href="structdrawSurf__s.html#a4f8f60ae5a912c5687bd35edc41728ed">drawSurf_s::sort</a></div><div class="ttdeci">unsigned sort</div><div class="ttdoc">bit combination for fast compares </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00762">tr_local.h:762</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a11d547fcf077a6bf5085585d14853d85"><div class="ttname"><a href="structtrGlobals__t.html#a11d547fcf077a6bf5085585d14853d85">trGlobals_t::allowCompress</a></div><div class="ttdeci">int allowCompress</div><div class="ttdoc">temp var used while parsing shader only </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01471">tr_local.h:1471</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a7abcbf948773c4f96aa32028bb5f2c2e"><div class="ttname"><a href="surfaceflags_8h.html#a7abcbf948773c4f96aa32028bb5f2c2e">SURF_GLASS</a></div><div class="ttdeci">#define SURF_GLASS</div><div class="ttdoc">out of surf&amp;#39;s, so replacing unused &amp;#39;SURF_SMGROUP&amp;#39; </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00095">surfaceflags.h:95</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a443d5ef97ca0824f70122f89816a3504"><div class="ttname"><a href="surfaceflags_8h.html#a443d5ef97ca0824f70122f89816a3504">SURF_CARPET</a></div><div class="ttdeci">#define SURF_CARPET</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00099">surfaceflags.h:99</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a88c1b7af90ea87be72b8f97e22474c8c"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a88c1b7af90ea87be72b8f97e22474c8c">GLS_ATEST_GT_0</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01573">tr_local.h:1573</a></div></div>
<div class="ttc" id="structshaderStringPointer__s_html_a637304a0854fb097033d25d4d26768ec"><div class="ttname"><a href="structshaderStringPointer__s.html#a637304a0854fb097033d25d4d26768ec">shaderStringPointer_s::pStr</a></div><div class="ttdeci">char * pStr</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00065">tr_shader.c:65</a></div></div>
<div class="ttc" id="tr__local_8h_html_a157944afb15e3073932b378dc6e6f9cfaad756db890aeaf2d33fa4d5bd0be5adc"><div class="ttname"><a href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfaad756db890aeaf2d33fa4d5bd0be5adc">CGEN_VERTEX</a></div><div class="ttdoc">tess.vertexColors * tr.identityLight </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00228">tr_local.h:228</a></div></div>
<div class="ttc" id="tr__shader_8c_html_aedadca85b6178230c07eb8256de8ab06"><div class="ttname"><a href="tr__shader_8c.html#aedadca85b6178230c07eb8256de8ab06">ParseSkyParms</a></div><div class="ttdeci">static void ParseSkyParms(char **text)</div><div class="ttdoc">ParseSkyParms. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l01431">tr_shader.c:1431</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a0799b3175236839d31b39d35b3dbea7f"><div class="ttname"><a href="surfaceflags_8h.html#a0799b3175236839d31b39d35b3dbea7f">SURF_METAL</a></div><div class="ttdeci">#define SURF_METAL</div><div class="ttdoc">clanking footsteps </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00085">surfaceflags.h:85</a></div></div>
<div class="ttc" id="structshader__s_html_af924a498fd9f3cb298b5848ac47efc53"><div class="ttname"><a href="structshader__s.html#af924a498fd9f3cb298b5848ac47efc53">shader_s::noFog</a></div><div class="ttdeci">qboolean noFog</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00505">tr_local.h:505</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a5981ef71d347d48eddaeb44696c11765"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5981ef71d347d48eddaeb44696c11765">GLS_SRCBLEND_ONE_MINUS_DST_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01530">tr_local.h:1530</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a918208b8c57fc209a89a018a3569670c"><div class="ttname"><a href="surfaceflags_8h.html#a918208b8c57fc209a89a018a3569670c">SURF_LADDER</a></div><div class="ttdeci">#define SURF_LADDER</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00076">surfaceflags.h:76</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a8066da7a1ca1c50883b120891dbaf46c"><div class="ttname"><a href="surfaceflags_8h.html#a8066da7a1ca1c50883b120891dbaf46c">SURF_ROOF</a></div><div class="ttdeci">#define SURF_ROOF</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00097">surfaceflags.h:97</a></div></div>
<div class="ttc" id="tr__local_8h_html_aad4572f85081198179141dcda8cfb3d3"><div class="ttname"><a href="tr__local_8h.html#aad4572f85081198179141dcda8cfb3d3">R_InitSkyTexCoords</a></div><div class="ttdeci">void R_InitSkyTexCoords(float heightCloud)</div><div class="ttdoc">Called when a sky shader is parsed. </div><div class="ttdef"><b>Definition:</b> <a href="tr__sky_8c_source.html#l00882">tr_sky.c:882</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a05c596817b2aba376b069f8ebbef075d"><div class="ttname"><a href="surfaceflags_8h.html#a05c596817b2aba376b069f8ebbef075d">CONTENTS_FOG</a></div><div class="ttdeci">#define CONTENTS_FOG</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00051">surfaceflags.h:51</a></div></div>
<div class="ttc" id="tr__local_8h_html_a5f4270b11e8eb5f664fd81660a2f0427a960b6c5a48c659259ae6a6142075ee69"><div class="ttname"><a href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a960b6c5a48c659259ae6a6142075ee69">AGEN_NORMALZFADE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00207">tr_local.h:207</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_aa78c6d369f60940013579a8b2e5b22d1"><div class="ttname"><a href="structtrGlobals__t.html#aa78c6d369f60940013579a8b2e5b22d1">trGlobals_t::lightGridMulAmbient</a></div><div class="ttdeci">float lightGridMulAmbient</div><div class="ttdoc">lightgrid multipliers specified in sky shader </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01440">tr_local.h:1440</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a9b61ab90973e8137f342425ab3191cbe"><div class="ttname"><a href="surfaceflags_8h.html#a9b61ab90973e8137f342425ab3191cbe">CONTENTS_SOLID</a></div><div class="ttdeci">#define CONTENTS_SOLID</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00046">surfaceflags.h:46</a></div></div>
<div class="ttc" id="q__shared_8h_html_a331d56054b8d2cc3b4be5aaa79f9258c"><div class="ttname"><a href="q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a></div><div class="ttdeci">#define Com_Memset</div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00575">q_shared.h:575</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a8cd3bc7116153fa4ee671680b109f0a9"><div class="ttname"><a href="structtrGlobals__t.html#a8cd3bc7116153fa4ee671680b109f0a9">trGlobals_t::sunLight</a></div><div class="ttdeci">vec3_t sunLight</div><div class="ttdoc">from the sky shader for this level </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01437">tr_local.h:1437</a></div></div>
<div class="ttc" id="tr__local_8h_html_aa41e33942246b343368062d4d08b3822a1b5e6f8a20c2e0b5e00595d2e3e94249"><div class="ttname"><a href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822a1b5e6f8a20c2e0b5e00595d2e3e94249">RC_DRAW_SURFS</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l02064">tr_local.h:2064</a></div></div>
<div class="ttc" id="tr__shader_8c_html_acb3f226300198564e33b9d7032057b10"><div class="ttname"><a href="tr__shader_8c.html#acb3f226300198564e33b9d7032057b10">purgeallshaders</a></div><div class="ttdeci">qboolean purgeallshaders</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03970">tr_shader.c:3970</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a322c400276ad690123d7af809b37aea4"><div class="ttname"><a href="tr__shader_8c.html#a322c400276ad690123d7af809b37aea4">R_LoadCacheShaders</a></div><div class="ttdeci">void R_LoadCacheShaders(void)</div><div class="ttdoc">R_LoadCacheShaders. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l04251">tr_shader.c:4251</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609acebe515c42a789aafa3a3168c3036f95"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acebe515c42a789aafa3a3168c3036f95">GLS_ATEST_BITS</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01578">tr_local.h:1578</a></div></div>
<div class="ttc" id="tr__local_8h_html_aed53346f43c984f792de204496721aa6"><div class="ttname"><a href="tr__local_8h.html#aed53346f43c984f792de204496721aa6">LIGHTMAP_WHITEIMAGE</a></div><div class="ttdeci">#define LIGHTMAP_WHITEIMAGE</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00408">tr_local.h:408</a></div></div>
<div class="ttc" id="tr__shader_8c_html_accbfbb017e2efca51df4e2d767280b09"><div class="ttname"><a href="tr__shader_8c.html#accbfbb017e2efca51df4e2d767280b09">generateHashValue</a></div><div class="ttdeci">#define generateHashValue(fname)</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00054">tr_shader.c:54</a></div></div>
<div class="ttc" id="structrefimport__t_html_aea2078fbd2fef731d60a1e53116f4839"><div class="ttname"><a href="structrefimport__t.html#aea2078fbd2fef731d60a1e53116f4839">refimport_t::FS_ReadFile</a></div><div class="ttdeci">int(* FS_ReadFile)(const char *name, void **buf)</div><div class="ttdef"><b>Definition:</b> <a href="tr__public_8h_source.html#l00225">tr_public.h:225</a></div></div>
<div class="ttc" id="tr__local_8h_html_a3a34acf454edfe242091f462a082ec62a476985f4e4b1bc1d0ef7c8bcfa7cfcab"><div class="ttname"><a href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62a476985f4e4b1bc1d0ef7c8bcfa7cfcab">TMOD_TURBULENT</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00288">tr_local.h:288</a></div></div>
<div class="ttc" id="tr__animation__mdm_8c_html_afb4bd2f90ee3d992b058bb3e00872c3c"><div class="ttname"><a href="tr__animation__mdm_8c.html#afb4bd2f90ee3d992b058bb3e00872c3c">sh2</a></div><div class="ttdeci">static short * sh2</div><div class="ttdef"><b>Definition:</b> <a href="tr__animation__mdm_8c_source.html#l00070">tr_animation_mdm.c:70</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609adfec1d5f3a1d0fdfbca5f63d24d88d03"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609adfec1d5f3a1d0fdfbca5f63d24d88d03">GLS_DSTBLEND_DST_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01549">tr_local.h:1549</a></div></div>
<div class="ttc" id="structtexModInfo__t_html_ab4cc9b4613c883d589654365ca0fc71d"><div class="ttname"><a href="structtexModInfo__t.html#ab4cc9b4613c883d589654365ca0fc71d">texModInfo_t::scroll</a></div><div class="ttdeci">float scroll[2]</div><div class="ttdoc">s&amp;#39; = s + scroll[0] * time </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00336">tr_local.h:336</a></div></div>
<div class="ttc" id="tr__local_8h_html_a3a34acf454edfe242091f462a082ec62a0621f7b70224e9429d065005da5593dd"><div class="ttname"><a href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62a0621f7b70224e9429d065005da5593dd">TMOD_STRETCH</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00291">tr_local.h:291</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a5cd518a3d5766935187ce8bcaca4c4c7"><div class="ttname"><a href="surfaceflags_8h.html#a5cd518a3d5766935187ce8bcaca4c4c7">CONTENTS_DONOTENTER_LARGE</a></div><div class="ttdeci">#define CONTENTS_DONOTENTER_LARGE</div><div class="ttdoc">unused in ETL </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00062">surfaceflags.h:62</a></div></div>
<div class="ttc" id="q__shared_8c_html_ae1c8da83fdf8cbec90cd9333694f7ac7"><div class="ttname"><a href="q__shared_8c.html#ae1c8da83fdf8cbec90cd9333694f7ac7">Q_stricmpn</a></div><div class="ttdeci">int Q_stricmpn(const char *s1, const char *s2, size_t n)</div><div class="ttdoc">Compare strings without case sensitivity up to n characters. </div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8c_source.html#l01481">q_shared.c:1481</a></div></div>
<div class="ttc" id="tr__local_8h_html_a03df5920ac8ad3d828f4174d77a0c705a36bc1ac47235e3346ef0917c8b0e0cb7"><div class="ttname"><a href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a36bc1ac47235e3346ef0917c8b0e0cb7">SS_STENCIL_SHADOW</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00147">tr_local.h:147</a></div></div>
<div class="ttc" id="structfogParms__t_html_a48790f698fb2ca8273452c1b8f5b18c3"><div class="ttname"><a href="structfogParms__t.html#a48790f698fb2ca8273452c1b8f5b18c3">fogParms_t::color</a></div><div class="ttdeci">vec3_t color</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00449">tr_local.h:449</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_aa68b022a8ec7db46c690740bfadfe144"><div class="ttname"><a href="surfaceflags_8h.html#aa68b022a8ec7db46c690740bfadfe144">SURF_NOSTEPS</a></div><div class="ttdeci">#define SURF_NOSTEPS</div><div class="ttdoc">no footstep sounds </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00086">surfaceflags.h:86</a></div></div>
<div class="ttc" id="tr__init_8c_html_ad07dd4c678f4b44ba0e02c145533db5c"><div class="ttname"><a href="tr__init_8c.html#ad07dd4c678f4b44ba0e02c145533db5c">r_cacheShaders</a></div><div class="ttdeci">cvar_t * r_cacheShaders</div><div class="ttdef"><b>Definition:</b> <a href="tr__init_8c_source.html#l00154">tr_init.c:154</a></div></div>
<div class="ttc" id="structswapBuffersCommand__t_html"><div class="ttname"><a href="structswapBuffersCommand__t.html">swapBuffersCommand_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01930">tr_local.h:1930</a></div></div>
<div class="ttc" id="structshader__s_html"><div class="ttname"><a href="structshader__s.html">shader_s</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00460">tr_local.h:460</a></div></div>
<div class="ttc" id="structtexModInfo__t_html_a7c1d9657f0e66e56c8331ef5821c3e97"><div class="ttname"><a href="structtexModInfo__t.html#a7c1d9657f0e66e56c8331ef5821c3e97">texModInfo_t::rotateSpeed</a></div><div class="ttdeci">float rotateSpeed</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00341">tr_local.h:341</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a24c849f0892f437bc7bd872be87ac501"><div class="ttname"><a href="structtrGlobals__t.html#a24c849f0892f437bc7bd872be87ac501">trGlobals_t::identityLight</a></div><div class="ttdeci">float identityLight</div><div class="ttdoc">1.0 / ( 1 &lt;&lt; overbrightBits ) </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01427">tr_local.h:1427</a></div></div>
<div class="ttc" id="q__shared_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00417">q_shared.h:417</a></div></div>
<div class="ttc" id="tr__types_8h_html_ad6e514d0c9dd889c0b1b36049c979270a0b1fc1fa233305431792ab6045861d41"><div class="ttname"><a href="tr__types_8h.html#ad6e514d0c9dd889c0b1b36049c979270a0b1fc1fa233305431792ab6045861d41">FOG_NONE</a></div><div class="ttdoc">0 </div><div class="ttdef"><b>Definition:</b> <a href="tr__types_8h_source.html#l00321">tr_types.h:321</a></div></div>
<div class="ttc" id="structrefimport__t_html_ab5d3ec649e23d90ca4199d2bfc663e74"><div class="ttname"><a href="structrefimport__t.html#ab5d3ec649e23d90ca4199d2bfc663e74">refimport_t::Milliseconds</a></div><div class="ttdeci">int(* Milliseconds)(void)</div><div class="ttdef"><b>Definition:</b> <a href="tr__public_8h_source.html#l00181">tr_public.h:181</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a7714641026f653c05e6d364892f37de7"><div class="ttname"><a href="structtrGlobals__t.html#a7714641026f653c05e6d364892f37de7">trGlobals_t::projectionShadowShader</a></div><div class="ttdeci">shader_t * projectionShadowShader</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01407">tr_local.h:1407</a></div></div>
<div class="ttc" id="structcollapse__t_html_a6fa0ed4beda3fc528c5c2d50970daa46"><div class="ttname"><a href="structcollapse__t.html#a6fa0ed4beda3fc528c5c2d50970daa46">collapse_t::blendA</a></div><div class="ttdeci">int blendA</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02245">tr_shader.c:2245</a></div></div>
<div class="ttc" id="structshaderStage__t_html_a0b633a2beb8994847402eeefa423c3e9"><div class="ttname"><a href="structshaderStage__t.html#a0b633a2beb8994847402eeefa423c3e9">shaderStage_t::bundle</a></div><div class="ttdeci">textureBundle_t bundle[NUM_TEXTURE_BUNDLES]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00384">tr_local.h:384</a></div></div>
<div class="ttc" id="tr__local_8h_html_a3a34acf454edfe242091f462a082ec62a6f299127ed5ef2ee1220458aadd10910"><div class="ttname"><a href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62a6f299127ed5ef2ee1220458aadd10910">TMOD_TRANSFORM</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00287">tr_local.h:287</a></div></div>
<div class="ttc" id="structdynamicshader_html_a1b87cfec5b0dd858dea52982a1ea102e"><div class="ttname"><a href="structdynamicshader.html#a1b87cfec5b0dd858dea52982a1ea102e">dynamicshader::next</a></div><div class="ttdeci">dynamicshader_t * next</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02983">tr_shader.c:2983</a></div></div>
<div class="ttc" id="tr__image_8c_html_a6cc76c159eb16e36265535b63f75f6e1"><div class="ttname"><a href="tr__image_8c.html#a6cc76c159eb16e36265535b63f75f6e1">R_TouchImage</a></div><div class="ttdeci">qboolean R_TouchImage(image_t *inImage)</div><div class="ttdoc">Remove this image from the backupHashTable and make sure it doesn&amp;#39;t get overwritten. </div><div class="ttdef"><b>Definition:</b> <a href="tr__image_8c_source.html#l02013">tr_image.c:2013</a></div></div>
<div class="ttc" id="structcollapse__t_html_aecb666eb6218381fe97fc584956fddc1"><div class="ttname"><a href="structcollapse__t.html#aecb666eb6218381fe97fc584956fddc1">collapse_t::multitextureEnv</a></div><div class="ttdeci">int multitextureEnv</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02248">tr_shader.c:2248</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609acb6c889dd14c8d9df2cfdead41c6686e">GLS_SRCBLEND_DST_COLOR</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01525">tr_local.h:1525</a></div></div>
<div class="ttc" id="tr__local_8h_html_a2f66a4ae0d42348eca8a1333f82b1092a72d01f6e8b73dea27285bdbec6dd4a9b"><div class="ttname"><a href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a72d01f6e8b73dea27285bdbec6dd4a9b">GF_SAWTOOTH</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00166">tr_local.h:166</a></div></div>
<div class="ttc" id="structshader__s_html_a760873e6830362e6d13f7e963d1a9a75"><div class="ttname"><a href="structshader__s.html#a760873e6830362e6d13f7e963d1a9a75">shader_s::entityMergable</a></div><div class="ttdeci">qboolean entityMergable</div><div class="ttdoc">merge across entites optimizable (smoke, blood) </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00481">tr_local.h:481</a></div></div>
<div class="ttc" id="structshader__s_html_a5b69318324f7de3aba1ea6584571db1e"><div class="ttname"><a href="structshader__s.html#a5b69318324f7de3aba1ea6584571db1e">shader_s::fogParms</a></div><div class="ttdeci">fogParms_t fogParms</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00485">tr_local.h:485</a></div></div>
<div class="ttc" id="structshader__s_html_aaedbf92720608037ecec267bc6ae8a30"><div class="ttname"><a href="structshader__s.html#aaedbf92720608037ecec267bc6ae8a30">shader_s::noMipMaps</a></div><div class="ttdeci">qboolean noMipMaps</div><div class="ttdoc">for console fonts, 2D elements, etc. </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00495">tr_local.h:495</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a8c8cf460ff9d0c2dbddac1d2eb3eb2bf"><div class="ttname"><a href="tr__shader_8c.html#a8c8cf460ff9d0c2dbddac1d2eb3eb2bf">CreateInternalShaders</a></div><div class="ttdeci">static void CreateInternalShaders(void)</div><div class="ttdoc">CreateInternalShaders. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03902">tr_shader.c:3902</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a4ced9b9d7b24178d7586a2954c4165da"><div class="ttname"><a href="surfaceflags_8h.html#a4ced9b9d7b24178d7586a2954c4165da">SURF_SPLASH</a></div><div class="ttdeci">#define SURF_SPLASH</div><div class="ttdoc">out of surf&amp;#39;s, so replacing unused &amp;#39;SURF_FLESH&amp;#39; - and as SURF_CERAMIC wasn&amp;#39;t used, it&amp;#39;s now SURF_SPLASH </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00079">surfaceflags.h:79</a></div></div>
<div class="ttc" id="tr__shader_8c_html_aebbe38d36a2d56121d8624f2fc4818ab"><div class="ttname"><a href="tr__shader_8c.html#aebbe38d36a2d56121d8624f2fc4818ab">FinishShader</a></div><div class="ttdeci">static shader_t * FinishShader(void)</div><div class="ttdoc">Returns a freshly allocated shader with all the needed info from the current global working shader...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02801">tr_shader.c:2801</a></div></div>
<div class="ttc" id="tr__local_8h_html_aa41e33942246b343368062d4d08b3822aa9887869deeb5209f9ec17d90eaab99e"><div class="ttname"><a href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822aa9887869deeb5209f9ec17d90eaab99e">RC_DRAW_BUFFER</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l02065">tr_local.h:2065</a></div></div>
<div class="ttc" id="structstretchPicCommand__t_html"><div class="ttname"><a href="structstretchPicCommand__t.html">stretchPicCommand_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01949">tr_local.h:1949</a></div></div>
<div class="ttc" id="q__shared_8h_html_a110846a9664bbd925f955266e60e9136"><div class="ttname"><a href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a></div><div class="ttdeci">qboolean</div><div class="ttdoc">Boolean definition. </div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00357">q_shared.h:357</a></div></div>
<div class="ttc" id="tr__common_8h_html_a25773beb6dfe4ff97d145689df62c375"><div class="ttname"><a href="tr__common_8h.html#a25773beb6dfe4ff97d145689df62c375">Ren_Drop</a></div><div class="ttdeci">#define Ren_Drop(...)</div><div class="ttdef"><b>Definition:</b> <a href="tr__common_8h_source.html#l00086">tr_common.h:86</a></div></div>
<div class="ttc" id="tr__local_8h_html_a5f4270b11e8eb5f664fd81660a2f0427acf0d6ef5c91891a62f9b17b00121c741"><div class="ttname"><a href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427acf0d6ef5c91891a62f9b17b00121c741">AGEN_IDENTITY</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00203">tr_local.h:203</a></div></div>
<div class="ttc" id="tr__shader_8c_html_ae89be5e21e9930869d33166c3b68f6c4"><div class="ttname"><a href="tr__shader_8c.html#ae89be5e21e9930869d33166c3b68f6c4">ParseStage</a></div><div class="ttdeci">static qboolean ParseStage(shaderStage_t *stage, char **text)</div><div class="ttdoc">ParseStage. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00604">tr_shader.c:604</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_aa82fc76e26f4b92b2d357a9cdd43340f"><div class="ttname"><a href="surfaceflags_8h.html#aa82fc76e26f4b92b2d357a9cdd43340f">SURF_NODLIGHT</a></div><div class="ttdeci">#define SURF_NODLIGHT</div><div class="ttdoc">don&amp;#39;t dlight even if solid (solid lava, skies) </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00090">surfaceflags.h:90</a></div></div>
<div class="ttc" id="structshader__s_html_a9788f1c1274abb23c33b5176e353a053"><div class="ttname"><a href="structshader__s.html#a9788f1c1274abb23c33b5176e353a053">shader_s::next</a></div><div class="ttdeci">struct shader_s * next</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00520">tr_local.h:520</a></div></div>
<div class="ttc" id="structshaderStage__t_html_a9b6dc857ee93f699cf1b0d431358b774"><div class="ttname"><a href="structshaderStage__t.html#a9b6dc857ee93f699cf1b0d431358b774">shaderStage_t::adjustColorsForFog</a></div><div class="ttdeci">acff_t adjustColorsForFog</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00396">tr_local.h:396</a></div></div>
<div class="ttc" id="tr__local_8h_html_a3a34acf454edfe242091f462a082ec62a566933cb4a22257d79162ebab61d1e85"><div class="ttname"><a href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62a566933cb4a22257d79162ebab61d1e85">TMOD_SCROLL</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00289">tr_local.h:289</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a0c4ef3ab7754609984eae7b30c2d1578"><div class="ttname"><a href="surfaceflags_8h.html#a0c4ef3ab7754609984eae7b30c2d1578">CONTENTS_ORIGIN</a></div><div class="ttdeci">#define CONTENTS_ORIGIN</div><div class="ttdoc">removed before bsping an entity </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00063">surfaceflags.h:63</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a5c075d6db4d7bf46cc72a74e7a356347"><div class="ttname"><a href="tr__shader_8c.html#a5c075d6db4d7bf46cc72a74e7a356347">FILE_HASH_SIZE</a></div><div class="ttdeci">#define FILE_HASH_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00052">tr_shader.c:52</a></div></div>
<div class="ttc" id="tr__shader_8c_html_add8b99b73cfef6fc7963980f9db455de"><div class="ttname"><a href="tr__shader_8c.html#add8b99b73cfef6fc7963980f9db455de">shader</a></div><div class="ttdeci">static shader_t shader</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00044">tr_shader.c:44</a></div></div>
<div class="ttc" id="tr__shader_8c_html_afdfa1e0dee12b36ef6fc745b533b046e"><div class="ttname"><a href="tr__shader_8c.html#afdfa1e0dee12b36ef6fc745b533b046e">R_BackupShaders</a></div><div class="ttdeci">void R_BackupShaders(void)</div><div class="ttdoc">R_BackupShaders. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l04094">tr_shader.c:4094</a></div></div>
<div class="ttc" id="tr__local_8h_html_a3a34acf454edfe242091f462a082ec62af2857dd60002b592d319d9cbf40a576c"><div class="ttname"><a href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62af2857dd60002b592d319d9cbf40a576c">TMOD_SCALE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00290">tr_local.h:290</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a3641a2f9201c25daea2e70dd88e71681"><div class="ttname"><a href="structtrGlobals__t.html#a3641a2f9201c25daea2e70dd88e71681">trGlobals_t::lightmaps</a></div><div class="ttdeci">image_t * lightmaps[MAX_LIGHTMAPS]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01416">tr_local.h:1416</a></div></div>
<div class="ttc" id="tr__local_8h_html_a5f4270b11e8eb5f664fd81660a2f0427a3960eb96d46757dd6bec1c9b1c061e2b"><div class="ttname"><a href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a3960eb96d46757dd6bec1c9b1c061e2b">AGEN_SKIP</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00204">tr_local.h:204</a></div></div>
<div class="ttc" id="tr__types_8h_html_ad6e514d0c9dd889c0b1b36049c979270ae3d414a7742cf030feb8df8099eca49b"><div class="ttname"><a href="tr__types_8h.html#ad6e514d0c9dd889c0b1b36049c979270ae3d414a7742cf030feb8df8099eca49b">FOG_MAP</a></div><div class="ttdoc">4 use fog parameter specified using the &quot;fogvars&quot; in the sky shader </div><div class="ttdef"><b>Definition:</b> <a href="tr__types_8h_source.html#l00330">tr_types.h:330</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a8617df5b397d359970931b7a4b8d472e"><div class="ttname"><a href="structtrGlobals__t.html#a8617df5b397d359970931b7a4b8d472e">trGlobals_t::dlightImage</a></div><div class="ttdeci">image_t * dlightImage</div><div class="ttdoc">inverse-square highlight for projective adding </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01400">tr_local.h:1400</a></div></div>
<div class="ttc" id="tr__local_8h_html_aa41e33942246b343368062d4d08b3822a49438b0491cea0754c0c315582682f43"><div class="ttname"><a href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822a49438b0491cea0754c0c315582682f43">RC_END_OF_LIST</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l02058">tr_local.h:2058</a></div></div>
<div class="ttc" id="tr__local_8h_html_a3c96cb9c539af8c32fe85615c97e6c71"><div class="ttname"><a href="tr__local_8h.html#a3c96cb9c539af8c32fe85615c97e6c71">MAX_SHADER_DEFORMS</a></div><div class="ttdeci">#define MAX_SHADER_DEFORMS</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00297">tr_local.h:297</a></div></div>
<div class="ttc" id="structshader__s_html_afadb8a30f5d1ae9bed786cc2824a9312"><div class="ttname"><a href="structshader__s.html#afadb8a30f5d1ae9bed786cc2824a9312">shader_s::needsST2</a></div><div class="ttdeci">qboolean needsST2</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00502">tr_local.h:502</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a7d3f95f2b598474fe5852eb6f7b961db"><div class="ttname"><a href="tr__shader_8c.html#a7d3f95f2b598474fe5852eb6f7b961db">BuildShaderChecksumLookup</a></div><div class="ttdeci">static void BuildShaderChecksumLookup(void)</div><div class="ttdoc">BuildShaderChecksumLookup. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03767">tr_shader.c:3767</a></div></div>
<div class="ttc" id="structshader__s_html_ae6ada0c41fb9b5e8ca539fa5b3895eb4"><div class="ttname"><a href="structshader__s.html#ae6ada0c41fb9b5e8ca539fa5b3895eb4">shader_s::sortedIndex</a></div><div class="ttdeci">int sortedIndex</div><div class="ttdoc">this shader == tr.sortedShaders[sortedIndex] </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00466">tr_local.h:466</a></div></div>
<div class="ttc" id="structrefimport__t_html_a66f56a1fff56767323aa8fb6dcec3f8d"><div class="ttname"><a href="structrefimport__t.html#a66f56a1fff56767323aa8fb6dcec3f8d">refimport_t::FS_FreeFileList</a></div><div class="ttdeci">void(* FS_FreeFileList)(char **filelist)</div><div class="ttdef"><b>Definition:</b> <a href="tr__public_8h_source.html#l00228">tr_public.h:228</a></div></div>
<div class="ttc" id="tr__local_8h_html_a75f18f0db875d7bdaa14fed02fc2777fadf8853f6dd7033924173eaba647717e3"><div class="ttname"><a href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fadf8853f6dd7033924173eaba647717e3">DEFORM_PROJECTION_SHADOW</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00184">tr_local.h:184</a></div></div>
<div class="ttc" id="tr__shader_8c_html_ae312db0f08696bf6ac77c7b0ed5ccc4b"><div class="ttname"><a href="tr__shader_8c.html#ae312db0f08696bf6ac77c7b0ed5ccc4b">R_FindShaderByName</a></div><div class="ttdeci">shader_t * R_FindShaderByName(const char *name)</div><div class="ttdoc">Will always return a valid shader, but it might be the default shader if the real one can&amp;#39;t be found...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03229">tr_shader.c:3229</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a77d8851e0bc5022621c27190da81830a"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a77d8851e0bc5022621c27190da81830a">GLS_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01595">tr_local.h:1595</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a4e007efc30f7e9bb085dec524ed3c73a"><div class="ttname"><a href="tr__shader_8c.html#a4e007efc30f7e9bb085dec524ed3c73a">FixRenderCommandList</a></div><div class="ttdeci">static void FixRenderCommandList(int newShader)</div><div class="ttdoc">FixRenderCommandList. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02409">tr_shader.c:2409</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a8a9eed080ae1cf52c7128a52e4e07a50"><div class="ttname"><a href="tr__shader_8c.html#a8a9eed080ae1cf52c7128a52e4e07a50">RE_RegisterShaderLightMap</a></div><div class="ttdeci">qhandle_t RE_RegisterShaderLightMap(const char *name, int lightmapIndex)</div><div class="ttdoc">This is the exported shader entry point for the rest of the system It will always return an index tha...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03548">tr_shader.c:3548</a></div></div>
<div class="ttc" id="structcvar__s_html_ae873b26596ff98802364d80bbb71c72a"><div class="ttname"><a href="structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a></div><div class="ttdeci">int integer</div><div class="ttdoc">atoi( string ) </div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00840">q_shared.h:840</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a9c83c38bbf735da45a7711a1f5636f57"><div class="ttname"><a href="structtrGlobals__t.html#a9c83c38bbf735da45a7711a1f5636f57">trGlobals_t::numShaders</a></div><div class="ttdeci">int numShaders</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01458">tr_local.h:1458</a></div></div>
<div class="ttc" id="tr__local_8h_html_a4e71d334da5d51d22a8938274611ec03"><div class="ttname"><a href="tr__local_8h.html#a4e71d334da5d51d22a8938274611ec03">QSORT_SHADERNUM_SHIFT</a></div><div class="ttdeci">#define QSORT_SHADERNUM_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01285">tr_local.h:1285</a></div></div>
<div class="ttc" id="q__shared_8h_html_aa46eefcd4cf4d61e2fa13b5ff45f6847"><div class="ttname"><a href="q__shared_8h.html#aa46eefcd4cf4d61e2fa13b5ff45f6847">qhandle_t</a></div><div class="ttdeci">int qhandle_t</div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00370">q_shared.h:370</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afedad7c1b2b20cfe1b8dd391576dafac">GLS_SRCBLEND_ONE</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01524">tr_local.h:1524</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_ac74aa6092339c35717e12dc058040a01"><div class="ttname"><a href="surfaceflags_8h.html#ac74aa6092339c35717e12dc058040a01">CONTENTS_SLIME</a></div><div class="ttdeci">#define CONTENTS_SLIME</div><div class="ttdoc">slag uses the CONTENTS_SLIME flag, the shader reference is changed to &amp;#39;slag&amp;#39; </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00049">surfaceflags.h:49</a></div></div>
<div class="ttc" id="tr__shader_8c_html_aab9ed2981b91833632d1ef7e7e902217"><div class="ttname"><a href="tr__shader_8c.html#aab9ed2981b91833632d1ef7e7e902217">implicitStateBits</a></div><div class="ttdeci">static unsigned implicitStateBits</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00049">tr_shader.c:49</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a34329880bf54d25adc0f0556f9c33e30"><div class="ttname"><a href="tr__shader_8c.html#a34329880bf54d25adc0f0556f9c33e30">numBackupShaders</a></div><div class="ttdeci">static int numBackupShaders</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03930">tr_shader.c:3930</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a66e256e4677883a900739976424d1fab"><div class="ttname"><a href="surfaceflags_8h.html#a66e256e4677883a900739976424d1fab">CONTENTS_DONOTENTER</a></div><div class="ttdeci">#define CONTENTS_DONOTENTER</div><div class="ttdoc">unused in ETL </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00061">surfaceflags.h:61</a></div></div>
<div class="ttc" id="structshader__s_html_aabd84064b69c81d8ff686d48cfac82d6"><div class="ttname"><a href="structshader__s.html#aabd84064b69c81d8ff686d48cfac82d6">shader_s::explicitlyDefined</a></div><div class="ttdeci">qboolean explicitlyDefined</div><div class="ttdoc">found in a .shader file </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00476">tr_local.h:476</a></div></div>
<div class="ttc" id="structshader__s_html_a8a2dbab0cb598e82bd1866b0bf300aa6"><div class="ttname"><a href="structshader__s.html#a8a2dbab0cb598e82bd1866b0bf300aa6">shader_s::multitextureEnv</a></div><div class="ttdeci">int multitextureEnv</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00491">tr_local.h:491</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a56da113b4303e6a048b5079e0d54b2c1"><div class="ttname"><a href="surfaceflags_8h.html#a56da113b4303e6a048b5079e0d54b2c1">SURF_ALPHASHADOW</a></div><div class="ttdeci">#define SURF_ALPHASHADOW</div><div class="ttdoc">do per-pixel light shadow casting in q3map </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00089">surfaceflags.h:89</a></div></div>
<div class="ttc" id="structtexModInfo__t_html_a7b41a1be851611687b52bfafa342c0e0"><div class="ttname"><a href="structtexModInfo__t.html#a7b41a1be851611687b52bfafa342c0e0">texModInfo_t::type</a></div><div class="ttdeci">texMod_t type</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00322">tr_local.h:322</a></div></div>
<div class="ttc" id="tr__shader_8c_html_adc7392b4ee0ab13892fd3f48e5b438a2"><div class="ttname"><a href="tr__shader_8c.html#adc7392b4ee0ab13892fd3f48e5b438a2">ParseVector</a></div><div class="ttdeci">static qboolean ParseVector(char **text, int count, float *v)</div><div class="ttdoc">ParseVector. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00140">tr_shader.c:140</a></div></div>
<div class="ttc" id="q__shared_8c_html_ae6426bdf1634fb3553e1d73bad95fd7f"><div class="ttname"><a href="q__shared_8c.html#ae6426bdf1634fb3553e1d73bad95fd7f">COM_DefaultExtension</a></div><div class="ttdeci">void COM_DefaultExtension(char *path, size_t maxSize, const char *extension)</div><div class="ttdoc">if path doesn&amp;#39;t have an extension, then append the specified one (which should include the ...</div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8c_source.html#l00176">q_shared.c:176</a></div></div>
<div class="ttc" id="q__math_8h_html_a5fab60d2366b4888d93d5814eb04c9e9"><div class="ttname"><a href="q__math_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a></div><div class="ttdeci">vec_t vec3_t[3]</div><div class="ttdef"><b>Definition:</b> <a href="q__math_8h_source.html#l00043">q_math.h:43</a></div></div>
<div class="ttc" id="tr__local_8h_html_aa41e33942246b343368062d4d08b3822a75e586aac893f50caab85e8bd4f29b02"><div class="ttname"><a href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822a75e586aac893f50caab85e8bd4f29b02">RC_STRETCH_PIC</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l02060">tr_local.h:2060</a></div></div>
<div class="ttc" id="tr__local_8h_html_a1480f4cb61af8bab511fad028c084b20ae116d7ed4c4d372d170555d1e9ddd387"><div class="ttname"><a href="tr__local_8h.html#a1480f4cb61af8bab511fad028c084b20ae116d7ed4c4d372d170555d1e9ddd387">CT_BACK_SIDED</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00418">tr_local.h:418</a></div></div>
<div class="ttc" id="qgl_8h_html_a8a0a412364e3499d57bc9e15a5345852"><div class="ttname"><a href="qgl_8h.html#a8a0a412364e3499d57bc9e15a5345852">qglActiveTextureARB</a></div><div class="ttdeci">#define qglActiveTextureARB</div><div class="ttdef"><b>Definition:</b> <a href="qgl_8h_source.html#l00055">qgl.h:55</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a0b70f0cd27eb851a6ca5edbadd07e570"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a0b70f0cd27eb851a6ca5edbadd07e570">GLS_DSTBLEND_BITS</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01552">tr_local.h:1552</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a86117fc10577714d3517bbbcfb298d91"><div class="ttname"><a href="surfaceflags_8h.html#a86117fc10577714d3517bbbcfb298d91">SURF_GRAVEL</a></div><div class="ttdeci">#define SURF_GRAVEL</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00094">surfaceflags.h:94</a></div></div>
<div class="ttc" id="structcollapse__t_html_a6d06ba9a6152dc980ed244dc8f404f81"><div class="ttname"><a href="structcollapse__t.html#a6d06ba9a6152dc980ed244dc8f404f81">collapse_t::multitextureBlend</a></div><div class="ttdeci">int multitextureBlend</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02249">tr_shader.c:2249</a></div></div>
<div class="ttc" id="structdrawSurf__s_html"><div class="ttname"><a href="structdrawSurf__s.html">drawSurf_s</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00760">tr_local.h:760</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a26544a65eb3a77514c16db1f7a7ef36a"><div class="ttname"><a href="structtrGlobals__t.html#a26544a65eb3a77514c16db1f7a7ef36a">trGlobals_t::whiteImage</a></div><div class="ttdeci">image_t * whiteImage</div><div class="ttdoc">full of 0xff </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01402">tr_local.h:1402</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a29562977973a8c3ebb5d5c495f46059d"><div class="ttname"><a href="tr__shader_8c.html#a29562977973a8c3ebb5d5c495f46059d">CollapseMultitexture</a></div><div class="ttdeci">static qboolean CollapseMultitexture(void)</div><div class="ttdoc">Attempt to combine two stages into a single multitexture stage. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02290">tr_shader.c:2290</a></div></div>
<div class="ttc" id="structcollapse__t_html_a5e5dc1743ca7f1bd28f0eedac4498d1c"><div class="ttname"><a href="structcollapse__t.html#a5e5dc1743ca7f1bd28f0eedac4498d1c">collapse_t::blendB</a></div><div class="ttdeci">int blendB</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02246">tr_shader.c:2246</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a9803b1fa0f3483fe19f9b19187651897"><div class="ttname"><a href="surfaceflags_8h.html#a9803b1fa0f3483fe19f9b19187651897">SURF_WOOD</a></div><div class="ttdeci">#define SURF_WOOD</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00091">surfaceflags.h:91</a></div></div>
<div class="ttc" id="tr__local_8h_html_a6ee900266c2268e950038aa773b30b3d"><div class="ttname"><a href="tr__local_8h.html#a6ee900266c2268e950038aa773b30b3d">RB_StageIteratorLightmappedMultitexture</a></div><div class="ttdeci">void RB_StageIteratorLightmappedMultitexture(void)</div><div class="ttdoc">RB_StageIteratorLightmappedMultitexture. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shade_8c_source.html#l01858">tr_shade.c:1858</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a45ba7d41e52a4abb372861ae8881776f"><div class="ttname"><a href="surfaceflags_8h.html#a45ba7d41e52a4abb372861ae8881776f">CONTENTS_NODROP</a></div><div class="ttdeci">#define CONTENTS_NODROP</div><div class="ttdoc">don&amp;#39;t leave bodies or items (death fog, lava) </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00071">surfaceflags.h:71</a></div></div>
<div class="ttc" id="tr__local_8h_html_a03df5920ac8ad3d828f4174d77a0c705a6b2c619db929f7bd5a69e8ef573e60cf"><div class="ttname"><a href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a6b2c619db929f7bd5a69e8ef573e60cf">SS_OPAQUE</a></div><div class="ttdoc">opaque </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00130">tr_local.h:130</a></div></div>
<div class="ttc" id="tr__local_8h_html_a157944afb15e3073932b378dc6e6f9cfab22bdc334d6355c003a10be8ed27b99b"><div class="ttname"><a href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfab22bdc334d6355c003a10be8ed27b99b">CGEN_WAVEFORM</a></div><div class="ttdoc">programmatically generated </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00230">tr_local.h:230</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a8ee2582c5cc93d0d810730521a26750b"><div class="ttname"><a href="tr__shader_8c.html#a8ee2582c5cc93d0d810730521a26750b">R_ShaderCanBeCached</a></div><div class="ttdeci">qboolean R_ShaderCanBeCached(shader_t *sh)</div><div class="ttdoc">R_ShaderCanBeCached. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03993">tr_shader.c:3993</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_aac35656af63d3b2b5057189ed4c45a3e"><div class="ttname"><a href="structtrGlobals__t.html#aac35656af63d3b2b5057189ed4c45a3e">trGlobals_t::defaultShader</a></div><div class="ttdeci">shader_t * defaultShader</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01405">tr_local.h:1405</a></div></div>
<div class="ttc" id="tr__local_8h_html_a09448f021c14aabac18683284291174b"><div class="ttname"><a href="tr__local_8h.html#a09448f021c14aabac18683284291174b">LIGHTMAP_NONE</a></div><div class="ttdeci">#define LIGHTMAP_NONE</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00409">tr_local.h:409</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a84ada04fc0a9f70bb02a7b23fc14c18d"><div class="ttname"><a href="tr__shader_8c.html#a84ada04fc0a9f70bb02a7b23fc14c18d">ParseWaveForm</a></div><div class="ttdeci">static void ParseWaveForm(char **text, waveForm_t *wave)</div><div class="ttdoc">ParseWaveForm. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00331">tr_shader.c:331</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_ac1437c4ffc959deb4c6d0ce6a0a2d290"><div class="ttname"><a href="surfaceflags_8h.html#ac1437c4ffc959deb4c6d0ce6a0a2d290">SURF_SLICK</a></div><div class="ttdeci">#define SURF_SLICK</div><div class="ttdoc">effects game physics </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00074">surfaceflags.h:74</a></div></div>
<div class="ttc" id="structrefimport__t_html_a3f8ba8b09086178fd9e92116a9ed49eb"><div class="ttname"><a href="structrefimport__t.html#a3f8ba8b09086178fd9e92116a9ed49eb">refimport_t::Hunk_AllocateTempMemory</a></div><div class="ttdeci">void *(* Hunk_AllocateTempMemory)(unsigned int size)</div><div class="ttdef"><b>Definition:</b> <a href="tr__public_8h_source.html#l00192">tr_public.h:192</a></div></div>
<div class="ttc" id="tr__local_8h_html_a2f66a4ae0d42348eca8a1333f82b1092aa5796b696f463943c26e1e8c594c881c"><div class="ttname"><a href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092aa5796b696f463943c26e1e8c594c881c">GF_NOISE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00169">tr_local.h:169</a></div></div>
<div class="ttc" id="structtextureBundle__t_html_a4154e5838fbe474c16f97d6e31cf5232"><div class="ttname"><a href="structtextureBundle__t.html#a4154e5838fbe474c16f97d6e31cf5232">textureBundle_t::image</a></div><div class="ttdeci">image_t * image[MAX_IMAGE_ANIMATIONS]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00359">tr_local.h:359</a></div></div>
<div class="ttc" id="tr__init_8c_html_a783d57e9d724bb0e296b4f0e9f7cab0d"><div class="ttname"><a href="tr__init_8c.html#a783d57e9d724bb0e296b4f0e9f7cab0d">r_extCompressedTextures</a></div><div class="ttdeci">cvar_t * r_extCompressedTextures</div><div class="ttdef"><b>Definition:</b> <a href="tr__init_8c_source.html#l00094">tr_init.c:94</a></div></div>
<div class="ttc" id="structtextureBundle__t_html_ac460ff874c73b07d93144cf5c760cb81"><div class="ttname"><a href="structtextureBundle__t.html#ac460ff874c73b07d93144cf5c760cb81">textureBundle_t::texMods</a></div><div class="ttdeci">texModInfo_t * texMods</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00367">tr_local.h:367</a></div></div>
<div class="ttc" id="tr__local_8h_html_a6bfbcfc4449ac0e3937e3182703660fca37acf280d9b867c360c0ca203e6bdfa2"><div class="ttname"><a href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca37acf280d9b867c360c0ca203e6bdfa2">TCGEN_TEXTURE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00245">tr_local.h:245</a></div></div>
<div class="ttc" id="tr__local_8h_html_a75f18f0db875d7bdaa14fed02fc2777fa6642036ed904402f492f6d4561263a2e"><div class="ttname"><a href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fa6642036ed904402f492f6d4561263a2e">DEFORM_NORMALS</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00181">tr_local.h:181</a></div></div>
<div class="ttc" id="structbackEndData__t_html_ab549f9de564b7da040af8e9d51371cf3"><div class="ttname"><a href="structbackEndData__t.html#ab549f9de564b7da040af8e9d51371cf3">backEndData_t::commands</a></div><div class="ttdeci">renderCommandList_t commands</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l02111">tr_local.h:2111</a></div></div>
<div class="ttc" id="tr__local_8h_html_ab59af7adf1cc82196d2cedbfd127ffb5a0fc501b5f3fe31aab8026fea86522588"><div class="ttname"><a href="tr__local_8h.html#ab59af7adf1cc82196d2cedbfd127ffb5a0fc501b5f3fe31aab8026fea86522588">FP_LE</a></div><div class="ttdoc">surface is trnaslucent, but still needs a fog pass (fog surface) </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00430">tr_local.h:430</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a379ee38303eb2bfeb9a0273de9228f19"><div class="ttname"><a href="tr__shader_8c.html#a379ee38303eb2bfeb9a0273de9228f19">R_GetShaderByHandle</a></div><div class="ttdeci">shader_t * R_GetShaderByHandle(qhandle_t hShader)</div><div class="ttdoc">When a handle is passed in by another module, this range checks it and returns a valid (possibly defa...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03649">tr_shader.c:3649</a></div></div>
<div class="ttc" id="tr__local_8h_html_aa41e33942246b343368062d4d08b3822ae0f8207e89a519b869824170b1064ada"><div class="ttname"><a href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822ae0f8207e89a519b869824170b1064ada">RC_SET_COLOR</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l02059">tr_local.h:2059</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_aa4a91f2f95ce09afeedfd06a5d26a26f"><div class="ttname"><a href="surfaceflags_8h.html#aa4a91f2f95ce09afeedfd06a5d26a26f">SURF_RUBBLE</a></div><div class="ttdeci">#define SURF_RUBBLE</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00098">surfaceflags.h:98</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_ac33a4760c06c622f4fb301efb69b0e82"><div class="ttname"><a href="surfaceflags_8h.html#ac33a4760c06c622f4fb301efb69b0e82">CONTENTS_MISSILECLIP</a></div><div class="ttdeci">#define CONTENTS_MISSILECLIP</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00052">surfaceflags.h:52</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_ac637e5669ddac0b56802fc22ee762425"><div class="ttname"><a href="structtrGlobals__t.html#ac637e5669ddac0b56802fc22ee762425">trGlobals_t::shaders</a></div><div class="ttdeci">shader_t * shaders[MAX_SHADERS]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01459">tr_local.h:1459</a></div></div>
<div class="ttc" id="tr__local_8h_html_a75f18f0db875d7bdaa14fed02fc2777fabd2aeabc8bca6aec29152ac069925f4b"><div class="ttname"><a href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fabd2aeabc8bca6aec29152ac069925f4b">DEFORM_BULGE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00182">tr_local.h:182</a></div></div>
<div class="ttc" id="structshader__s_html_a8d3a2544c772c37f23d29cc2b07de54d"><div class="ttname"><a href="structshader__s.html#a8d3a2544c772c37f23d29cc2b07de54d">shader_s::noPicMip</a></div><div class="ttdeci">qboolean noPicMip</div><div class="ttdoc">for images that must always be full resolution </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00496">tr_local.h:496</a></div></div>
<div class="ttc" id="tr__local_8h_html_aa41e33942246b343368062d4d08b3822aeb7456dd272e67909ae53f68dcd2e1e6"><div class="ttname"><a href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822aeb7456dd272e67909ae53f68dcd2e1e6">RC_STRETCH_PIC_GRADIENT</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l02063">tr_local.h:2063</a></div></div>
<div class="ttc" id="tr__local_8h_html_a2f66a4ae0d42348eca8a1333f82b1092a76b4f522ded9e89e54ba343ffa6e4369"><div class="ttname"><a href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a76b4f522ded9e89e54ba343ffa6e4369">GF_SIN</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00163">tr_local.h:163</a></div></div>
<div class="ttc" id="tr__shader_8c_html_acc7c00663d190d26219aacc43b1adb99"><div class="ttname"><a href="tr__shader_8c.html#acc7c00663d190d26219aacc43b1adb99">R_ShaderList_f</a></div><div class="ttdeci">void R_ShaderList_f(void)</div><div class="ttdoc">Dump information on all valid shaders to the console A second parameter will cause it to print in sor...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03668">tr_shader.c:3668</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a77a982859fb79acc83fa94c15f95effc"><div class="ttname"><a href="surfaceflags_8h.html#a77a982859fb79acc83fa94c15f95effc">SURF_MONSLICK_N</a></div><div class="ttdeci">#define SURF_MONSLICK_N</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00102">surfaceflags.h:102</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609afc816fc27c8a956f6c07510f93e2b523"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609afc816fc27c8a956f6c07510f93e2b523">GLS_DSTBLEND_SRC_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01547">tr_local.h:1547</a></div></div>
<div class="ttc" id="structglconfig__t_html_aeda7b80874fcbcd4653022011ff50bd8"><div class="ttname"><a href="structglconfig__t.html#aeda7b80874fcbcd4653022011ff50bd8">glconfig_t::textureCompression</a></div><div class="ttdeci">textureCompression_t textureCompression</div><div class="ttdef"><b>Definition:</b> <a href="tr__types_8h_source.html#l00459">tr_types.h:459</a></div></div>
<div class="ttc" id="structrefimport__t_html_a3f2f49cacd03b754aa17590b65ca0228"><div class="ttname"><a href="structrefimport__t.html#a3f2f49cacd03b754aa17590b65ca0228">refimport_t::Z_Malloc</a></div><div class="ttdeci">void *(* Z_Malloc)(int bytes)</div><div class="ttdoc">dynamic memory allocator for things that need to be freed </div><div class="ttdef"><b>Definition:</b> <a href="tr__public_8h_source.html#l00199">tr_public.h:199</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a3a19010267aff07d5716badd2873a6bd"><div class="ttname"><a href="surfaceflags_8h.html#a3a19010267aff07d5716badd2873a6bd">CONTENTS_DETAIL</a></div><div class="ttdeci">#define CONTENTS_DETAIL</div><div class="ttdoc">brushes not used for the bsp </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00066">surfaceflags.h:66</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_aea5a21d8f3283636bc595f3f6ee9f7e4"><div class="ttname"><a href="structtrGlobals__t.html#aea5a21d8f3283636bc595f3f6ee9f7e4">trGlobals_t::defaultImage</a></div><div class="ttdeci">image_t * defaultImage</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01397">tr_local.h:1397</a></div></div>
<div class="ttc" id="tr__local_8h_html_a03df5920ac8ad3d828f4174d77a0c705a9e7ce240847a86e342b266101947163f"><div class="ttname"><a href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a9e7ce240847a86e342b266101947163f">SS_ENVIRONMENT</a></div><div class="ttdoc">sky box </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00129">tr_local.h:129</a></div></div>
<div class="ttc" id="tr__shader_8c_html_ab6d3fb4c10b6e127071890a047ff497b"><div class="ttname"><a href="tr__shader_8c.html#ab6d3fb4c10b6e127071890a047ff497b">GeneratePermanentShader</a></div><div class="ttdeci">static shader_t * GeneratePermanentShader(void)</div><div class="ttdoc">GeneratePermanentShader. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02523">tr_shader.c:2523</a></div></div>
<div class="ttc" id="tr__types_8h_html_ad6e514d0c9dd889c0b1b36049c979270ab9d1c751bec4dd35f665b96e7ae2cf86"><div class="ttname"><a href="tr__types_8h.html#ad6e514d0c9dd889c0b1b36049c979270ab9d1c751bec4dd35f665b96e7ae2cf86">FOG_CMD_SWITCHFOG</a></div><div class="ttdoc">10 transition to the fog specified in the second parameter of R_SetFog(...) (keep synch in sv_ccmds...</div><div class="ttdef"><b>Definition:</b> <a href="tr__types_8h_source.html#l00337">tr_types.h:337</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a19ac459fd24ff4f766b78dc2bdd963b3"><div class="ttname"><a href="structtrGlobals__t.html#a19ac459fd24ff4f766b78dc2bdd963b3">trGlobals_t::shadowShader</a></div><div class="ttdeci">shader_t * shadowShader</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01406">tr_local.h:1406</a></div></div>
<div class="ttc" id="tr__animation__mdm_8c_html_a7e13b3568b7b041b8cab1201461c2ab5"><div class="ttname"><a href="tr__animation__mdm_8c.html#a7e13b3568b7b041b8cab1201461c2ab5">v</a></div><div class="ttdeci">static mdmVertex_t * v</div><div class="ttdef"><b>Definition:</b> <a href="tr__animation__mdm_8c_source.html#l00060">tr_animation_mdm.c:60</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a26c7b5847174a854a49f9b7db6dee3e2"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a26c7b5847174a854a49f9b7db6dee3e2">GLS_DEPTHMASK_TRUE</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01561">tr_local.h:1561</a></div></div>
<div class="ttc" id="structrefimport__t_html_aeebd8342a3d6978b06c0dcd6dba30b56"><div class="ttname"><a href="structrefimport__t.html#aeebd8342a3d6978b06c0dcd6dba30b56">refimport_t::Hunk_Alloc</a></div><div class="ttdeci">void *(* Hunk_Alloc)(unsigned int size, ha_pref pref)</div><div class="ttdef"><b>Definition:</b> <a href="tr__public_8h_source.html#l00190">tr_public.h:190</a></div></div>
<div class="ttc" id="tr__local_8h_html_a2f66a4ae0d42348eca8a1333f82b1092ad857bfa16bae3a2d7e70c6de731b0559"><div class="ttname"><a href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092ad857bfa16bae3a2d7e70c6de731b0559">GF_TRIANGLE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00165">tr_local.h:165</a></div></div>
<div class="ttc" id="structpoly2dCommand__t_html"><div class="ttname"><a href="structpoly2dCommand__t.html">poly2dCommand_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01967">tr_local.h:1967</a></div></div>
<div class="ttc" id="tr__local_8h_html_aa41e33942246b343368062d4d08b3822a096bbe7cd283c4935cf1dd692bb482b6"><div class="ttname"><a href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822a096bbe7cd283c4935cf1dd692bb482b6">RC_2DPOLYS</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l02061">tr_local.h:2061</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609aae250dd615a1365a9675e90fda3ab72d"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609aae250dd615a1365a9675e90fda3ab72d">GLS_DEPTHFUNC_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01568">tr_local.h:1568</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a8fdf7ae7711df49a80e9cc706c0e3ce9"><div class="ttname"><a href="tr__shader_8c.html#a8fdf7ae7711df49a80e9cc706c0e3ce9">RE_RegisterShaderNoMip</a></div><div class="ttdeci">qhandle_t RE_RegisterShaderNoMip(const char *name)</div><div class="ttdoc">RE_RegisterShaderNoMip. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03617">tr_shader.c:3617</a></div></div>
<div class="ttc" id="structdrawSurfsCommand__t_html_aab88e321fa4985fe8a1696789b8dbec9"><div class="ttname"><a href="structdrawSurfsCommand__t.html#aab88e321fa4985fe8a1696789b8dbec9">drawSurfsCommand_t::drawSurfs</a></div><div class="ttdeci">drawSurf_t * drawSurfs</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01985">tr_local.h:1985</a></div></div>
<div class="ttc" id="structdeformStage__t_html_af895f34ca8dd977b48199c90714229b5"><div class="ttname"><a href="structdeformStage__t.html#af895f34ca8dd977b48199c90714229b5">deformStage_t::deformationWave</a></div><div class="ttdeci">waveForm_t deformationWave</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00308">tr_local.h:308</a></div></div>
<div class="ttc" id="tr__shader_8c_html_ad9399c90d88d7a45f462e9434202a25f"><div class="ttname"><a href="tr__shader_8c.html#ad9399c90d88d7a45f462e9434202a25f">R_CacheShaderFreeExt</a></div><div class="ttdeci">void R_CacheShaderFreeExt(const char *name, void *ptr, const char *file, int line)</div><div class="ttdoc">R_CacheShaderFreeExt. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03962">tr_shader.c:3962</a></div></div>
<div class="ttc" id="tr__shader_8c_html_aebab19fec7c981d20371396f9f58aa05"><div class="ttname"><a href="tr__shader_8c.html#aebab19fec7c981d20371396f9f58aa05">SetImplicitShaderStages</a></div><div class="ttdeci">static void SetImplicitShaderStages(image_t *image)</div><div class="ttdoc">Sets a shader&amp;#39;s stages to one of several defaults. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02704">tr_shader.c:2704</a></div></div>
<div class="ttc" id="structskyParms__t_html_aa9db95ef52d85e460612059aae532063"><div class="ttname"><a href="structskyParms__t.html#aa9db95ef52d85e460612059aae532063">skyParms_t::innerbox</a></div><div class="ttdeci">image_t * innerbox[6]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00440">tr_local.h:440</a></div></div>
<div class="ttc" id="tr__cmds_8c_html_aba8115c5cabdc2f4c577b6ad30a9f357"><div class="ttname"><a href="tr__cmds_8c.html#aba8115c5cabdc2f4c577b6ad30a9f357">R_IssuePendingRenderCommands</a></div><div class="ttdeci">void R_IssuePendingRenderCommands(void)</div><div class="ttdoc">Issue any pending commands and wait for them to complete. After exiting, the render thread will have ...</div><div class="ttdef"><b>Definition:</b> <a href="tr__cmds_8c_source.html#l00130">tr_cmds.c:130</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a4822e1693851ba9c47eabd1aea1ffbdd"><div class="ttname"><a href="surfaceflags_8h.html#a4822e1693851ba9c47eabd1aea1ffbdd">CONTENTS_LAVA</a></div><div class="ttdeci">#define CONTENTS_LAVA</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00048">surfaceflags.h:48</a></div></div>
<div class="ttc" id="tr__local_8h_html_ae4e9045737fe24f4ce7eb31f2344f7b5"><div class="ttname"><a href="tr__local_8h.html#ae4e9045737fe24f4ce7eb31f2344f7b5">LIGHTMAP_2D</a></div><div class="ttdeci">#define LIGHTMAP_2D</div><div class="ttdoc">shader is for 2D rendering </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00406">tr_local.h:406</a></div></div>
<div class="ttc" id="structsetColorCommand__t_html"><div class="ttname"><a href="structsetColorCommand__t.html">setColorCommand_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01897">tr_local.h:1897</a></div></div>
<div class="ttc" id="tr__local_8h_html_abc4424e8b066b9fdb3a369fe35d9e1a8"><div class="ttname"><a href="tr__local_8h.html#abc4424e8b066b9fdb3a369fe35d9e1a8">RB_StageIteratorGeneric</a></div><div class="ttdeci">void RB_StageIteratorGeneric(void)</div><div class="ttdoc">RB_StageIteratorGeneric. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shade_8c_source.html#l01689">tr_shade.c:1689</a></div></div>
<div class="ttc" id="tr__local_8h_html_a2f66a4ae0d42348eca8a1333f82b1092a5b6a4fc6de5dfca5140f2663e4341f6a"><div class="ttname"><a href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a5b6a4fc6de5dfca5140f2663e4341f6a">GF_SQUARE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00164">tr_local.h:164</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609af509a0566baa77afd7d612455ee365a0"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609af509a0566baa77afd7d612455ee365a0">GLS_SRCBLEND_ZERO</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01523">tr_local.h:1523</a></div></div>
<div class="ttc" id="tr__local_8h_html_a5f4270b11e8eb5f664fd81660a2f0427aff007a7d40564427b61afabb9ed95ade"><div class="ttname"><a href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427aff007a7d40564427b61afabb9ed95ade">AGEN_ENTITY</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00205">tr_local.h:205</a></div></div>
<div class="ttc" id="tr__local_8h_html_a157944afb15e3073932b378dc6e6f9cfa3fd04125fe0240035c5da6bc2e31d310"><div class="ttname"><a href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa3fd04125fe0240035c5da6bc2e31d310">CGEN_IDENTITY</a></div><div class="ttdoc">always (1,1,1,1) </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00224">tr_local.h:224</a></div></div>
<div class="ttc" id="tr__local_8h_html_acccb0d46274afb7b3c39e9393075b12f"><div class="ttname"><a href="tr__local_8h.html#acccb0d46274afb7b3c39e9393075b12f">LIGHTMAP_BY_VERTEX</a></div><div class="ttdeci">#define LIGHTMAP_BY_VERTEX</div><div class="ttdoc">pre-lit triangle models </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00407">tr_local.h:407</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a6749ab228855b2cfcd47d45999fa78e9"><div class="ttname"><a href="tr__shader_8c.html#a6749ab228855b2cfcd47d45999fa78e9">ScanAndLoadShaderFiles</a></div><div class="ttdeci">static void ScanAndLoadShaderFiles(void)</div><div class="ttdoc">Finds and loads all .shader files, combining them into a single large text block that can be scanned ...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03829">tr_shader.c:3829</a></div></div>
<div class="ttc" id="tr__animation__mdm_8c_html_a23afc80b9a1cc608bfe2c597cb98ed27"><div class="ttname"><a href="tr__animation__mdm_8c.html#a23afc80b9a1cc608bfe2c597cb98ed27">sh</a></div><div class="ttdeci">static short * sh</div><div class="ttdef"><b>Definition:</b> <a href="tr__animation__mdm_8c_source.html#l00070">tr_animation_mdm.c:70</a></div></div>
<div class="ttc" id="tr__local_8h_html_a4b3a68960d20a863d417f91ff1a5f929a52472b8a6b8d3b378338c4f88771ccec"><div class="ttname"><a href="tr__local_8h.html#a4b3a68960d20a863d417f91ff1a5f929a52472b8a6b8d3b378338c4f88771ccec">ACFF_MODULATE_RGB</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00259">tr_local.h:259</a></div></div>
<div class="ttc" id="structtextureBundle__t_html_a2a22ef68d4b1c59202705c84f515424c"><div class="ttname"><a href="structtextureBundle__t.html#a2a22ef68d4b1c59202705c84f515424c">textureBundle_t::tcGenVectors</a></div><div class="ttdeci">vec3_t tcGenVectors[2]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00364">tr_local.h:364</a></div></div>
<div class="ttc" id="structshader__s_html_a4f5964ea41b9639f7208b75f1ada2c61"><div class="ttname"><a href="structshader__s.html#a4f5964ea41b9639f7208b75f1ada2c61">shader_s::portalRange</a></div><div class="ttdeci">float portalRange</div><div class="ttdoc">distance to fog out at </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00487">tr_local.h:487</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a114cdcf7846c04ea2b4edee9757b1957"><div class="ttname"><a href="surfaceflags_8h.html#a114cdcf7846c04ea2b4edee9757b1957">CONTENTS_TRANSLUCENT</a></div><div class="ttdeci">#define CONTENTS_TRANSLUCENT</div><div class="ttdoc">don&amp;#39;t consume surface fragments inside </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00069">surfaceflags.h:69</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a1e8b198246ea6db430fd0badd5a493d8"><div class="ttname"><a href="surfaceflags_8h.html#a1e8b198246ea6db430fd0badd5a493d8">SURF_SNOW</a></div><div class="ttdeci">#define SURF_SNOW</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00096">surfaceflags.h:96</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a86df4996b68e0f7d397ab658cb31a6a1"><div class="ttname"><a href="tr__shader_8c.html#a86df4996b68e0f7d397ab658cb31a6a1">R_PurgeShaders</a></div><div class="ttdeci">void R_PurgeShaders(int count)</div><div class="ttdoc">R_PurgeShaders. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03976">tr_shader.c:3976</a></div></div>
<div class="ttc" id="tr__local_8h_html"><div class="ttname"><a href="tr__local_8h.html">tr_local.h</a></div></div>
<div class="ttc" id="structshader__s_html_af94e3b944a5a6b22a0cf578d62859b08"><div class="ttname"><a href="structshader__s.html#af94e3b944a5a6b22a0cf578d62859b08">shader_s::cullType</a></div><div class="ttdeci">cullType_t cullType</div><div class="ttdoc">CT_FRONT_SIDED, CT_BACK_SIDED, or CT_TWO_SIDED. </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00493">tr_local.h:493</a></div></div>
<div class="ttc" id="tr__local_8h_html_a03df5920ac8ad3d828f4174d77a0c705afb09f05e459b02e210cfdb8b743338d8"><div class="ttname"><a href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705afb09f05e459b02e210cfdb8b743338d8">SS_PORTAL</a></div><div class="ttdoc">mirrors, portals, viewscreens </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00128">tr_local.h:128</a></div></div>
<div class="ttc" id="tr__local_8h_html_a8493c1d2f9f4c2ddd3b3abda295d680a"><div class="ttname"><a href="tr__local_8h.html#a8493c1d2f9f4c2ddd3b3abda295d680a">RB_StageIteratorSky</a></div><div class="ttdeci">void RB_StageIteratorSky(void)</div><div class="ttdoc">All of the visible sky triangles are in tess. </div><div class="ttdef"><b>Definition:</b> <a href="tr__sky_8c_source.html#l01086">tr_sky.c:1086</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_ac615ea67e6d15f29ba171965b33f2a1d"><div class="ttname"><a href="structtrGlobals__t.html#ac615ea67e6d15f29ba171965b33f2a1d">trGlobals_t::scratchImage</a></div><div class="ttdeci">image_t * scratchImage[32]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01398">tr_local.h:1398</a></div></div>
<div class="ttc" id="structrefimport__t_html_a28c4af91358e17a3d3a3d2d05eff7578"><div class="ttname"><a href="structrefimport__t.html#a28c4af91358e17a3d3a3d2d05eff7578">refimport_t::Free</a></div><div class="ttdeci">void(* Free)(void *buf)</div><div class="ttdef"><b>Definition:</b> <a href="tr__public_8h_source.html#l00201">tr_public.h:201</a></div></div>
<div class="ttc" id="q__shared_8h_html_a795cf7b86a6e2a8b8ca0e3f60be45ae6abee3929de920502d92788a8576c641e2"><div class="ttname"><a href="q__shared_8h.html#a795cf7b86a6e2a8b8ca0e3f60be45ae6abee3929de920502d92788a8576c641e2">PRINT_WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00503">q_shared.h:503</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a5610a0415f265b57443d01ee10809655"><div class="ttname"><a href="tr__shader_8c.html#a5610a0415f265b57443d01ee10809655">CreateExternalShaders</a></div><div class="ttdeci">static void CreateExternalShaders(void)</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03920">tr_shader.c:3920</a></div></div>
<div class="ttc" id="q__shared_8c_html_ac046a0f73d908d89f1fc8161c812f1b1"><div class="ttname"><a href="q__shared_8c.html#ac046a0f73d908d89f1fc8161c812f1b1">COM_ParseExt</a></div><div class="ttdeci">char * COM_ParseExt(char **data_p, qboolean allowLineBreaks)</div><div class="ttdoc">COM_ParseExt. </div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8c_source.html#l00593">q_shared.c:593</a></div></div>
<div class="ttc" id="tr__local_8h_html_a157944afb15e3073932b378dc6e6f9cfa6923a32c80a34025ef0acd86f4db4295"><div class="ttname"><a href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa6923a32c80a34025ef0acd86f4db4295">CGEN_ONE_MINUS_VERTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00229">tr_local.h:229</a></div></div>
<div class="ttc" id="structtextureBundle__t_html_a6b2821d92e8d4ca19260520fb0f683ed"><div class="ttname"><a href="structtextureBundle__t.html#a6b2821d92e8d4ca19260520fb0f683ed">textureBundle_t::numImageAnimations</a></div><div class="ttdeci">int numImageAnimations</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00360">tr_local.h:360</a></div></div>
<div class="ttc" id="structshader__s_html_a60f19761b56b80ba2679ca16f8d383d6"><div class="ttname"><a href="structshader__s.html#a60f19761b56b80ba2679ca16f8d383d6">shader_s::lightmapIndex</a></div><div class="ttdeci">int lightmapIndex</div><div class="ttdoc">for a shader to match, both name and lightmapIndex must match </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00463">tr_local.h:463</a></div></div>
<div class="ttc" id="tr__local_8h_html_a03df5920ac8ad3d828f4174d77a0c705a68b7deda2a5b9480c25379edb917a80e"><div class="ttname"><a href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a68b7deda2a5b9480c25379edb917a80e">SS_UNDERWATER</a></div><div class="ttdoc">for items that should be drawn in front of the water plane </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00139">tr_local.h:139</a></div></div>
<div class="ttc" id="structtextureBundle__t_html_a3618aefcd18757c48c6fba6d56ab967f"><div class="ttname"><a href="structtextureBundle__t.html#a3618aefcd18757c48c6fba6d56ab967f">textureBundle_t::numTexMods</a></div><div class="ttdeci">int numTexMods</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00366">tr_local.h:366</a></div></div>
<div class="ttc" id="tr__local_8h_html_a2f66a4ae0d42348eca8a1333f82b1092a7bb00dbb6e2977ac4eb1705e4a084146"><div class="ttname"><a href="tr__local_8h.html#a2f66a4ae0d42348eca8a1333f82b1092a7bb00dbb6e2977ac4eb1705e4a084146">GF_INVERSE_SAWTOOTH</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00167">tr_local.h:167</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a323f5d594601326f248610fd696b1809"><div class="ttname"><a href="surfaceflags_8h.html#a323f5d594601326f248610fd696b1809">SURF_NOLIGHTMAP</a></div><div class="ttdeci">#define SURF_NOLIGHTMAP</div><div class="ttdoc">surface doesn&amp;#39;t need a lightmap </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00083">surfaceflags.h:83</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_ababde956009eb0c4579a65efbcce7aa9"><div class="ttname"><a href="surfaceflags_8h.html#ababde956009eb0c4579a65efbcce7aa9">SURF_GRASS</a></div><div class="ttdeci">#define SURF_GRASS</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00092">surfaceflags.h:92</a></div></div>
<div class="ttc" id="tr__shader_8c_html_abdd71375f16dbb0a6e34d5639d41c179"><div class="ttname"><a href="tr__shader_8c.html#abdd71375f16dbb0a6e34d5639d41c179">ComputeStageIteratorFunc</a></div><div class="ttdeci">static void ComputeStageIteratorFunc(void)</div><div class="ttdoc">See if we can use on of the simple fastpath stage functions, otherwise set to the generic stage funct...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02171">tr_shader.c:2171</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a7e12bb7fac952faa546d93e73f6e0271"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a7e12bb7fac952faa546d93e73f6e0271">GLS_SRCBLEND_ONE_MINUS_DST_COLOR</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01526">tr_local.h:1526</a></div></div>
<div class="ttc" id="tr__local_8h_html_a5f4270b11e8eb5f664fd81660a2f0427ab2bc8b592ec33612612e2796fe67a053"><div class="ttname"><a href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427ab2bc8b592ec33612612e2796fe67a053">AGEN_ONE_MINUS_VERTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00209">tr_local.h:209</a></div></div>
<div class="ttc" id="dl__local_8h_html_a74f39535654af88006aa56dca7615bc5"><div class="ttname"><a href="dl__local_8h.html#a74f39535654af88006aa56dca7615bc5">Q_stricmp</a></div><div class="ttdeci">#define Q_stricmp</div><div class="ttdef"><b>Definition:</b> <a href="dl__local_8h_source.html#l00057">dl_local.h:57</a></div></div>
<div class="ttc" id="tr__common_8h_html_a6255af4821c671e474e9d3802303cd32"><div class="ttname"><a href="tr__common_8h.html#a6255af4821c671e474e9d3802303cd32">Ren_Print</a></div><div class="ttdeci">#define Ren_Print(...)</div><div class="ttdef"><b>Definition:</b> <a href="tr__common_8h_source.html#l00083">tr_common.h:83</a></div></div>
<div class="ttc" id="structtexModInfo__t_html"><div class="ttname"><a href="structtexModInfo__t.html">texModInfo_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00320">tr_local.h:320</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a9ae49b2a10e671a274c82329c37a79b3"><div class="ttname"><a href="tr__shader_8c.html#a9ae49b2a10e671a274c82329c37a79b3">NameToAFunc</a></div><div class="ttdeci">static unsigned NameToAFunc(const char *funcname)</div><div class="ttdoc">NameToAFunc. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00178">tr_shader.c:178</a></div></div>
<div class="ttc" id="structshaderStage__t_html_a9795b546d2a820b7719be15e865e3de6"><div class="ttname"><a href="structshaderStage__t.html#a9795b546d2a820b7719be15e865e3de6">shaderStage_t::isDetail</a></div><div class="ttdeci">qboolean isDetail</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00400">tr_local.h:400</a></div></div>
<div class="ttc" id="structskyParms__t_html_a1dca088c7ffbaceccd713b07a88120e3"><div class="ttname"><a href="structskyParms__t.html#a1dca088c7ffbaceccd713b07a88120e3">skyParms_t::outerbox</a></div><div class="ttdeci">image_t * outerbox[6]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00440">tr_local.h:440</a></div></div>
<div class="ttc" id="structdeformStage__t_html_a09f1a203f21edc204ac595709913bc1a"><div class="ttname"><a href="structdeformStage__t.html#a09f1a203f21edc204ac595709913bc1a">deformStage_t::deformationSpread</a></div><div class="ttdeci">float deformationSpread</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00309">tr_local.h:309</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a4629e9392a6fa30b3b8dfca9b7d7fb2d"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a4629e9392a6fa30b3b8dfca9b7d7fb2d">GLS_SRCBLEND_SRC_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01527">tr_local.h:1527</a></div></div>
<div class="ttc" id="tr__local_8h_html_a6bfbcfc4449ac0e3937e3182703660fcac49a8cdd365c005d69d96ed52b327305"><div class="ttname"><a href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fcac49a8cdd365c005d69d96ed52b327305">TCGEN_FIRERISEENV_MAPPED</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00247">tr_local.h:247</a></div></div>
<div class="ttc" id="tr__local_8h_html_a75f18f0db875d7bdaa14fed02fc2777fac90c56e0c78ee02c2bde31ab0ba69f8d"><div class="ttname"><a href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fac90c56e0c78ee02c2bde31ab0ba69f8d">DEFORM_WAVE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00180">tr_local.h:180</a></div></div>
<div class="ttc" id="structtextureBundle__t_html_ae9e7dc0e6443b51059d0d07cccd00fcf"><div class="ttname"><a href="structtextureBundle__t.html#ae9e7dc0e6443b51059d0d07cccd00fcf">textureBundle_t::tcGen</a></div><div class="ttdeci">texCoordGen_t tcGen</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00363">tr_local.h:363</a></div></div>
<div class="ttc" id="structinfoParm__t_html_ab3da2c6e49f2be898c00d90f50c77a4a"><div class="ttname"><a href="structinfoParm__t.html#ab3da2c6e49f2be898c00d90f50c77a4a">infoParm_t::contents</a></div><div class="ttdeci">int contents</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l01567">tr_shader.c:1567</a></div></div>
<div class="ttc" id="structfogParms__t_html_a5b229bb84063c51fec206d2291cf3527"><div class="ttname"><a href="structfogParms__t.html#a5b229bb84063c51fec206d2291cf3527">fogParms_t::depthForOpaque</a></div><div class="ttdeci">float depthForOpaque</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00450">tr_local.h:450</a></div></div>
<div class="ttc" id="tr__local_8h_html_a157944afb15e3073932b378dc6e6f9cfa4981c8d38c68fc7cc7c570f175864b06"><div class="ttname"><a href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa4981c8d38c68fc7cc7c570f175864b06">CGEN_LIGHTING_DIFFUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00231">tr_local.h:231</a></div></div>
<div class="ttc" id="tr__init_8c_html_a700b412228b34d5097a2b60b107b9108"><div class="ttname"><a href="tr__init_8c.html#a700b412228b34d5097a2b60b107b9108">r_ignoreFastPath</a></div><div class="ttdeci">cvar_t * r_ignoreFastPath</div><div class="ttdoc">allows us to ignore our Tess fast paths </div><div class="ttdef"><b>Definition:</b> <a href="tr__init_8c_source.html#l00058">tr_init.c:58</a></div></div>
<div class="ttc" id="q__shared_8h_html_ad645839104fcd74bd1a9d9b25d64edb2ab4029111584d6b3707261c118d21a8fd"><div class="ttname"><a href="q__shared_8h.html#ad645839104fcd74bd1a9d9b25d64edb2ab4029111584d6b3707261c118d21a8fd">CIN_loop</a></div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00588">q_shared.h:588</a></div></div>
<div class="ttc" id="structrefimport__t_html_a30d0806f3a82ee724a23031990a7a450"><div class="ttname"><a href="structrefimport__t.html#a30d0806f3a82ee724a23031990a7a450">refimport_t::FS_ListFiles</a></div><div class="ttdeci">char **(* FS_ListFiles)(const char *name, const char *extension, int *numfilesfound)</div><div class="ttdef"><b>Definition:</b> <a href="tr__public_8h_source.html#l00227">tr_public.h:227</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_ac761ba2aae32d561420f834bf99bec9d"><div class="ttname"><a href="structtrGlobals__t.html#ac761ba2aae32d561420f834bf99bec9d">trGlobals_t::numLightmaps</a></div><div class="ttdeci">int numLightmaps</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01415">tr_local.h:1415</a></div></div>
<div class="ttc" id="q__shared_8h_html_a841615a63f4a3aa18337897953874909"><div class="ttname"><a href="q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(x)</div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00427">q_shared.h:427</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a3ffa1e379d75c5017c2e1cc9103410ee"><div class="ttname"><a href="surfaceflags_8h.html#a3ffa1e379d75c5017c2e1cc9103410ee">SURF_MONSTERSLICK</a></div><div class="ttdeci">#define SURF_MONSTERSLICK</div><div class="ttdoc">slick surf that only affects ai&amp;#39;s </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00100">surfaceflags.h:100</a></div></div>
<div class="ttc" id="tr__local_8h_html_a1480f4cb61af8bab511fad028c084b20abdaa968e7a13ee0c5e8426ee732a5736"><div class="ttname"><a href="tr__local_8h.html#a1480f4cb61af8bab511fad028c084b20abdaa968e7a13ee0c5e8426ee732a5736">CT_FRONT_SIDED</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00417">tr_local.h:417</a></div></div>
<div class="ttc" id="tr__local_8h_html_a6bfbcfc4449ac0e3937e3182703660fcafc6273a90c2ed62b97ff1d58b41393b3"><div class="ttname"><a href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fcafc6273a90c2ed62b97ff1d58b41393b3">TCGEN_VECTOR</a></div><div class="ttdoc">S and T from world coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00249">tr_local.h:249</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_abb78544f8f85bde2bc66161df474b515"><div class="ttname"><a href="surfaceflags_8h.html#abb78544f8f85bde2bc66161df474b515">SURF_HINT</a></div><div class="ttdeci">#define SURF_HINT</div><div class="ttdoc">make a primary bsp splitter </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00081">surfaceflags.h:81</a></div></div>
<div class="ttc" id="tr__local_8h_html_a157944afb15e3073932b378dc6e6f9cfa1fbea70c7c55f64be26dc0a4629c366c"><div class="ttname"><a href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa1fbea70c7c55f64be26dc0a4629c366c">CGEN_CONST</a></div><div class="ttdoc">fixed color </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00233">tr_local.h:233</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a76d23691966390e7f5777cd233398023"><div class="ttname"><a href="tr__shader_8c.html#a76d23691966390e7f5777cd233398023">NameToGenFunc</a></div><div class="ttdeci">static genFunc_t NameToGenFunc(const char *funcname)</div><div class="ttdoc">NameToGenFunc. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00295">tr_shader.c:295</a></div></div>
<div class="ttc" id="q__math_8h_html_ae6198604d913a625f13d811900b9da50"><div class="ttname"><a href="q__math_8h.html#ae6198604d913a625f13d811900b9da50">VectorNormalize</a></div><div class="ttdeci">#define VectorNormalize</div><div class="ttdef"><b>Definition:</b> <a href="q__math_8h_source.html#l00575">q_math.h:575</a></div></div>
<div class="ttc" id="structfogParms__t_html_acfe1477fb2ed9891745980ae7af86135"><div class="ttname"><a href="structfogParms__t.html#acfe1477fb2ed9891745980ae7af86135">fogParms_t::tcScale</a></div><div class="ttdeci">float tcScale</div><div class="ttdoc">texture coordinate vector scales </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00452">tr_local.h:452</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_ae4f91976372aab4203f2849fdbcc0e7d"><div class="ttname"><a href="structtrGlobals__t.html#ae4f91976372aab4203f2849fdbcc0e7d">trGlobals_t::sunDirection</a></div><div class="ttdeci">vec3_t sunDirection</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01438">tr_local.h:1438</a></div></div>
<div class="ttc" id="tr__local_8h_html_a5f4270b11e8eb5f664fd81660a2f0427a5292f544c911778539f19cedbdacc361"><div class="ttname"><a href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a5292f544c911778539f19cedbdacc361">AGEN_PORTAL</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00212">tr_local.h:212</a></div></div>
<div class="ttc" id="tr__shader_8c_html_aecd2c8bd1cd9af69a1d4af74904b0d72"><div class="ttname"><a href="tr__shader_8c.html#aecd2c8bd1cd9af69a1d4af74904b0d72">ParseSurfaceParm</a></div><div class="ttdeci">static void ParseSurfaceParm(char **text)</div><div class="ttdoc">ParseSurfaceParm. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l01649">tr_shader.c:1649</a></div></div>
<div class="ttc" id="tr__local_8h_html_a5f4270b11e8eb5f664fd81660a2f0427a21420715f26ce730a43a9b391789bb24"><div class="ttname"><a href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a21420715f26ce730a43a9b391789bb24">AGEN_WAVEFORM</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00211">tr_local.h:211</a></div></div>
<div class="ttc" id="tr__local_8h_html_adc65c268c034252fe71d66175cb41a9d"><div class="ttname"><a href="tr__local_8h.html#adc65c268c034252fe71d66175cb41a9d">RB_StageIteratorVertexLitTexture</a></div><div class="ttdeci">void RB_StageIteratorVertexLitTexture(void)</div><div class="ttdoc">RB_StageIteratorVertexLitTexture. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shade_8c_source.html#l01789">tr_shade.c:1789</a></div></div>
<div class="ttc" id="tr__local_8h_html_a147d38561844c7dc036d685df22fa9c3"><div class="ttname"><a href="tr__local_8h.html#a147d38561844c7dc036d685df22fa9c3">R_CacheShaderAlloc</a></div><div class="ttdeci">#define R_CacheShaderAlloc(name, size)</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l02163">tr_local.h:2163</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a13b12d569c6cd67df3b898fe5848003c"><div class="ttname"><a href="tr__shader_8c.html#a13b12d569c6cd67df3b898fe5848003c">backupHashTable</a></div><div class="ttdeci">static shader_t * backupHashTable[FILE_HASH_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03932">tr_shader.c:3932</a></div></div>
<div class="ttc" id="structshader__s_html_a2af382c428d935fb204790586efcd0ca"><div class="ttname"><a href="structshader__s.html#a2af382c428d935fb204790586efcd0ca">shader_s::defaultShader</a></div><div class="ttdeci">qboolean defaultShader</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00470">tr_local.h:470</a></div></div>
<div class="ttc" id="tr__shader_8c_html_abe39f2e2dbcb1700a9dc07aecd3e267a"><div class="ttname"><a href="tr__shader_8c.html#abe39f2e2dbcb1700a9dc07aecd3e267a">ParseSort</a></div><div class="ttdeci">void ParseSort(char **text)</div><div class="ttdoc">ParseSort. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l01503">tr_shader.c:1503</a></div></div>
<div class="ttc" id="structdeformStage__t_html_a54416a9c7464a7b9b1bf74670103cec3"><div class="ttname"><a href="structdeformStage__t.html#a54416a9c7464a7b9b1bf74670103cec3">deformStage_t::bulgeHeight</a></div><div class="ttdeci">float bulgeHeight</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00312">tr_local.h:312</a></div></div>
<div class="ttc" id="q__shared_8h_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="q__shared_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00351">q_shared.h:351</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a28d5f971b62d006b171d84187ab28fae"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a28d5f971b62d006b171d84187ab28fae">GLS_SRCBLEND_ONE_MINUS_SRC_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01528">tr_local.h:1528</a></div></div>
<div class="ttc" id="structtextureBundle__t_html_aa017d18b6fdc7b40f38f7ecca558736b"><div class="ttname"><a href="structtextureBundle__t.html#aa017d18b6fdc7b40f38f7ecca558736b">textureBundle_t::videoMapHandle</a></div><div class="ttdeci">int videoMapHandle</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00369">tr_local.h:369</a></div></div>
<div class="ttc" id="tr__local_8h_html_a157944afb15e3073932b378dc6e6f9cfa33880df170ed4cf5f7edf4d7b99279ce"><div class="ttname"><a href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa33880df170ed4cf5f7edf4d7b99279ce">CGEN_BAD</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00222">tr_local.h:222</a></div></div>
<div class="ttc" id="tr__local_8h_html_a6bfbcfc4449ac0e3937e3182703660fcaee241cf8d16a2b0e317d4c2a68fe7951"><div class="ttname"><a href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fcaee241cf8d16a2b0e317d4c2a68fe7951">TCGEN_ENVIRONMENT_MAPPED</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00246">tr_local.h:246</a></div></div>
<div class="ttc" id="structwaveForm__t_html_a03d724d6a656e363e74209a26e6a011f"><div class="ttname"><a href="structwaveForm__t.html#a03d724d6a656e363e74209a26e6a011f">waveForm_t::phase</a></div><div class="ttdeci">double phase</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00274">tr_local.h:274</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_ade922e5f0b8f2b02147858c2b6d579cc"><div class="ttname"><a href="surfaceflags_8h.html#ade922e5f0b8f2b02147858c2b6d579cc">CONTENTS_WATER</a></div><div class="ttdeci">#define CONTENTS_WATER</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00050">surfaceflags.h:50</a></div></div>
<div class="ttc" id="q__shared_8h_html_a88839cf8fa6a56d94589791f0db32328acfc60ea7f4012a0fac6bc3ec1cfaf69a"><div class="ttname"><a href="q__shared_8h.html#a88839cf8fa6a56d94589791f0db32328acfc60ea7f4012a0fac6bc3ec1cfaf69a">h_low</a></div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00564">q_shared.h:564</a></div></div>
<div class="ttc" id="structrefimport__t_html_af57614ea712dc2f7a3fa1ac3e326b10e"><div class="ttname"><a href="structrefimport__t.html#af57614ea712dc2f7a3fa1ac3e326b10e">refimport_t::CIN_PlayCinematic</a></div><div class="ttdeci">int(* CIN_PlayCinematic)(const char *arg0, int xpos, int ypos, int width, int height, int bits)</div><div class="ttdef"><b>Definition:</b> <a href="tr__public_8h_source.html#l00237">tr_public.h:237</a></div></div>
<div class="ttc" id="tr__shader_8c_html_aba9085da783b7fe17de88c18e4f4bb7e"><div class="ttname"><a href="tr__shader_8c.html#aba9085da783b7fe17de88c18e4f4bb7e">implicitMap</a></div><div class="ttdeci">static char implicitMap[MAX_QPATH]</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00048">tr_shader.c:48</a></div></div>
<div class="ttc" id="structshader__s_html_aba9983a1df1e71a7d1e154422516d1c4"><div class="ttname"><a href="structshader__s.html#aba9983a1df1e71a7d1e154422516d1c4">shader_s::fogPass</a></div><div class="ttdeci">fogPass_t fogPass</div><div class="ttdoc">draw a blended pass, possibly with depth test equals </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00498">tr_local.h:498</a></div></div>
<div class="ttc" id="structwaveForm__t_html_a017b3794be20870e17ac630b0a5b82fa"><div class="ttname"><a href="structwaveForm__t.html#a017b3794be20870e17ac630b0a5b82fa">waveForm_t::frequency</a></div><div class="ttdeci">double frequency</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00275">tr_local.h:275</a></div></div>
<div class="ttc" id="tr__local_8h_html_a03df5920ac8ad3d828f4174d77a0c705a34fcab287406a5051f095dfd1d1e0cda"><div class="ttname"><a href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a34fcab287406a5051f095dfd1d1e0cda">SS_BLEND0</a></div><div class="ttdoc">regular transparency and filters </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00141">tr_local.h:141</a></div></div>
<div class="ttc" id="structshaderStage__t_html"><div class="ttname"><a href="structshaderStage__t.html">shaderStage_t</a></div><div class="ttdoc">Shifts. </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00380">tr_local.h:380</a></div></div>
<div class="ttc" id="structshader__s_html_a0617231a29d5a121cb1f240f7a64400c"><div class="ttname"><a href="structshader__s.html#a0617231a29d5a121cb1f240f7a64400c">shader_s::needsST1</a></div><div class="ttdeci">qboolean needsST1</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00501">tr_local.h:501</a></div></div>
<div class="ttc" id="sv__demo_8c_html_a1756d9ddc463d7bca9539c8546a7c1b0"><div class="ttname"><a href="sv__demo_8c.html#a1756d9ddc463d7bca9539c8546a7c1b0">buf</a></div><div class="ttdeci">static byte buf[0x400000]</div><div class="ttdef"><b>Definition:</b> <a href="sv__demo_8c_source.html#l00072">sv_demo.c:72</a></div></div>
<div class="ttc" id="tr__local_8h_html_a3a34acf454edfe242091f462a082ec62aa3fd11b0fcbd56141b27f20c8f6b67b2"><div class="ttname"><a href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62aa3fd11b0fcbd56141b27f20c8f6b67b2">TMOD_ROTATE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00292">tr_local.h:292</a></div></div>
<div class="ttc" id="structdynamicshader_html_a5e455cca9d429ab62f3cf0b5fb4133c5"><div class="ttname"><a href="structdynamicshader.html#a5e455cca9d429ab62f3cf0b5fb4133c5">dynamicshader::shadertext</a></div><div class="ttdeci">char * shadertext</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02982">tr_shader.c:2982</a></div></div>
<div class="ttc" id="structshader__s_html_a6a1e4e84a91cda33a050c17e8377bef7"><div class="ttname"><a href="structshader__s.html#a6a1e4e84a91cda33a050c17e8377bef7">shader_s::numUnfoggedPasses</a></div><div class="ttdeci">int numUnfoggedPasses</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00510">tr_local.h:510</a></div></div>
<div class="ttc" id="tr__types_8h_html_ad6e514d0c9dd889c0b1b36049c979270aaf0388b7430eb0d0996cd6584394c0e1"><div class="ttname"><a href="tr__types_8h.html#ad6e514d0c9dd889c0b1b36049c979270aaf0388b7430eb0d0996cd6584394c0e1">FOG_SKY</a></div><div class="ttdoc">1 fog values to apply to the sky when using density fog for the world (non-distance clipping fog) (on...</div><div class="ttdef"><b>Definition:</b> <a href="tr__types_8h_source.html#l00323">tr_types.h:323</a></div></div>
<div class="ttc" id="tr__local_8h_html_a75f18f0db875d7bdaa14fed02fc2777faf1b4ef7618d53a4bdec67ed1b6b81751"><div class="ttname"><a href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777faf1b4ef7618d53a4bdec67ed1b6b81751">DEFORM_AUTOSPRITE2</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00186">tr_local.h:186</a></div></div>
<div class="ttc" id="structshaderStringPointer__s_html"><div class="ttname"><a href="structshaderStringPointer__s.html">shaderStringPointer_s</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00063">tr_shader.c:63</a></div></div>
<div class="ttc" id="tr__local_8h_html_a03df5920ac8ad3d828f4174d77a0c705a0ee7450d35380d9fb472c3f38858a60c"><div class="ttname"><a href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a0ee7450d35380d9fb472c3f38858a60c">SS_BANNER</a></div><div class="ttdoc">in addition to alpha test </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00135">tr_local.h:135</a></div></div>
<div class="ttc" id="q__shared_8c_html_a5de5d3e70183fa4bbb77e5dee2d3d67f"><div class="ttname"><a href="q__shared_8c.html#a5de5d3e70183fa4bbb77e5dee2d3d67f">SkipRestOfLine</a></div><div class="ttdeci">void SkipRestOfLine(char **data)</div><div class="ttdoc">SkipRestOfLine. </div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8c_source.html#l01083">q_shared.c:1083</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_af966799e3c68d3961682f6065aef3c23"><div class="ttname"><a href="surfaceflags_8h.html#af966799e3c68d3961682f6065aef3c23">SURF_NOIMPACT</a></div><div class="ttdeci">#define SURF_NOIMPACT</div><div class="ttdoc">don&amp;#39;t make missile explosions </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00077">surfaceflags.h:77</a></div></div>
<div class="ttc" id="structshader__s_html_a874dcb77fabe25790074e9111e5ea8a0"><div class="ttname"><a href="structshader__s.html#a874dcb77fabe25790074e9111e5ea8a0">shader_s::stages</a></div><div class="ttdeci">shaderStage_t * stages[MAX_SHADER_STAGES]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00511">tr_local.h:511</a></div></div>
<div class="ttc" id="tr__local_8h_html_a4b3a68960d20a863d417f91ff1a5f929aed66f9cea48f1e187395c9b0ef7930f9"><div class="ttname"><a href="tr__local_8h.html#a4b3a68960d20a863d417f91ff1a5f929aed66f9cea48f1e187395c9b0ef7930f9">ACFF_MODULATE_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00261">tr_local.h:261</a></div></div>
<div class="ttc" id="q__shared_8h_html_ad645839104fcd74bd1a9d9b25d64edb2ae512ede5de98395d2dbfde4b570c7936"><div class="ttname"><a href="q__shared_8h.html#ad645839104fcd74bd1a9d9b25d64edb2ae512ede5de98395d2dbfde4b570c7936">CIN_silent</a></div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00590">q_shared.h:590</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a9b38f8845bb09721d2d99b61fe6e70f8"><div class="ttname"><a href="tr__shader_8c.html#a9b38f8845bb09721d2d99b61fe6e70f8">R_FindLightmap</a></div><div class="ttdeci">void R_FindLightmap(int *lightmapIndex)</div><div class="ttdoc">Given a (potentially erroneous) lightmap index, attempts to load an external lightmap image and/or se...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03270">tr_shader.c:3270</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a7c79427673ae15d4559f782d9043c151"><div class="ttname"><a href="surfaceflags_8h.html#a7c79427673ae15d4559f782d9043c151">SURF_NOMARKS</a></div><div class="ttdeci">#define SURF_NOMARKS</div><div class="ttdoc">don&amp;#39;t leave missile marks </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00078">surfaceflags.h:78</a></div></div>
<div class="ttc" id="tr__types_8h_html_ad6e514d0c9dd889c0b1b36049c979270a008df92960f310c1bf5159c28bbb9230"><div class="ttname"><a href="tr__types_8h.html#ad6e514d0c9dd889c0b1b36049c979270a008df92960f310c1bf5159c28bbb9230">FOG_WATER</a></div><div class="ttdoc">5 used when underwater </div><div class="ttdef"><b>Definition:</b> <a href="tr__types_8h_source.html#l00331">tr_types.h:331</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a8260bf2c69dcde09c3c2ea21ca07a7ec"><div class="ttname"><a href="tr__shader_8c.html#a8260bf2c69dcde09c3c2ea21ca07a7ec">EXTERNAL_LIGHTMAP</a></div><div class="ttdeci">#define EXTERNAL_LIGHTMAP</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03263">tr_shader.c:3263</a></div></div>
<div class="ttc" id="q__shared_8c_html_ac5559db84415463975aeaa060f618f7d"><div class="ttname"><a href="q__shared_8c.html#ac5559db84415463975aeaa060f618f7d">COM_StripExtension</a></div><div class="ttdeci">void COM_StripExtension(const char *in, char *out, int destsize)</div><div class="ttdoc">COM_StripExtension. </div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8c_source.html#l00114">q_shared.c:114</a></div></div>
<div class="ttc" id="q__shared_8h_html_ad645839104fcd74bd1a9d9b25d64edb2a3f66ddb63b087c35f59c1783ffe12701"><div class="ttname"><a href="q__shared_8h.html#ad645839104fcd74bd1a9d9b25d64edb2a3f66ddb63b087c35f59c1783ffe12701">CIN_shader</a></div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00591">q_shared.h:591</a></div></div>
<div class="ttc" id="structdeformStage__t_html_a12fffe1a6e9d135d36bd65a733bc0103"><div class="ttname"><a href="structdeformStage__t.html#a12fffe1a6e9d135d36bd65a733bc0103">deformStage_t::deformation</a></div><div class="ttdeci">deform_t deformation</div><div class="ttdoc">vertex coordinate modification type </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00305">tr_local.h:305</a></div></div>
<div class="ttc" id="structfogParms__t_html_ad2338bdb116d319a884c6349eb99fd89"><div class="ttname"><a href="structfogParms__t.html#ad2338bdb116d319a884c6349eb99fd89">fogParms_t::colorInt</a></div><div class="ttdeci">unsigned colorInt</div><div class="ttdoc">in packed byte format </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00451">tr_local.h:451</a></div></div>
<div class="ttc" id="tr__local_8h_html_a3065866fe53895d608f1449d03345c6a"><div class="ttname"><a href="tr__local_8h.html#a3065866fe53895d608f1449d03345c6a">GLS_ATEST_LT_80</a></div><div class="ttdeci">#define GLS_ATEST_LT_80</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01549">tr_local.h:1549</a></div></div>
<div class="ttc" id="structshader__s_html_ab0438ecf32c7ae598e6289354e20385c"><div class="ttname"><a href="structshader__s.html#ab0438ecf32c7ae598e6289354e20385c">shader_s::clampTime</a></div><div class="ttdeci">double clampTime</div><div class="ttdoc">time this shader is clamped to </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00515">tr_local.h:515</a></div></div>
<div class="ttc" id="tr__local_8h_html_a76069acfe8943f0fce7f1d291f2a763b"><div class="ttname"><a href="tr__local_8h.html#a76069acfe8943f0fce7f1d291f2a763b">RE_RegisterModel</a></div><div class="ttdeci">qhandle_t RE_RegisterModel(const char *name)</div><div class="ttdoc">Loads in a model for the given name. </div><div class="ttdef"><b>Definition:</b> <a href="tr__model_8c_source.html#l00163">tr_model.c:163</a></div></div>
<div class="ttc" id="structtexModInfo__t_html_a6732c9ba70873148e0b6fc655152edae"><div class="ttname"><a href="structtexModInfo__t.html#a6732c9ba70873148e0b6fc655152edae">texModInfo_t::translate</a></div><div class="ttdeci">float translate[2]</div><div class="ttdoc">t&amp;#39; = s * m[0][1] + t * m[0][1] + trans[1] </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00329">tr_local.h:329</a></div></div>
<div class="ttc" id="tr__local_8h_html_a75f18f0db875d7bdaa14fed02fc2777fac57b6898fb8b90c4c652648f60b391b7"><div class="ttname"><a href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fac57b6898fb8b90c4c652648f60b391b7">DEFORM_MOVE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00183">tr_local.h:183</a></div></div>
<div class="ttc" id="tr__shader_8c_html_ae8e3c43121c29e2c85f25d66a7b5f2d5"><div class="ttname"><a href="tr__shader_8c.html#ae8e3c43121c29e2c85f25d66a7b5f2d5">R_FindCachedShader</a></div><div class="ttdeci">shader_t * R_FindCachedShader(const char *name, int lightmapIndex, int hash)</div><div class="ttdoc">Look for the given shader in the list of backupShaders. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l04168">tr_shader.c:4168</a></div></div>
<div class="ttc" id="tr__local_8h_html_a03df5920ac8ad3d828f4174d77a0c705a7e9bb72c706a524b0b0b6693ebd6dc51"><div class="ttname"><a href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a7e9bb72c706a524b0b0b6693ebd6dc51">SS_NEAREST</a></div><div class="ttdoc">blood blobs </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00150">tr_local.h:150</a></div></div>
<div class="ttc" id="structtextureBundle__t_html_ae5cbf2179a790764ae65715da4c30d56"><div class="ttname"><a href="structtextureBundle__t.html#ae5cbf2179a790764ae65715da4c30d56">textureBundle_t::imageAnimationSpeed</a></div><div class="ttdeci">double imageAnimationSpeed</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00361">tr_local.h:361</a></div></div>
<div class="ttc" id="q__shared_8c_html_a73c0af4cb34fd54c9dc8fefdb187f9b8"><div class="ttname"><a href="q__shared_8c.html#a73c0af4cb34fd54c9dc8fefdb187f9b8">Q_strcat</a></div><div class="ttdeci">void Q_strcat(char *dest, size_t size, const char *src)</div><div class="ttdoc">Q_strcat. </div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8c_source.html#l01622">q_shared.c:1622</a></div></div>
<div class="ttc" id="q__shared_8c_html_a70a2b0d67ad6af400d513cf1136af8dc"><div class="ttname"><a href="q__shared_8c.html#a70a2b0d67ad6af400d513cf1136af8dc">Q_strncpyz</a></div><div class="ttdeci">void Q_strncpyz(char *dest, const char *src, size_t destsize)</div><div class="ttdoc">Safe strncpy that ensures a trailing zero. </div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8c_source.html#l01455">q_shared.c:1455</a></div></div>
<div class="ttc" id="tr__local_8h_html_a85d02351b7ff61c5cc48c1365cca58c6"><div class="ttname"><a href="tr__local_8h.html#a85d02351b7ff61c5cc48c1365cca58c6">R_CacheShaderFree</a></div><div class="ttdeci">#define R_CacheShaderFree(name, ptr)</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l02164">tr_local.h:2164</a></div></div>
<div class="ttc" id="tr__init_8c_html_a29892989fc4f56ce3bb001c096bcddd0"><div class="ttname"><a href="tr__init_8c.html#a29892989fc4f56ce3bb001c096bcddd0">r_cache</a></div><div class="ttdeci">cvar_t * r_cache</div><div class="ttdef"><b>Definition:</b> <a href="tr__init_8c_source.html#l00153">tr_init.c:153</a></div></div>
<div class="ttc" id="structshader__s_html_aa40dd5dbff2a337571afae3a3459a19f"><div class="ttname"><a href="structshader__s.html#aa40dd5dbff2a337571afae3a3459a19f">shader_s::polygonOffset</a></div><div class="ttdeci">qboolean polygonOffset</div><div class="ttdoc">set for decals and other items that must be offset </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00494">tr_local.h:494</a></div></div>
<div class="ttc" id="tr__local_8h_html_a6f772f06fc8d1df2900a3f6dddfa8716"><div class="ttname"><a href="tr__local_8h.html#a6f772f06fc8d1df2900a3f6dddfa8716">TR_MAX_TEXMODS</a></div><div class="ttdeci">#define TR_MAX_TEXMODS</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00278">tr_local.h:278</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a8f2d9bf40455f07b1383535b22843427"><div class="ttname"><a href="tr__shader_8c.html#a8f2d9bf40455f07b1383535b22843427">R_PurgeLightmapShaders</a></div><div class="ttdeci">void R_PurgeLightmapShaders(void)</div><div class="ttdoc">R_PurgeLightmapShaders. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l04032">tr_shader.c:4032</a></div></div>
<div class="ttc" id="q__shared_8h_html_a0701630965c52ce0cc99eda50fbb8235"><div class="ttname"><a href="q__shared_8h.html#a0701630965c52ce0cc99eda50fbb8235">Com_Memcpy</a></div><div class="ttdeci">#define Com_Memcpy</div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00576">q_shared.h:576</a></div></div>
<div class="ttc" id="structdeformStage__t_html_a4e2206faabd988de0a7c4c367d523898"><div class="ttname"><a href="structdeformStage__t.html#a4e2206faabd988de0a7c4c367d523898">deformStage_t::bulgeWidth</a></div><div class="ttdeci">float bulgeWidth</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00311">tr_local.h:311</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a0b7b5ade5914f295223f64cb09505ac0"><div class="ttname"><a href="tr__shader_8c.html#a0b7b5ade5914f295223f64cb09505ac0">s_shaderText</a></div><div class="ttdeci">static char * s_shaderText</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00039">tr_shader.c:39</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a1af399b6fadf45560e4e38f00dad4424"><div class="ttname"><a href="structtrGlobals__t.html#a1af399b6fadf45560e4e38f00dad4424">trGlobals_t::flareShader</a></div><div class="ttdeci">shader_t * flareShader</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01410">tr_local.h:1410</a></div></div>
<div class="ttc" id="tr__local_8h_html_abc791445795125c996a0d09cc17a349d"><div class="ttname"><a href="tr__local_8h.html#abc791445795125c996a0d09cc17a349d">R_DecomposeSort</a></div><div class="ttdeci">void R_DecomposeSort(unsigned sort, int *entityNum, shader_t **shader, int *fogNum, int *frontFace, int *dlightMap)</div><div class="ttdoc">R_DecomposeSort. </div><div class="ttdef"><b>Definition:</b> <a href="tr__main_8c_source.html#l01555">tr_main.c:1555</a></div></div>
<div class="ttc" id="structshader__s_html_acf1494aadd7b1831bbeef2989f25f379"><div class="ttname"><a href="structshader__s.html#acf1494aadd7b1831bbeef2989f25f379">shader_s::optimalStageIteratorFunc</a></div><div class="ttdeci">void(* optimalStageIteratorFunc)(void)</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00513">tr_local.h:513</a></div></div>
<div class="ttc" id="structdynamicshader_html"><div class="ttname"><a href="structdynamicshader.html">dynamicshader</a></div><div class="ttdoc">Dynamic shader list. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02980">tr_shader.c:2980</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a961cfd3275a1fb303d89b9a38bbe3991"><div class="ttname"><a href="tr__shader_8c.html#a961cfd3275a1fb303d89b9a38bbe3991">SortNewShader</a></div><div class="ttdeci">static void SortNewShader(void)</div><div class="ttdoc">Positions the most recently created shader in the tr.sortedShaders[] array so that the shader-&gt;sort k...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02496">tr_shader.c:2496</a></div></div>
<div class="ttc" id="structshader__s_html_a7ccf1d2c045bcdd673e6a161f89b212d"><div class="ttname"><a href="structshader__s.html#a7ccf1d2c045bcdd673e6a161f89b212d">shader_s::surfaceFlags</a></div><div class="ttdeci">int surfaceFlags</div><div class="ttdoc">if explicitlyDefined, this will have SURF_* flags </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00478">tr_local.h:478</a></div></div>
<div class="ttc" id="q__shared_8h_html_a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d"><div class="ttname"><a href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a></div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00357">q_shared.h:357</a></div></div>
<div class="ttc" id="structshader__s_html_a55acc662139df10b7d341d32000c9555"><div class="ttname"><a href="structshader__s.html#a55acc662139df10b7d341d32000c9555">shader_s::contentFlags</a></div><div class="ttdeci">int contentFlags</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00479">tr_local.h:479</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a52b8d89d4ebdb10b979fbbf4cfc5b9e4"><div class="ttname"><a href="tr__shader_8c.html#a52b8d89d4ebdb10b979fbbf4cfc5b9e4">implicitCullType</a></div><div class="ttdeci">static cullType_t implicitCullType</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00050">tr_shader.c:50</a></div></div>
<div class="ttc" id="structrenderCommandList__t_html"><div class="ttname"><a href="structrenderCommandList__t.html">renderCommandList_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01887">tr_local.h:1887</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609ad8bde17375d82c84fd3d1deacb6c18e0"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609ad8bde17375d82c84fd3d1deacb6c18e0">GLS_DEPTHTEST_DISABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01565">tr_local.h:1565</a></div></div>
<div class="ttc" id="cl__avi_8c_html_abec397a4b4f398bca2ffc96b0b522e40"><div class="ttname"><a href="cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a></div><div class="ttdeci">static byte buffer[MAX_AVI_BUFFER]</div><div class="ttdef"><b>Definition:</b> <a href="cl__avi_8c_source.html#l00087">cl_avi.c:87</a></div></div>
<div class="ttc" id="structinfoParm__t_html"><div class="ttname"><a href="structinfoParm__t.html">infoParm_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l01564">tr_shader.c:1564</a></div></div>
<div class="ttc" id="structshaderStage__t_html_ab1ae2b28116f634b45ab312b659149ae"><div class="ttname"><a href="structshaderStage__t.html#ab1ae2b28116f634b45ab312b659149ae">shaderStage_t::constantColor</a></div><div class="ttdeci">byte constantColor[4]</div><div class="ttdoc">for CGEN_CONST and AGEN_CONST </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00392">tr_local.h:392</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a52e60380d3485f9f2b890cacf80de2d1"><div class="ttname"><a href="surfaceflags_8h.html#a52e60380d3485f9f2b890cacf80de2d1">SURF_NONSOLID</a></div><div class="ttdeci">#define SURF_NONSOLID</div><div class="ttdoc">don&amp;#39;t collide against curves with this set </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00087">surfaceflags.h:87</a></div></div>
<div class="ttc" id="tr__local_8h_html_a5f4270b11e8eb5f664fd81660a2f0427a8dee63d4ca8b923575e7d1080e0ab778"><div class="ttname"><a href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a8dee63d4ca8b923575e7d1080e0ab778">AGEN_VERTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00208">tr_local.h:208</a></div></div>
<div class="ttc" id="structshaderStringPointer__s_html_a3fa910376850a0d63ae2a830fa49591c"><div class="ttname"><a href="structshaderStringPointer__s.html#a3fa910376850a0d63ae2a830fa49591c">shaderStringPointer_s::next</a></div><div class="ttdeci">struct shaderStringPointer_s * next</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00066">tr_shader.c:66</a></div></div>
<div class="ttc" id="structtextureBundle__t_html_aff49fd5f8043dfa9f1f3d7ac3fc44330"><div class="ttname"><a href="structtextureBundle__t.html#aff49fd5f8043dfa9f1f3d7ac3fc44330">textureBundle_t::isLightmap</a></div><div class="ttdeci">qboolean isLightmap</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00370">tr_local.h:370</a></div></div>
<div class="ttc" id="tr__local_8h_html_a75f18f0db875d7bdaa14fed02fc2777fabfcb83abade6412bb89ff6dcd88d6bdb"><div class="ttname"><a href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fabfcb83abade6412bb89ff6dcd88d6bdb">DEFORM_AUTOSPRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00185">tr_local.h:185</a></div></div>
<div class="ttc" id="tr__local_8h_html_aa41e33942246b343368062d4d08b3822a3e192d6c4ad99601317640cec6bad60f"><div class="ttname"><a href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822a3e192d6c4ad99601317640cec6bad60f">RC_SWAP_BUFFERS</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l02066">tr_local.h:2066</a></div></div>
<div class="ttc" id="q__math_8h_html_ab1b83ce270d198f890a2190c1ffe76d8"><div class="ttname"><a href="q__math_8h.html#ab1b83ce270d198f890a2190c1ffe76d8">VectorScale</a></div><div class="ttdeci">#define VectorScale(v, s, o)</div><div class="ttdef"><b>Definition:</b> <a href="q__math_8h_source.html#l00528">q_math.h:528</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a8361bc3c8fbe6931f71ebabd5db00f1f"><div class="ttname"><a href="surfaceflags_8h.html#a8361bc3c8fbe6931f71ebabd5db00f1f">SURF_MONSLICK_S</a></div><div class="ttdeci">#define SURF_MONSLICK_S</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00104">surfaceflags.h:104</a></div></div>
<div class="ttc" id="tr__local_8h_html_a03df5920ac8ad3d828f4174d77a0c705ac84eb0dbc98c786a7f51f65115bbdc2a"><div class="ttname"><a href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705ac84eb0dbc98c786a7f51f65115bbdc2a">SS_BLEND1</a></div><div class="ttdoc">generally only used for additive type effects </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00142">tr_local.h:142</a></div></div>
<div class="ttc" id="structdrawSurfsCommand__t_html"><div class="ttname"><a href="structdrawSurfsCommand__t.html">drawSurfsCommand_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01980">tr_local.h:1980</a></div></div>
<div class="ttc" id="structshader__s_html_afc2e518516d0759c0db52f4e1169869a"><div class="ttname"><a href="structshader__s.html#afc2e518516d0759c0db52f4e1169869a">shader_s::name</a></div><div class="ttdeci">char name[MAX_QPATH]</div><div class="ttdoc">game path, including extension </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00462">tr_local.h:462</a></div></div>
<div class="ttc" id="structshaderStage__t_html_a0edc1f3990e9b4eac9db7477f2c85282"><div class="ttname"><a href="structshaderStage__t.html#a0edc1f3990e9b4eac9db7477f2c85282">shaderStage_t::stateBits</a></div><div class="ttdeci">unsigned stateBits</div><div class="ttdoc">GLS_xxxx mask. </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00394">tr_local.h:394</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_af48c7f470ac558b368fce32c69cda326"><div class="ttname"><a href="surfaceflags_8h.html#af48c7f470ac558b368fce32c69cda326">SURF_NODAMAGE</a></div><div class="ttdeci">#define SURF_NODAMAGE</div><div class="ttdoc">never give falling damage </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00073">surfaceflags.h:73</a></div></div>
<div class="ttc" id="tr__local_8h_html_a17165a0d48e0267846dce61872b17255"><div class="ttname"><a href="tr__local_8h.html#a17165a0d48e0267846dce61872b17255">glfogNum</a></div><div class="ttdeci">glfogType_t glfogNum</div><div class="ttdoc">fog type to use (from the fog_t enum list) </div><div class="ttdef"><b>Definition:</b> <a href="tr__main_8c_source.html#l00061">tr_main.c:61</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a2a8d6ce77b8f1e4f5f752c7876bf7fcb"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a2a8d6ce77b8f1e4f5f752c7876bf7fcb">GLS_SRCBLEND_DST_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01529">tr_local.h:1529</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a7512bdf9534576c088a761f8481576de"><div class="ttname"><a href="tr__shader_8c.html#a7512bdf9534576c088a761f8481576de">NameToSrcBlendMode</a></div><div class="ttdeci">static int NameToSrcBlendMode(const char *name)</div><div class="ttdoc">NameToSrcBlendMode. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00202">tr_shader.c:202</a></div></div>
<div class="ttc" id="structshader__s_html_aa725e7da5f6f09ebd32d43a8475e7342"><div class="ttname"><a href="structshader__s.html#aa725e7da5f6f09ebd32d43a8475e7342">shader_s::deforms</a></div><div class="ttdeci">deformStage_t deforms[MAX_SHADER_DEFORMS]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00508">tr_local.h:508</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a6b878d7610fed38320b4f93b293a85f0"><div class="ttname"><a href="surfaceflags_8h.html#a6b878d7610fed38320b4f93b293a85f0">CONTENTS_AREAPORTAL</a></div><div class="ttdeci">#define CONTENTS_AREAPORTAL</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00055">surfaceflags.h:55</a></div></div>
<div class="ttc" id="structrefimport__t_html_a17973ae5f907844145cefcf5e423b473"><div class="ttname"><a href="structrefimport__t.html#a17973ae5f907844145cefcf5e423b473">refimport_t::FS_FreeFile</a></div><div class="ttdeci">void(* FS_FreeFile)(void *buf)</div><div class="ttdef"><b>Definition:</b> <a href="tr__public_8h_source.html#l00226">tr_public.h:226</a></div></div>
<div class="ttc" id="tr__common_8h_html_a8b840e6d369db130632765abe7683f34"><div class="ttname"><a href="tr__common_8h.html#a8b840e6d369db130632765abe7683f34">Ren_Warning</a></div><div class="ttdeci">#define Ren_Warning(...)</div><div class="ttdef"><b>Definition:</b> <a href="tr__common_8h_source.html#l00084">tr_common.h:84</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_ab5dbbb0f6a60af03e34dc0267ca03d7a"><div class="ttname"><a href="surfaceflags_8h.html#ab5dbbb0f6a60af03e34dc0267ca03d7a">CONTENTS_MONSTERCLIP</a></div><div class="ttdeci">#define CONTENTS_MONSTERCLIP</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00057">surfaceflags.h:57</a></div></div>
<div class="ttc" id="tr__local_8h_html_a157944afb15e3073932b378dc6e6f9cfa95148bf4c94b7a559f8f6b9ba4e386bb"><div class="ttname"><a href="tr__local_8h.html#a157944afb15e3073932b378dc6e6f9cfa95148bf4c94b7a559f8f6b9ba4e386bb">CGEN_IDENTITY_LIGHTING</a></div><div class="ttdoc">tr.identityLight </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00223">tr_local.h:223</a></div></div>
<div class="ttc" id="tr__local_8h_html_a3e81bce4adf8cfce68f5dea670fac3f0"><div class="ttname"><a href="tr__local_8h.html#a3e81bce4adf8cfce68f5dea670fac3f0">MAX_SHADERS</a></div><div class="ttdeci">#define MAX_SHADERS</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00052">tr_local.h:52</a></div></div>
<div class="ttc" id="structimage__s_html"><div class="ttname"><a href="structimage__s.html">image_s</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00098">tr_local.h:98</a></div></div>
<div class="ttc" id="q__shared_8h_html_a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40"><div class="ttname"><a href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a></div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00357">q_shared.h:357</a></div></div>
<div class="ttc" id="tr__common_8h_html_a58ed4136a90ad8c1dcf1795785834c89"><div class="ttname"><a href="tr__common_8h.html#a58ed4136a90ad8c1dcf1795785834c89">Ren_Fatal</a></div><div class="ttdeci">#define Ren_Fatal(...)</div><div class="ttdef"><b>Definition:</b> <a href="tr__common_8h_source.html#l00087">tr_common.h:87</a></div></div>
<div class="ttc" id="structtextureBundle__t_html"><div class="ttname"><a href="structtextureBundle__t.html">textureBundle_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00357">tr_local.h:357</a></div></div>
<div class="ttc" id="structtexModInfo__t_html_a2a4a40c5aa03d159c91deb6aa14823a2"><div class="ttname"><a href="structtexModInfo__t.html#a2a4a40c5aa03d159c91deb6aa14823a2">texModInfo_t::scale</a></div><div class="ttdeci">float scale[2]</div><div class="ttdoc">s *= scale[0] </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00332">tr_local.h:332</a></div></div>
<div class="ttc" id="structwaveForm__t_html_a2285d473e6ed4f901f640c947c392d6b"><div class="ttname"><a href="structwaveForm__t.html#a2285d473e6ed4f901f640c947c392d6b">waveForm_t::func</a></div><div class="ttdeci">genFunc_t func</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00270">tr_local.h:270</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a79ea1ddeee25186025192b19c0da3784"><div class="ttname"><a href="surfaceflags_8h.html#a79ea1ddeee25186025192b19c0da3784">SURF_LIGHTFILTER</a></div><div class="ttdeci">#define SURF_LIGHTFILTER</div><div class="ttdoc">act as a light filter during q3map -light </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00088">surfaceflags.h:88</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a371658349f67d74fd68c8a8f1db84481"><div class="ttname"><a href="tr__shader_8c.html#a371658349f67d74fd68c8a8f1db84481">MAX_SHADER_STRING_POINTERS</a></div><div class="ttdeci">#define MAX_SHADER_STRING_POINTERS</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03761">tr_shader.c:3761</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a5d35ebb8a04fcb88117cca5d357261af"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a5d35ebb8a04fcb88117cca5d357261af">GLS_SRCBLEND_BITS</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01533">tr_local.h:1533</a></div></div>
<div class="ttc" id="structimage__s_html_a290222e3c972d9805359501b0f42b4e7"><div class="ttname"><a href="structimage__s.html#a290222e3c972d9805359501b0f42b4e7">image_s::imgName</a></div><div class="ttdeci">char imgName[MAX_QPATH]</div><div class="ttdoc">game path, including extension </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00100">tr_local.h:100</a></div></div>
<div class="ttc" id="tr__local_8h_html_a9c3accc458de4122b714536a2a87ba9a"><div class="ttname"><a href="tr__local_8h.html#a9c3accc458de4122b714536a2a87ba9a">MAX_IMAGE_ANIMATIONS</a></div><div class="ttdeci">#define MAX_IMAGE_ANIMATIONS</div><div class="ttdoc">Increased this for onfire animation. </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00349">tr_local.h:349</a></div></div>
<div class="ttc" id="tr__local_8h_html_a6bfbcfc4449ac0e3937e3182703660fca8076ba3842371ed48d00d75dbc844d0b"><div class="ttname"><a href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca8076ba3842371ed48d00d75dbc844d0b">TCGEN_BAD</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00242">tr_local.h:242</a></div></div>
<div class="ttc" id="tr__local_8h_html_a4b3a68960d20a863d417f91ff1a5f929ab78063942025e89434c5df10d3342b09"><div class="ttname"><a href="tr__local_8h.html#a4b3a68960d20a863d417f91ff1a5f929ab78063942025e89434c5df10d3342b09">ACFF_MODULATE_RGBA</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00260">tr_local.h:260</a></div></div>
<div class="ttc" id="q__shared_8c_html_aad4e641649a5bcf8bb21fbe7a815ee98"><div class="ttname"><a href="q__shared_8c.html#aad4e641649a5bcf8bb21fbe7a815ee98">Com_sprintf</a></div><div class="ttdeci">int QDECL Com_sprintf(char *dest, unsigned int size, const char *fmt,...)</div><div class="ttdoc">Com_sprintf. </div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8c_source.html#l01932">q_shared.c:1932</a></div></div>
<div class="ttc" id="structshader__s_html_a5003d5a68c72e2b9ce5f776efc7593dc"><div class="ttname"><a href="structshader__s.html#a5003d5a68c72e2b9ce5f776efc7593dc">shader_s::needsColor</a></div><div class="ttdeci">qboolean needsColor</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00503">tr_local.h:503</a></div></div>
<div class="ttc" id="tr__init_8c_html_ae5a86f4b2e7724fd33b09be699cacc97"><div class="ttname"><a href="tr__init_8c.html#ae5a86f4b2e7724fd33b09be699cacc97">glConfig</a></div><div class="ttdeci">glconfig_t glConfig</div><div class="ttdoc">outside of TR since it shouldn&amp;#39;t be cleared during ref re-init </div><div class="ttdef"><b>Definition:</b> <a href="tr__init_8c_source.html#l00038">tr_init.c:38</a></div></div>
<div class="ttc" id="tr__shader_8c_html_abf5cd8dab72ecbe56610f71712fa4b35"><div class="ttname"><a href="tr__shader_8c.html#abf5cd8dab72ecbe56610f71712fa4b35">NameToDstBlendMode</a></div><div class="ttdeci">static int NameToDstBlendMode(const char *name)</div><div class="ttdoc">NameToDstBlendMode. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00251">tr_shader.c:251</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a65324e3e2cbd6297df4952fc8078bdbc"><div class="ttname"><a href="tr__shader_8c.html#a65324e3e2cbd6297df4952fc8078bdbc">FindShaderInShaderText</a></div><div class="ttdeci">static char * FindShaderInShaderText(const char *shadername)</div><div class="ttdoc">Scans the combined text description of all the shader files for the given shader name. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03104">tr_shader.c:3104</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a4b96bfc1cab08cd7393ad68459b530b8"><div class="ttname"><a href="tr__shader_8c.html#a4b96bfc1cab08cd7393ad68459b530b8">MAX_SHADER_FILES</a></div><div class="ttdeci">#define MAX_SHADER_FILES</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03824">tr_shader.c:3824</a></div></div>
<div class="ttc" id="structglconfig__t_html_a4717bfae77789bfd4bb53d0577018f30"><div class="ttname"><a href="structglconfig__t.html#a4717bfae77789bfd4bb53d0577018f30">glconfig_t::textureEnvAddAvailable</a></div><div class="ttdeci">qboolean textureEnvAddAvailable</div><div class="ttdef"><b>Definition:</b> <a href="tr__types_8h_source.html#l00460">tr_types.h:460</a></div></div>
<div class="ttc" id="tr__main_8c_html_ad8c9b460fd8a24127b3c7dfd78e9351e"><div class="ttname"><a href="tr__main_8c.html#ad8c9b460fd8a24127b3c7dfd78e9351e">ri</a></div><div class="ttdeci">refimport_t ri</div><div class="ttdef"><b>Definition:</b> <a href="tr__main_8c_source.html#l00050">tr_main.c:50</a></div></div>
<div class="ttc" id="q__math_8c_html_a80a7100dd04cc45b8d0413f3f2f2f96e"><div class="ttname"><a href="q__math_8c.html#a80a7100dd04cc45b8d0413f3f2f2f96e">ColorBytes4</a></div><div class="ttdeci">unsigned ColorBytes4(float r, float g, float b, float a)</div><div class="ttdoc">ColorBytes4. </div><div class="ttdef"><b>Definition:</b> <a href="q__math_8c_source.html#l00381">q_math.c:381</a></div></div>
<div class="ttc" id="tr__local_8h_html_a5f4270b11e8eb5f664fd81660a2f0427ae319229e08f6cb95dc5fe30bd9587d77"><div class="ttname"><a href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427ae319229e08f6cb95dc5fe30bd9587d77">AGEN_CONST</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00213">tr_local.h:213</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609ad07517a56f680aff8c9b8a53037beec0"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609ad07517a56f680aff8c9b8a53037beec0">GLS_DSTBLEND_ONE_MINUS_SRC_COLOR</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01546">tr_local.h:1546</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a4572444230e79b74c27e93ad6bf25214"><div class="ttname"><a href="surfaceflags_8h.html#a4572444230e79b74c27e93ad6bf25214">CONTENTS_PLAYERCLIP</a></div><div class="ttdeci">#define CONTENTS_PLAYERCLIP</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00056">surfaceflags.h:56</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a7379cb52014d710eb6ca42a544ff7a3c"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a7379cb52014d710eb6ca42a544ff7a3c">GLS_DSTBLEND_SRC_COLOR</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01545">tr_local.h:1545</a></div></div>
<div class="ttc" id="structshaderStage__t_html_a98efc57ba404eb7f369377c14b4f7bce"><div class="ttname"><a href="structshaderStage__t.html#a98efc57ba404eb7f369377c14b4f7bce">shaderStage_t::active</a></div><div class="ttdeci">qboolean active</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00382">tr_local.h:382</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a32873db28834ba69f1fd4fb93483f5eb"><div class="ttname"><a href="surfaceflags_8h.html#a32873db28834ba69f1fd4fb93483f5eb">CONTENTS_STRUCTURAL</a></div><div class="ttdeci">#define CONTENTS_STRUCTURAL</div><div class="ttdoc">brushes used for the bsp </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00068">surfaceflags.h:68</a></div></div>
<div class="ttc" id="dl__local_8h_html_a2f2251d7d64d4c9ec69520b953f68bb9"><div class="ttname"><a href="dl__local_8h.html#a2f2251d7d64d4c9ec69520b953f68bb9">va</a></div><div class="ttdeci">char * va(char *format,...) _attribute((format(printf</div></div>
<div class="ttc" id="structtrGlobals__t_html_a6358308720e31e20f6848d1821ff16ce"><div class="ttname"><a href="structtrGlobals__t.html#a6358308720e31e20f6848d1821ff16ce">trGlobals_t::worldDir</a></div><div class="ttdeci">char * worldDir</div><div class="ttdoc">for referencing external lightmaps </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01393">tr_local.h:1393</a></div></div>
<div class="ttc" id="_2tr__local_8h_html_a458e651af6690959efa2afb96be7d609a3bb089e7ee899da0b4e9b4b17d716377"><div class="ttname"><a href="_2tr__local_8h.html#a458e651af6690959efa2afb96be7d609a3bb089e7ee899da0b4e9b4b17d716377">GLS_DSTBLEND_ONE</a></div><div class="ttdef"><b>Definition:</b> <a href="_2tr__local_8h_source.html#l01544">tr_local.h:1544</a></div></div>
<div class="ttc" id="q__shared_8h_html_a1b70c63c830b530f9eacf212a290f275"><div class="ttname"><a href="q__shared_8h.html#a1b70c63c830b530f9eacf212a290f275">PADP</a></div><div class="ttdeci">#define PADP(base, alignment)</div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8h_source.html#l00378">q_shared.h:378</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a43c60bae100a5c008106719eddfa0550"><div class="ttname"><a href="tr__shader_8c.html#a43c60bae100a5c008106719eddfa0550">ParseDeform</a></div><div class="ttdeci">static void ParseDeform(char **text)</div><div class="ttdoc">ParseDeform. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l01274">tr_shader.c:1274</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a1caf9aa9aadb12cf22d72ee5b7bd2ca7"><div class="ttname"><a href="tr__shader_8c.html#a1caf9aa9aadb12cf22d72ee5b7bd2ca7">RE_RegisterShaderFromImage</a></div><div class="ttdeci">qhandle_t RE_RegisterShaderFromImage(const char *name, int lightmapIndex, image_t *image, qboolean mipRawImage)</div><div class="ttdoc">RE_RegisterShaderFromImage. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03498">tr_shader.c:3498</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a8dd6744600e77daf2ae178b0f557e7e9"><div class="ttname"><a href="tr__shader_8c.html#a8dd6744600e77daf2ae178b0f557e7e9">RE_RegisterShader</a></div><div class="ttdeci">qhandle_t RE_RegisterShader(const char *name)</div><div class="ttdoc">This is the exported shader entry point for the rest of the system It will always return an index tha...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03584">tr_shader.c:3584</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a3cf937c1f3c66b599f4d1fe7b057fd4a"><div class="ttname"><a href="surfaceflags_8h.html#a3cf937c1f3c66b599f4d1fe7b057fd4a">SURF_MONSLICK_E</a></div><div class="ttdeci">#define SURF_MONSLICK_E</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00103">surfaceflags.h:103</a></div></div>
<div class="ttc" id="tr__local_8h_html_a1480f4cb61af8bab511fad028c084b20"><div class="ttname"><a href="tr__local_8h.html#a1480f4cb61af8bab511fad028c084b20">cullType_t</a></div><div class="ttdeci">cullType_t</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00415">tr_local.h:415</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a4dc51618f8f4789b941646df67a79eba"><div class="ttname"><a href="tr__shader_8c.html#a4dc51618f8f4789b941646df67a79eba">R_RemapShader</a></div><div class="ttdeci">void R_RemapShader(const char *shaderName, const char *newShaderName, const char *timeOffset)</div><div class="ttdoc">R_RemapShader. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l00077">tr_shader.c:77</a></div></div>
<div class="ttc" id="structshader__s_html_a07935f69cd87b50a9f0575dc0a8e5d19"><div class="ttname"><a href="structshader__s.html#a07935f69cd87b50a9f0575dc0a8e5d19">shader_s::timeOffset</a></div><div class="ttdeci">double timeOffset</div><div class="ttdoc">current time offset for this shader </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00516">tr_local.h:516</a></div></div>
<div class="ttc" id="tr__init_8c_html_a8ee01d04c50ee40fc3201c6e1aa2ba8b"><div class="ttname"><a href="tr__init_8c.html#a8ee01d04c50ee40fc3201c6e1aa2ba8b">r_detailTextures</a></div><div class="ttdeci">cvar_t * r_detailTextures</div><div class="ttdoc">enables/disables detail texturing stages </div><div class="ttdef"><b>Definition:</b> <a href="tr__init_8c_source.html#l00062">tr_init.c:62</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a62f176b8fd5c75131eb4adb78df8589b"><div class="ttname"><a href="structtrGlobals__t.html#a62f176b8fd5c75131eb4adb78df8589b">trGlobals_t::sortedShaders</a></div><div class="ttdeci">shader_t * sortedShaders[MAX_SHADERS]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01460">tr_local.h:1460</a></div></div>
<div class="ttc" id="structshaderStage__t_html_ae483271e14d28544d1c13028c596b00b"><div class="ttname"><a href="structshaderStage__t.html#ae483271e14d28544d1c13028c596b00b">shaderStage_t::zFadeBounds</a></div><div class="ttdeci">float zFadeBounds[2]</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00398">tr_local.h:398</a></div></div>
<div class="ttc" id="structglconfig__t_html_ac3ce65bed93df99036d35faab2e41011"><div class="ttname"><a href="structglconfig__t.html#ac3ce65bed93df99036d35faab2e41011">glconfig_t::colorBits</a></div><div class="ttdeci">int colorBits</div><div class="ttdef"><b>Definition:</b> <a href="tr__types_8h_source.html#l00453">tr_types.h:453</a></div></div>
<div class="ttc" id="structdrawBufferCommand__t_html"><div class="ttname"><a href="structdrawBufferCommand__t.html">drawBufferCommand_t</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01907">tr_local.h:1907</a></div></div>
<div class="ttc" id="tr__local_8h_html_ae1cdd295436ef51febabf3b11dc897e0"><div class="ttname"><a href="tr__local_8h.html#ae1cdd295436ef51febabf3b11dc897e0">NUM_TEXTURE_BUNDLES</a></div><div class="ttdeci">#define NUM_TEXTURE_BUNDLES</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00374">tr_local.h:374</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a86398796518636f583163963ab0f8665"><div class="ttname"><a href="surfaceflags_8h.html#a86398796518636f583163963ab0f8665">SURF_NODRAW</a></div><div class="ttdeci">#define SURF_NODRAW</div><div class="ttdoc">don&amp;#39;t generate a drawsurface at all </div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00080">surfaceflags.h:80</a></div></div>
<div class="ttc" id="tr__common_8h_html_a4ace57eb682bd3e6ac5fc82ae2e9bd3e"><div class="ttname"><a href="tr__common_8h.html#a4ace57eb682bd3e6ac5fc82ae2e9bd3e">Ren_Developer</a></div><div class="ttdeci">#define Ren_Developer(...)</div><div class="ttdef"><b>Definition:</b> <a href="tr__common_8h_source.html#l00078">tr_common.h:78</a></div></div>
<div class="ttc" id="structshader__s_html_a63a3ac69b0772b80eb81be6bb4b4e650"><div class="ttname"><a href="structshader__s.html#a63a3ac69b0772b80eb81be6bb4b4e650">shader_s::sort</a></div><div class="ttdeci">float sort</div><div class="ttdoc">lower numbered shaders draw before higher numbered </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00468">tr_local.h:468</a></div></div>
<div class="ttc" id="tr__local_8h_html_a2592c0b3e354564bc96081b55e3912aa"><div class="ttname"><a href="tr__local_8h.html#a2592c0b3e354564bc96081b55e3912aa">tr</a></div><div class="ttdeci">trGlobals_t tr</div><div class="ttdef"><b>Definition:</b> <a href="tr__main_8c_source.html#l00038">tr_main.c:38</a></div></div>
<div class="ttc" id="tr__init_8c_html_a7e151f8b7e5a2df0a3ac4d57475cd569"><div class="ttname"><a href="tr__init_8c.html#a7e151f8b7e5a2df0a3ac4d57475cd569">r_printShaders</a></div><div class="ttdeci">cvar_t * r_printShaders</div><div class="ttdef"><b>Definition:</b> <a href="tr__init_8c_source.html#l00150">tr_init.c:150</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a8589f25374cfaf54b423c559cca3f370"><div class="ttname"><a href="tr__shader_8c.html#a8589f25374cfaf54b423c559cca3f370">R_CacheShaderAllocExt</a></div><div class="ttdeci">void * R_CacheShaderAllocExt(const char *name, int size, const char *file, int line)</div><div class="ttdoc">R_CacheShaderAllocExt. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03942">tr_shader.c:3942</a></div></div>
<div class="ttc" id="tr__local_8h_html_aaa3322b93f735cd1e46b1ec42cdfc03e"><div class="ttname"><a href="tr__local_8h.html#aaa3322b93f735cd1e46b1ec42cdfc03e">QSORT_FRONTFACE_SHIFT</a></div><div class="ttdeci">#define QSORT_FRONTFACE_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01288">tr_local.h:1288</a></div></div>
<div class="ttc" id="structshaderStage__t_html_a6f0524ad408f34a024a3faefce6c1461"><div class="ttname"><a href="structshaderStage__t.html#a6f0524ad408f34a024a3faefce6c1461">shaderStage_t::isFogged</a></div><div class="ttdeci">qboolean isFogged</div><div class="ttdoc">used only for shaders that have fog disabled, so we can enable it for individual stages ...</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00401">tr_local.h:401</a></div></div>
<div class="ttc" id="tr__local_8h_html_a03df5920ac8ad3d828f4174d77a0c705a7beaf01cbe0de9e837686d0038c631a0"><div class="ttname"><a href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a7beaf01cbe0de9e837686d0038c631a0">SS_SEE_THROUGH</a></div><div class="ttdoc">ladders, grates, grills that may have small blended edges </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00133">tr_local.h:133</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a0c3a13742d428268823a68cb4a1393c3"><div class="ttname"><a href="tr__shader_8c.html#a0c3a13742d428268823a68cb4a1393c3">R_FindShader</a></div><div class="ttdeci">shader_t * R_FindShader(const char *name, int lightmapIndex, qboolean mipRawImage)</div><div class="ttdoc">Will always return a valid shader, but it might be the default shader if the real one can&amp;#39;t be found...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l03342">tr_shader.c:3342</a></div></div>
<div class="ttc" id="tr__local_8h_html_a3a34acf454edfe242091f462a082ec62a024e3ab34703bd8344f837d4496504af"><div class="ttname"><a href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62a024e3ab34703bd8344f837d4496504af">TMOD_SWAP</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00294">tr_local.h:294</a></div></div>
<div class="ttc" id="q__shared_8c_html_a4ebbf2d87debcef0d3ecd2fd4fe753f9"><div class="ttname"><a href="q__shared_8c.html#a4ebbf2d87debcef0d3ecd2fd4fe753f9">COM_FixPath</a></div><div class="ttdeci">void COM_FixPath(char *pathname)</div><div class="ttdoc">COM_FixPath. </div><div class="ttdef"><b>Definition:</b> <a href="q__shared_8c_source.html#l00057">q_shared.c:57</a></div></div>
<div class="ttc" id="tr__local_8h_html_ade4a593805de6ee6d59c4a0db0cc362f"><div class="ttname"><a href="tr__local_8h.html#ade4a593805de6ee6d59c4a0db0cc362f">GLS_ATEST_GE_80</a></div><div class="ttdeci">#define GLS_ATEST_GE_80</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01550">tr_local.h:1550</a></div></div>
<div class="ttc" id="tr__shader_8c_html_aef5482366b63b6e3c30eef12629d467c"><div class="ttname"><a href="tr__shader_8c.html#aef5482366b63b6e3c30eef12629d467c">RE_LoadDynamicShader</a></div><div class="ttdeci">qboolean RE_LoadDynamicShader(const char *shadername, const char *shadertext)</div><div class="ttdoc">load a new dynamic shader if shadertext is NULL, looks for matching shadername and removes it ...</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02996">tr_shader.c:2996</a></div></div>
<div class="ttc" id="structrefimport__t_html_ac7fc7916f1593dee91474ff7c75f6914"><div class="ttname"><a href="structrefimport__t.html#ac7fc7916f1593dee91474ff7c75f6914">refimport_t::Hunk_FreeTempMemory</a></div><div class="ttdeci">void(* Hunk_FreeTempMemory)(void *block)</div><div class="ttdef"><b>Definition:</b> <a href="tr__public_8h_source.html#l00193">tr_public.h:193</a></div></div>
<div class="ttc" id="tr__local_8h_html_a03df5920ac8ad3d828f4174d77a0c705a5387d32643e272a7aab7117d2fa0d235"><div class="ttname"><a href="tr__local_8h.html#a03df5920ac8ad3d828f4174d77a0c705a5387d32643e272a7aab7117d2fa0d235">SS_FOG</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00137">tr_local.h:137</a></div></div>
<div class="ttc" id="tr__local_8h_html_a75f18f0db875d7bdaa14fed02fc2777fa4ad8c04439b23c4373ab322d0d7e8752"><div class="ttname"><a href="tr__local_8h.html#a75f18f0db875d7bdaa14fed02fc2777fa4ad8c04439b23c4373ab322d0d7e8752">DEFORM_TEXT0</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00187">tr_local.h:187</a></div></div>
<div class="ttc" id="structshader__s_html_aef63f5e4a3db9c23201ef10d62cb42f5"><div class="ttname"><a href="structshader__s.html#aef63f5e4a3db9c23201ef10d62cb42f5">shader_s::index</a></div><div class="ttdeci">int index</div><div class="ttdoc">this shader == tr.shaders[index] </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00465">tr_local.h:465</a></div></div>
<div class="ttc" id="tr__local_8h_html_a6bfbcfc4449ac0e3937e3182703660fca08a84aec97b7f5a7410e587ab07bd1a7"><div class="ttname"><a href="tr__local_8h.html#a6bfbcfc4449ac0e3937e3182703660fca08a84aec97b7f5a7410e587ab07bd1a7">TCGEN_LIGHTMAP</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00244">tr_local.h:244</a></div></div>
<div class="ttc" id="structwaveForm__t_html_aca8ff8710a07c3d1d1e858c3467b92fc"><div class="ttname"><a href="structwaveForm__t.html#aca8ff8710a07c3d1d1e858c3467b92fc">waveForm_t::base</a></div><div class="ttdeci">double base</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00272">tr_local.h:272</a></div></div>
<div class="ttc" id="tr__shader_8c_html_aff663d15b92b099f10ce008263b33746"><div class="ttname"><a href="tr__shader_8c.html#aff663d15b92b099f10ce008263b33746">dshader</a></div><div class="ttdeci">static dynamicshader_t * dshader</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l02985">tr_shader.c:2985</a></div></div>
<div class="ttc" id="tr__local_8h_html_a5f4270b11e8eb5f664fd81660a2f0427abbb21d7bff8c2c1523ac62b264edada1"><div class="ttname"><a href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427abbb21d7bff8c2c1523ac62b264edada1">AGEN_LIGHTING_SPECULAR</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00210">tr_local.h:210</a></div></div>
<div class="ttc" id="tr__local_8h_html_a5f4270b11e8eb5f664fd81660a2f0427a402dde0c30f1e748c0ff12a8e6bde2b0"><div class="ttname"><a href="tr__local_8h.html#a5f4270b11e8eb5f664fd81660a2f0427a402dde0c30f1e748c0ff12a8e6bde2b0">AGEN_ONE_MINUS_ENTITY</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00206">tr_local.h:206</a></div></div>
<div class="ttc" id="tr__local_8h_html_a3a34acf454edfe242091f462a082ec62aaf6e9e83c83d9c9098a4da5c2b26dfcd"><div class="ttname"><a href="tr__local_8h.html#a3a34acf454edfe242091f462a082ec62aaf6e9e83c83d9c9098a4da5c2b26dfcd">TMOD_ENTITY_TRANSLATE</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00293">tr_local.h:293</a></div></div>
<div class="ttc" id="structtrGlobals__t_html_a842ad2a36782e97b37fbfc6df16df3d0"><div class="ttname"><a href="structtrGlobals__t.html#a842ad2a36782e97b37fbfc6df16df3d0">trGlobals_t::sunflareShader</a></div><div class="ttdeci">shader_t * sunflareShader[6]</div><div class="ttdoc">for the camera lens flare effect for sun </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l01413">tr_local.h:1413</a></div></div>
<div class="ttc" id="structinfoParm__t_html_af539facd845f45ec6d4490f2bbbf8cc1"><div class="ttname"><a href="structinfoParm__t.html#af539facd845f45ec6d4490f2bbbf8cc1">infoParm_t::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l01566">tr_shader.c:1566</a></div></div>
<div class="ttc" id="tr__local_8h_html_aa41e33942246b343368062d4d08b3822a2eb0c4d039eb8481fd2613a3d2438dd5"><div class="ttname"><a href="tr__local_8h.html#aa41e33942246b343368062d4d08b3822a2eb0c4d039eb8481fd2613a3d2438dd5">RC_ROTATED_PIC</a></div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l02062">tr_local.h:2062</a></div></div>
<div class="ttc" id="tr__shader_8c_html_a377e595c80641dd7660728349eb92c55"><div class="ttname"><a href="tr__shader_8c.html#a377e595c80641dd7660728349eb92c55">R_RegisterShaderImages</a></div><div class="ttdeci">static qboolean R_RegisterShaderImages(shader_t *sh)</div><div class="ttdoc">Make sure all images that belong to this shader remain valid. </div><div class="ttdef"><b>Definition:</b> <a href="tr__shader_8c_source.html#l04133">tr_shader.c:4133</a></div></div>
<div class="ttc" id="structshaderStage__t_html_acd0923c0ca1129dd385e0a0394b17dac"><div class="ttname"><a href="structshaderStage__t.html#acd0923c0ca1129dd385e0a0394b17dac">shaderStage_t::alphaGen</a></div><div class="ttdeci">alphaGen_t alphaGen</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00390">tr_local.h:390</a></div></div>
<div class="ttc" id="structshaderStage__t_html_a87be6cca01f47bbc8d1f228150fd058a"><div class="ttname"><a href="structshaderStage__t.html#a87be6cca01f47bbc8d1f228150fd058a">shaderStage_t::rgbWave</a></div><div class="ttdeci">waveForm_t rgbWave</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00386">tr_local.h:386</a></div></div>
<div class="ttc" id="structrefimport__t_html_a24b78f445e9bd6484b2b5f3cc48e5192"><div class="ttname"><a href="structrefimport__t.html#a24b78f445e9bd6484b2b5f3cc48e5192">refimport_t::Cmd_Argc</a></div><div class="ttdeci">int(* Cmd_Argc)(void)</div><div class="ttdef"><b>Definition:</b> <a href="tr__public_8h_source.html#l00213">tr_public.h:213</a></div></div>
<div class="ttc" id="structskyParms__t_html_af209a0822d8d93edaf3f9621ee8873cb"><div class="ttname"><a href="structskyParms__t.html#af209a0822d8d93edaf3f9621ee8873cb">skyParms_t::cloudHeight</a></div><div class="ttdeci">float cloudHeight</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00439">tr_local.h:439</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_ace710854b6af1d508eb1abbad122fc07"><div class="ttname"><a href="surfaceflags_8h.html#ace710854b6af1d508eb1abbad122fc07">SURF_MONSLICK_W</a></div><div class="ttdeci">#define SURF_MONSLICK_W</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00101">surfaceflags.h:101</a></div></div>
<div class="ttc" id="structshader__s_html_ad7e072249689528b97c784b3ab0ae887"><div class="ttname"><a href="structshader__s.html#ad7e072249689528b97c784b3ab0ae887">shader_s::numDeforms</a></div><div class="ttdeci">int numDeforms</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00507">tr_local.h:507</a></div></div>
<div class="ttc" id="structshader__s_html_a61742fb0cad6c2ef67e0c59c7c3c84d1"><div class="ttname"><a href="structshader__s.html#a61742fb0cad6c2ef67e0c59c7c3c84d1">shader_s::needsNormal</a></div><div class="ttdeci">qboolean needsNormal</div><div class="ttdoc">not all shaders will need all data to be gathered </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00500">tr_local.h:500</a></div></div>
<div class="ttc" id="structshader__s_html_a52e1f12a898d13b736cab846d0ccb874"><div class="ttname"><a href="structshader__s.html#a52e1f12a898d13b736cab846d0ccb874">shader_s::distanceCull</a></div><div class="ttdeci">vec4_t distanceCull</div><div class="ttdoc">opaque alpha range for foliage (inner, outer, alpha threshold, 1/(outer-inner)) </div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00489">tr_local.h:489</a></div></div>
<div class="ttc" id="tr__image_8c_html_a8aa4c79f547ccb517411a9cd3e76d990"><div class="ttname"><a href="tr__image_8c.html#a8aa4c79f547ccb517411a9cd3e76d990">R_FindImageFile</a></div><div class="ttdeci">image_t * R_FindImageFile(const char *name, qboolean mipmap, qboolean allowPicmip, int glWrapClampMode, qboolean lightmap)</div><div class="ttdoc">Finds or loads the given image. </div><div class="ttdef"><b>Definition:</b> <a href="tr__image_8c_source.html#l01072">tr_image.c:1072</a></div></div>
<div class="ttc" id="structshaderStage__t_html_abfcc6c20804eac7f12aac7f115e264a9"><div class="ttname"><a href="structshaderStage__t.html#abfcc6c20804eac7f12aac7f115e264a9">shaderStage_t::alphaWave</a></div><div class="ttdeci">waveForm_t alphaWave</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00389">tr_local.h:389</a></div></div>
<div class="ttc" id="surfaceflags_8h_html_a937c6bfae7609c6d522fd5f57995e9a5"><div class="ttname"><a href="surfaceflags_8h.html#a937c6bfae7609c6d522fd5f57995e9a5">CONTENTS_CLUSTERPORTAL</a></div><div class="ttdeci">#define CONTENTS_CLUSTERPORTAL</div><div class="ttdef"><b>Definition:</b> <a href="surfaceflags_8h_source.html#l00060">surfaceflags.h:60</a></div></div>
<div class="ttc" id="g__match__tokens_8c_html_a88efba04161d4ad51bc5113fbd9f833b"><div class="ttname"><a href="g__match__tokens_8c.html#a88efba04161d4ad51bc5113fbd9f833b">hash</a></div><div class="ttdeci">static unsigned int hash(register const char *str, register unsigned int len)</div><div class="ttdef"><b>Definition:</b> <a href="g__match__tokens_8c_source.html#l00059">g_match_tokens.c:59</a></div></div>
<div class="ttc" id="structwaveForm__t_html_aeca9a857ddf03960fbc695b9fd9d11ba"><div class="ttname"><a href="structwaveForm__t.html#aeca9a857ddf03960fbc695b9fd9d11ba">waveForm_t::amplitude</a></div><div class="ttdeci">double amplitude</div><div class="ttdef"><b>Definition:</b> <a href="tr__local_8h_source.html#l00273">tr_local.h:273</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 16 2019 14:19:53 for ET: Legacy by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ET: Legacy: src/renderer/tr_flares.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ET: Legacy
   </div>
   <div id="projectbrief">Open-source team based FPS game compatible with Wolfenstein: Enemy Territoryâ„¢</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_7bc5e25958a2fb25a8561f3aa0def6c5.html">renderer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tr_flares.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>LIGHT FLARES.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="tr__local_8h_source.html">tr_local.h</a>&quot;</code><br />
</div>
<p><a href="tr__flares_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structflare__s.html">flare_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1ff46cef7e84122b648ec4b55fac4e6a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tr__flares_8c.html#a1ff46cef7e84122b648ec4b55fac4e6a">MAX_FLARES</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:a1ff46cef7e84122b648ec4b55fac4e6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a94ebf4882eb11f3af7d47f25dabf9025"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structflare__s.html">flare_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tr__flares_8c.html#a94ebf4882eb11f3af7d47f25dabf9025">flare_t</a></td></tr>
<tr class="memdesc:a94ebf4882eb11f3af7d47f25dabf9025"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flare states maintain visibility over multiple frames for fading layers: view, mirror, menu.  <a href="#a94ebf4882eb11f3af7d47f25dabf9025">More...</a><br /></td></tr>
<tr class="separator:a94ebf4882eb11f3af7d47f25dabf9025"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a80894865ad6db7a79eb0ce23490b9eb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tr__flares_8c.html#a80894865ad6db7a79eb0ce23490b9eb7">R_ClearFlares</a> (void)</td></tr>
<tr class="memdesc:a80894865ad6db7a79eb0ce23490b9eb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">R_ClearFlares.  <a href="#a80894865ad6db7a79eb0ce23490b9eb7">More...</a><br /></td></tr>
<tr class="separator:a80894865ad6db7a79eb0ce23490b9eb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8d0f581137cee89238f68708c35cfe6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tr__flares_8c.html#af8d0f581137cee89238f68708c35cfe6">RB_AddFlare</a> (void *surface, int fogNum, <a class="el" href="q__math_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> point, <a class="el" href="q__math_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> color, float scale, <a class="el" href="q__math_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> normal, int id, <a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> visible)</td></tr>
<tr class="memdesc:af8d0f581137cee89238f68708c35cfe6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is called at surface tesselation time.  <a href="#af8d0f581137cee89238f68708c35cfe6">More...</a><br /></td></tr>
<tr class="separator:af8d0f581137cee89238f68708c35cfe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace80b761d008113e0faf7786caac627e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tr__flares_8c.html#ace80b761d008113e0faf7786caac627e">RB_AddDlightFlares</a> (void)</td></tr>
<tr class="memdesc:ace80b761d008113e0faf7786caac627e"><td class="mdescLeft">&#160;</td><td class="mdescRight">RB_AddDlightFlares.  <a href="#ace80b761d008113e0faf7786caac627e">More...</a><br /></td></tr>
<tr class="separator:ace80b761d008113e0faf7786caac627e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fa60f3675348d2b43fd41f6557d6171"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tr__flares_8c.html#a2fa60f3675348d2b43fd41f6557d6171">RB_AddCoronaFlares</a> (void)</td></tr>
<tr class="memdesc:a2fa60f3675348d2b43fd41f6557d6171"><td class="mdescLeft">&#160;</td><td class="mdescRight">RB_AddCoronaFlares.  <a href="#a2fa60f3675348d2b43fd41f6557d6171">More...</a><br /></td></tr>
<tr class="separator:a2fa60f3675348d2b43fd41f6557d6171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2c53354239945c71e7a583457da2c84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tr__flares_8c.html#ac2c53354239945c71e7a583457da2c84">RB_TestFlare</a> (<a class="el" href="tr__flares_8c.html#a94ebf4882eb11f3af7d47f25dabf9025">flare_t</a> *f)</td></tr>
<tr class="memdesc:ac2c53354239945c71e7a583457da2c84"><td class="mdescLeft">&#160;</td><td class="mdescRight">RB_TestFlare.  <a href="#ac2c53354239945c71e7a583457da2c84">More...</a><br /></td></tr>
<tr class="separator:ac2c53354239945c71e7a583457da2c84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3014d87dc1c28e3ca1d5b667be392f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tr__flares_8c.html#ad3014d87dc1c28e3ca1d5b667be392f2">RB_RenderFlare</a> (<a class="el" href="tr__flares_8c.html#a94ebf4882eb11f3af7d47f25dabf9025">flare_t</a> *f)</td></tr>
<tr class="memdesc:ad3014d87dc1c28e3ca1d5b667be392f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">RB_RenderFlare.  <a href="#ad3014d87dc1c28e3ca1d5b667be392f2">More...</a><br /></td></tr>
<tr class="separator:ad3014d87dc1c28e3ca1d5b667be392f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4128bb232481f2de5c278d20fbd03638"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tr__flares_8c.html#a4128bb232481f2de5c278d20fbd03638">RB_RenderFlares</a> (void)</td></tr>
<tr class="memdesc:a4128bb232481f2de5c278d20fbd03638"><td class="mdescLeft">&#160;</td><td class="mdescRight">Because flares are simulating an occular effect, they should be drawn after everything (all views) in the entire frame has been drawn.  <a href="#a4128bb232481f2de5c278d20fbd03638">More...</a><br /></td></tr>
<tr class="separator:a4128bb232481f2de5c278d20fbd03638"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad9288f137738ec0b684adab004f6d1e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="tr__flares_8c.html#a94ebf4882eb11f3af7d47f25dabf9025">flare_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tr__flares_8c.html#ad9288f137738ec0b684adab004f6d1e4">r_flareStructs</a> [<a class="el" href="LES_2tr__flares_8c.html#a1ff46cef7e84122b648ec4b55fac4e6a">MAX_FLARES</a>]</td></tr>
<tr class="separator:ad9288f137738ec0b684adab004f6d1e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af942463aae3d9cb50452944e739f88bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="tr__flares_8c.html#a94ebf4882eb11f3af7d47f25dabf9025">flare_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tr__flares_8c.html#af942463aae3d9cb50452944e739f88bd">r_activeFlares</a></td></tr>
<tr class="separator:af942463aae3d9cb50452944e739f88bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a964710d10b05ae6f004a8e5799d4ee28"><td class="memItemLeft" align="right" valign="top"><a class="el" href="tr__flares_8c.html#a94ebf4882eb11f3af7d47f25dabf9025">flare_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tr__flares_8c.html#a964710d10b05ae6f004a8e5799d4ee28">r_inactiveFlares</a></td></tr>
<tr class="separator:a964710d10b05ae6f004a8e5799d4ee28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>LIGHT FLARES. </p>
<p>A light flare is an effect that takes place inside the eye when bright light sources are visible. The size of the flare reletive to the screen is nearly constant, irrespective of distance, but the intensity should be proportional to the projected area of the light source.</p>
<p>A surface that has been flagged as having a light flare will calculate the depth buffer value that it's midpoint should have when the surface is added.</p>
<p>After all opaque surfaces have been rendered, the depth buffer is read back for each flare in view. If the point has not been obscured by a closer surface, the flare should be drawn.</p>
<p>Surfaces that have a repeated texture should never be flagged as flaring, because there will only be a single flare added at the midpoint of the polygon.</p>
<p>To prevent abrupt popping, the intensity of the flare is interpolated up and down as it changes visibility. This involves scene to scene state, unlike almost all other aspects of the renderer, and is complicated by the fact that a single frame may have multiple scenes.</p>
<p><a class="el" href="tr__flares_8c.html#a4128bb232481f2de5c278d20fbd03638" title="Because flares are simulating an occular effect, they should be drawn after everything (all views) in...">RB_RenderFlares()</a> will be called once per view (twice in a mirrored scene, potentially up to five or more times in a frame with 3D status bar icons). </p>

<p>Definition in file <a class="el" href="tr__flares_8c_source.html">tr_flares.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a1ff46cef7e84122b648ec4b55fac4e6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_FLARES&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="tr__flares_8c_source.html#l00093">93</a> of file <a class="el" href="tr__flares_8c_source.html">tr_flares.c</a>.</p>

<p>Referenced by <a class="el" href="tr__flares_8c_source.html#l00101">R_ClearFlares()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a94ebf4882eb11f3af7d47f25dabf9025"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tr__flares_8c.html#a94ebf4882eb11f3af7d47f25dabf9025">flare_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flare states maintain visibility over multiple frames for fading layers: view, mirror, menu. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a80894865ad6db7a79eb0ce23490b9eb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void R_ClearFlares </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>R_ClearFlares. </p>

<p>Definition at line <a class="el" href="tr__flares_8c_source.html#l00101">101</a> of file <a class="el" href="tr__flares_8c_source.html">tr_flares.c</a>.</p>

<p>Referenced by <a class="el" href="tr__model_8c_source.html#l01847">RE_BeginRegistration()</a>.</p>

</div>
</div>
<a class="anchor" id="a2fa60f3675348d2b43fd41f6557d6171"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RB_AddCoronaFlares </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RB_AddCoronaFlares. </p>

<p>Definition at line <a class="el" href="tr__flares_8c_source.html#l00274">274</a> of file <a class="el" href="tr__flares_8c_source.html">tr_flares.c</a>.</p>

<p>Referenced by <a class="el" href="tr__flares_8c_source.html#l00480">RB_RenderFlares()</a>.</p>

</div>
</div>
<a class="anchor" id="ace80b761d008113e0faf7786caac627e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RB_AddDlightFlares </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RB_AddDlightFlares. </p>

<p>Definition at line <a class="el" href="tr__flares_8c_source.html#l00230">230</a> of file <a class="el" href="tr__flares_8c_source.html">tr_flares.c</a>.</p>

<p>Referenced by <a class="el" href="tr__flares_8c_source.html#l00480">RB_RenderFlares()</a>.</p>

</div>
</div>
<a class="anchor" id="af8d0f581137cee89238f68708c35cfe6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RB_AddFlare </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>surface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fogNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="q__math_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a>&#160;</td>
          <td class="paramname"><em>point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="q__math_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a>&#160;</td>
          <td class="paramname"><em>color</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="q__math_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a>&#160;</td>
          <td class="paramname"><em>normal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td>
          <td class="paramname"><em>visible</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is called at surface tesselation time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">surface</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fogNum</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">point</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">color</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">scale</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">normal</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">visible</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tr__flares_8c_source.html#l00127">127</a> of file <a class="el" href="tr__flares_8c_source.html">tr_flares.c</a>.</p>

<p>Referenced by <a class="el" href="tr__flares_8c_source.html#l00274">RB_AddCoronaFlares()</a>, <a class="el" href="tr__flares_8c_source.html#l00230">RB_AddDlightFlares()</a>, <a class="el" href="_2tr__flares_8c_source.html#l00245">RB_AddLightFlares()</a>, and <a class="el" href="_2tr__surface_8c_source.html#l02191">Tess_SurfaceFlare()</a>.</p>

</div>
</div>
<a class="anchor" id="ad3014d87dc1c28e3ca1d5b667be392f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RB_RenderFlare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tr__flares_8c.html#a94ebf4882eb11f3af7d47f25dabf9025">flare_t</a> *&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RB_RenderFlare. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">f</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000378">Todo:</a></b></dt><dd>: use quadstamp? </dd></dl>

<p>Definition at line <a class="el" href="tr__flares_8c_source.html#l00391">391</a> of file <a class="el" href="tr__flares_8c_source.html">tr_flares.c</a>.</p>

<p>Referenced by <a class="el" href="tr__flares_8c_source.html#l00480">RB_RenderFlares()</a>.</p>

</div>
</div>
<a class="anchor" id="a4128bb232481f2de5c278d20fbd03638"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RB_RenderFlares </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Because flares are simulating an occular effect, they should be drawn after everything (all views) in the entire frame has been drawn. </p>
<p>Because of the way portals use the depth buffer to mark off areas, the needed information would be lost after each view, so we are forced to draw flares after each view.</p>
<p>The resulting artifact is that flares in mirrors or portals don't dim properly when occluded by something in the main view, and portal flares that should extend past the portal edge will be overwritten. </p>

<p>Definition at line <a class="el" href="tr__flares_8c_source.html#l00480">480</a> of file <a class="el" href="tr__flares_8c_source.html">tr_flares.c</a>.</p>

<p>Referenced by <a class="el" href="tr__backend_8c_source.html#l00632">RB_RenderDrawSurfList()</a>, and <a class="el" href="_2tr__backend_8c_source.html#l05784">RB_RenderViewFront()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2c53354239945c71e7a583457da2c84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RB_TestFlare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tr__flares_8c.html#a94ebf4882eb11f3af7d47f25dabf9025">flare_t</a> *&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RB_TestFlare. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">f</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tr__flares_8c_source.html#l00328">328</a> of file <a class="el" href="tr__flares_8c_source.html">tr_flares.c</a>.</p>

<p>Referenced by <a class="el" href="tr__flares_8c_source.html#l00480">RB_RenderFlares()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="af942463aae3d9cb50452944e739f88bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tr__flares_8c.html#a94ebf4882eb11f3af7d47f25dabf9025">flare_t</a>* r_activeFlares</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="tr__flares_8c_source.html#l00096">96</a> of file <a class="el" href="tr__flares_8c_source.html">tr_flares.c</a>.</p>

<p>Referenced by <a class="el" href="tr__flares_8c_source.html#l00127">RB_AddFlare()</a>, and <a class="el" href="tr__flares_8c_source.html#l00480">RB_RenderFlares()</a>.</p>

</div>
</div>
<a class="anchor" id="ad9288f137738ec0b684adab004f6d1e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tr__flares_8c.html#a94ebf4882eb11f3af7d47f25dabf9025">flare_t</a> r_flareStructs[<a class="el" href="LES_2tr__flares_8c.html#a1ff46cef7e84122b648ec4b55fac4e6a">MAX_FLARES</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="tr__flares_8c_source.html#l00095">95</a> of file <a class="el" href="tr__flares_8c_source.html">tr_flares.c</a>.</p>

</div>
</div>
<a class="anchor" id="a964710d10b05ae6f004a8e5799d4ee28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tr__flares_8c.html#a94ebf4882eb11f3af7d47f25dabf9025">flare_t</a> * r_inactiveFlares</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="tr__flares_8c_source.html#l00096">96</a> of file <a class="el" href="tr__flares_8c_source.html">tr_flares.c</a>.</p>

<p>Referenced by <a class="el" href="tr__flares_8c_source.html#l00101">R_ClearFlares()</a>, <a class="el" href="tr__flares_8c_source.html#l00127">RB_AddFlare()</a>, and <a class="el" href="tr__flares_8c_source.html#l00480">RB_RenderFlares()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 16 2019 14:19:58 for ET: Legacy by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
